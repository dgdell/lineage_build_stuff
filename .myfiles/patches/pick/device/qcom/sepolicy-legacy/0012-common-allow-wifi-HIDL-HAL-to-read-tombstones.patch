From c038db99d4b80943be282340200389406fa40b8c Mon Sep 17 00:00:00 2001
From: Vladimir Oltean <olteanv@gmail.com>
Date: Wed, 26 Sep 2018 23:58:14 +0300
Subject: [PATCH 12/16] common: allow wifi HIDL HAL to read tombstones

Change-Id: Ib9b9d3aee1bfd4680da3197227842be6455a091e
Signed-off-by: Vladimir Oltean <olteanv@gmail.com>

# Conflicts:
#	common/hal_wifi.te
---
 common/hal_wifi.te | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/common/hal_wifi.te b/common/hal_wifi.te
index aa0bfe3..2b8a499 100644
--- a/common/hal_wifi.te
+++ b/common/hal_wifi.te
@@ -37,6 +37,9 @@ allow hal_wifi_default location_data_file:dir search;
 allow hal_wifi_default location:unix_stream_socket connectto;
 allow hal_wifi_default location_socket:sock_file write;
 
+# /data/vendor/tombstones/wifi
+r_dir_file(hal_wifi_default, vendor_tombstone_data_file);
+
 # allow hal_wifi to write into /data/vendor/tombstones/wifi
 userdebug_or_eng(`
   allow hal_wifi_server vendor_tombstone_data_file:dir rw_dir_perms;
-- 
2.17.1

