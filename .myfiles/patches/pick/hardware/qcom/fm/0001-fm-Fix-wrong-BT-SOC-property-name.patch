From 6ef8f3a7471760e611f2370339cf2e180257b1d5 Mon Sep 17 00:00:00 2001
From: Adithya R <gh0strider.2k18.reborn@gmail.com>
Date: Thu, 1 Nov 2018 01:22:40 +0530
Subject: [PATCH] fm: Fix wrong BT SOC property name

Derp by CAF

Change-Id: Ice597f953e5a2ac363d483649b78fd8bfeffa8a8
---
 fmapp2/src/com/caf/fmradio/FMRadio.java |  2 +-
 fmapp2/src/com/caf/fmradio/FMStats.java |  6 +++---
 jni/android_hardware_fm.cpp             | 10 +++++-----
 qcom/fmradio/FmReceiver.java            |  6 +++---
 4 files changed, 12 insertions(+), 12 deletions(-)

diff --git a/fmapp2/src/com/caf/fmradio/FMRadio.java b/fmapp2/src/com/caf/fmradio/FMRadio.java
index 877aa9d..0850db7 100644
--- a/fmapp2/src/com/caf/fmradio/FMRadio.java
+++ b/fmapp2/src/com/caf/fmradio/FMRadio.java
@@ -407,7 +407,7 @@ public class FMRadio extends Activity
       if ((mERadioTextScroller == null) && (mERadioTextTV != null)) {
           mERadioTextScroller = new ScrollerText(mERadioTextTV);
       }
-      mBTsoc = SystemProperties.get("vendor.bluetooth.soc");
+      mBTsoc = SystemProperties.get("vendor.qcom.bluetooth.soc");
    }
 
    protected void setDisplayvalue(){
diff --git a/fmapp2/src/com/caf/fmradio/FMStats.java b/fmapp2/src/com/caf/fmradio/FMStats.java
index cee1b85..fd45e46 100644
--- a/fmapp2/src/com/caf/fmradio/FMStats.java
+++ b/fmapp2/src/com/caf/fmradio/FMStats.java
@@ -2883,7 +2883,7 @@ public class FMStats extends Activity  {
         }
     }
     private void checkTransportLayer() {
-       String chip = SystemProperties.get("vendor.bluetooth.soc","default");
+       String chip = SystemProperties.get("vendor.qcom.bluetooth.soc","default");
        if (chip.equals("default"))
            mIsTransportSMD = true;
        else
@@ -2896,7 +2896,7 @@ public class FMStats extends Activity  {
     private boolean isCherokeeChip() {
         Log.d(LOGTAG, "isCherokeeChip");
 
-        String chip = SystemProperties.get("vendor.bluetooth.soc");
+        String chip = SystemProperties.get("vendor.qcom.bluetooth.soc");
         if (chip.equals("cherokee"))
             return true;
         else
@@ -2906,7 +2906,7 @@ public class FMStats extends Activity  {
     private boolean isRomeChip() {
         String chip = "";
 
-        chip = SystemProperties.get("vendor.bluetooth.soc");
+        chip = SystemProperties.get("vendor.qcom.bluetooth.soc");
         if(chip.equals("rome"))
            return true;
         return false;
diff --git a/jni/android_hardware_fm.cpp b/jni/android_hardware_fm.cpp
index f10c685..5d93703 100644
--- a/jni/android_hardware_fm.cpp
+++ b/jni/android_hardware_fm.cpp
@@ -681,7 +681,7 @@ static jint android_hardware_fmradio_FmReceiverJNI_acquireFdNative
        return FM_JNI_FAILURE;
     }
 
-    property_get("vendor.bluetooth.soc", value, NULL);
+    property_get("vendor.qcom.bluetooth.soc", value, NULL);
 
     ALOGD("BT soc is %s\n", value);
 
@@ -725,7 +725,7 @@ static jint android_hardware_fmradio_FmReceiverJNI_closeFdNative
 {
     char value[PROPERTY_VALUE_MAX] = {'\0'};
 
-    property_get("vendor.bluetooth.soc", value, NULL);
+    property_get("vendor.qcom.bluetooth.soc", value, NULL);
 
     ALOGD("BT soc is %s\n", value);
 
@@ -740,7 +740,7 @@ static jint android_hardware_fmradio_FmReceiverJNI_closeFdNative
 static bool is_soc_cherokee() {
 
     char value[PROPERTY_VALUE_MAX] = {'\0'};
-    property_get("vendor.bluetooth.soc", value, NULL);
+    property_get("vendor.qcom.bluetooth.soc", value, NULL);
     ALOGD("BT soc is %s\n", value);
 
     if(strcmp(value, "cherokee") == 0)
@@ -1211,7 +1211,7 @@ static jint android_hardware_fmradio_FmReceiverJNI_setNotchFilterNative
     int band;
     int err = 0;
 
-    property_get("vendor.bluetooth.soc", value, NULL);
+    property_get("vendor.qcom.bluetooth.soc", value, NULL);
 
     ALOGD("BT soc is %s\n", value);
 
@@ -1275,7 +1275,7 @@ static jint android_hardware_fmradio_FmReceiverJNI_setAnalogModeNative
     int i=0;
     char value[PROPERTY_VALUE_MAX] = {'\0'};
 
-    property_get("vendor.bluetooth.soc", value, NULL);
+    property_get("vendor.qcom.bluetooth.soc", value, NULL);
 
     ALOGD("BT soc is %s\n", value);
 
diff --git a/qcom/fmradio/FmReceiver.java b/qcom/fmradio/FmReceiver.java
index 78ee8c7..5c0d8cc 100644
--- a/qcom/fmradio/FmReceiver.java
+++ b/qcom/fmradio/FmReceiver.java
@@ -344,7 +344,7 @@ public class FmReceiver extends FmTransceiver
    private static final int SEARCH_SINR_INT = 1;
 
    public boolean isSmdTransportLayer() {
-       String chip = SystemProperties.get("vendor.bluetooth.soc","default");
+       String chip = SystemProperties.get("vendor.qcom.bluetooth.soc","default");
        if (chip.equals("default"))
            return true;
        else
@@ -352,7 +352,7 @@ public class FmReceiver extends FmTransceiver
    }
 
    public static boolean isRomeChip() {
-       String chip = SystemProperties.get("vendor.bluetooth.soc");
+       String chip = SystemProperties.get("vendor.qcom.bluetooth.soc");
        if (chip.equals("rome"))
            return true;
        else
@@ -360,7 +360,7 @@ public class FmReceiver extends FmTransceiver
    }
 
    public static boolean isCherokeeChip() {
-       String chip = SystemProperties.get("vendor.bluetooth.soc");
+       String chip = SystemProperties.get("vendor.qcom.bluetooth.soc");
        if (chip.equals("cherokee"))
            return true;
        else
-- 
2.17.1

