From 2eff2e47355bc2c7d4beff02fe6ca6ef991ad3de Mon Sep 17 00:00:00 2001
From: Michael Bestas <mkbestas@lineageos.org>
Date: Sat, 29 Dec 2018 23:34:17 +0200
Subject: [PATCH 26/30] soong_config: Add flag for msm8974 1440p EGL workaround

Change-Id: Iad2df3dad223604f1e2c454432b9c9239db8d035
---
 build/soong/android/variable.go | 4 ++++
 build/soong/soong_config.mk     | 1 +
 2 files changed, 5 insertions(+)

diff --git a/build/soong/android/variable.go b/build/soong/android/variable.go
index 0a32e6aa..c8b67979 100644
--- a/build/soong/android/variable.go
+++ b/build/soong/android/variable.go
@@ -6,6 +6,9 @@ type Product_variables struct {
 	Has_legacy_camera_hal1 struct {
 		Cflags []string
 	}
+	Msm8974_1440p_egl_workaround struct {
+		Cflags []string
+	}
 	Should_skip_waiting_for_qsee struct {
 		Cflags []string
 	}
@@ -49,6 +52,7 @@ type ProductVariables struct {
 	Has_legacy_camera_hal1  *bool `json:",omitempty"`
 	Hwc2_no_skipvalidate  *bool `json:",omitempty"`
 	Java_Source_Overlays *string `json:",omitempty"`
+	Msm8974_1440p_egl_workaround  *bool `json:",omitempty"`
 	Should_skip_waiting_for_qsee  *bool `json:",omitempty"`
 	Specific_camera_parameter_library  *string `json:",omitempty"`
 	Supports_hw_fde  *bool `json:",omitempty"`
diff --git a/build/soong/soong_config.mk b/build/soong/soong_config.mk
index 17091ea0..a7a94ef4 100644
--- a/build/soong/soong_config.mk
+++ b/build/soong/soong_config.mk
@@ -7,6 +7,7 @@ $(call add_json_str_omitempty, Additional_gralloc_10_usage_bits, $(TARGET_ADDITI
 $(call add_json_bool, Has_legacy_camera_hal1, $(filter true,$(TARGET_HAS_LEGACY_CAMERA_HAL1)))
 $(call add_json_bool, Hwc2_no_skipvalidate, $(filter true,$(TARGET_HWC2_NO_SKIPVALIDATE)))
 $(call add_json_str, Java_Source_Overlays, $(JAVA_SOURCE_OVERLAYS))
+$(call add_json_bool, Msm8974_1440p_egl_workaround, $(filter true,$(TARGET_MSM8974_1440P_EGL_WORKAROUND)))
 $(call add_json_bool, Should_skip_waiting_for_qsee, $(filter true,$(TARGET_KEYMASTER_SKIP_WAITING_FOR_QSEE)))
 $(call add_json_str, Specific_camera_parameter_library, $(TARGET_SPECIFIC_CAMERA_PARAMETER_LIBRARY))
 $(call add_json_bool, Supports_hw_fde, $(filter true,$(TARGET_HW_DISK_ENCRYPTION)))
-- 
2.17.1

