From e8ec3fb0a9014bec5d69b3249268dd7aec7d16e3 Mon Sep 17 00:00:00 2001
From: zhuw <zhuw@codeaurora.org>
Date: Tue, 12 Dec 2017 16:56:10 +0800
Subject: [PATCH 22/67] SnapdragonGallery: Fix crash show dialog when activity
 finished

don't show progressDialog when activity is finished

Change-Id: I846430949229f2c3992514a24876fe02ba58a924
---
 .../gallery3d/filtershow/filters/TrueScannerActs.java      | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/src/com/android/gallery3d/filtershow/filters/TrueScannerActs.java b/src/com/android/gallery3d/filtershow/filters/TrueScannerActs.java
index ccce699f5..626050276 100755
--- a/src/com/android/gallery3d/filtershow/filters/TrueScannerActs.java
+++ b/src/com/android/gallery3d/filtershow/filters/TrueScannerActs.java
@@ -112,8 +112,11 @@ public class TrueScannerActs extends SimpleImageFilter {
         if (null != sActivity) {
             sActivity.runOnUiThread(new Runnable() {
                 public void run() {
-                    mProgressDialog = ProgressDialog.show(sActivity, "", "Processing...", true, false);
-                    mProgressDialog.show();
+                    if (!sActivity.isFinishing()) {
+                        mProgressDialog = ProgressDialog.show(sActivity,
+                                "", "Processing...", true, false);
+                        mProgressDialog.show();
+                    }
                 }
             });
         }
-- 
2.17.1

