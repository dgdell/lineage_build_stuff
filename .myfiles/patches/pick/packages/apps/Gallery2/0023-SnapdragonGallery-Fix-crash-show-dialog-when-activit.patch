From f150fa1fb645b175357738cb680893ab18239f75 Mon Sep 17 00:00:00 2001
From: zhuw <zhuw@codeaurora.org>
Date: Tue, 12 Dec 2017 16:56:10 +0800
Subject: [PATCH 23/68] SnapdragonGallery: Fix crash show dialog when activity
 finished

don't show progressDialog when activity is finished

Change-Id: I846430949229f2c3992514a24876fe02ba58a924
---
 .../gallery3d/filtershow/filters/TrueScannerActs.java       | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/com/android/gallery3d/filtershow/filters/TrueScannerActs.java b/src/com/android/gallery3d/filtershow/filters/TrueScannerActs.java
index ccce699f5..1a8f6ff5f 100755
--- a/src/com/android/gallery3d/filtershow/filters/TrueScannerActs.java
+++ b/src/com/android/gallery3d/filtershow/filters/TrueScannerActs.java
@@ -112,8 +112,10 @@ public class TrueScannerActs extends SimpleImageFilter {
         if (null != sActivity) {
             sActivity.runOnUiThread(new Runnable() {
                 public void run() {
-                    mProgressDialog = ProgressDialog.show(sActivity, "", "Processing...", true, false);
-                    mProgressDialog.show();
+                    if (!sActivity.isFinishing()) {
+                        mProgressDialog = ProgressDialog.show(sActivity, "", "Processing...", true, false);
+                        mProgressDialog.show();
+                    }
                 }
             });
         }
-- 
2.17.1

