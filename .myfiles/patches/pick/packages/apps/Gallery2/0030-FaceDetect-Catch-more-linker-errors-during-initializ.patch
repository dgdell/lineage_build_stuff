From c6f31d4f56a662dbbd1acaf6190bc1a4733db20a Mon Sep 17 00:00:00 2001
From: Anas Karbila <anaskarbila@gmail.com>
Date: Wed, 17 May 2017 00:24:01 +0900
Subject: [PATCH 30/67] FaceDetect: Catch more linker errors during
 initialization

* Continues: https://github.com/AOSPA/android_packages_apps_SnapdragonGallery/commit/0b8309885e6b1a5c46799fda826915d34b23e641

Change-Id: I24d6afe0d3ba625aa8f6d42d9755a4553bad693d
Signed-off-by: Alex Naidis <alex.naidis@linux.com>
---
 .../thundersoft/hz/selfportrait/detect/FaceDetect.java    | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/src/com/thundersoft/hz/selfportrait/detect/FaceDetect.java b/src/com/thundersoft/hz/selfportrait/detect/FaceDetect.java
index c39c4ee70..a37ca09bb 100644
--- a/src/com/thundersoft/hz/selfportrait/detect/FaceDetect.java
+++ b/src/com/thundersoft/hz/selfportrait/detect/FaceDetect.java
@@ -77,7 +77,13 @@ public class FaceDetect {
             return null;
         }
 
-        int count = native_detect(mHandle, bmp);
+        int count = 0;
+        try {
+            count = native_detect(mHandle, bmp);
+        } catch (UnsatisfiedLinkError e) {
+            e.printStackTrace();
+            Log.e(TAG, "could not link native handle for ts_detected_face_jni library!");
+        }
         if (count < 1) {
             return null;
         }
-- 
2.17.1

