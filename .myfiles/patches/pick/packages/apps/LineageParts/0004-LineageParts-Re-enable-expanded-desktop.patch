From 5c12179260130dc0639b7560ed17a71a63fc6aad Mon Sep 17 00:00:00 2001
From: Danny Baumann <dannybaumann@web.de>
Date: Mon, 24 Sep 2018 12:14:07 +0200
Subject: [PATCH 4/6] LineageParts: Re-enable expanded desktop.

Change-Id: I4f3315b6987b9400d1975df95eb67110f9a86065
---
 .../applications/ExpandedDesktopPrefs.java            |  2 --
 .../applications/ExpandedDesktopSettings.java         | 11 +++--------
 2 files changed, 3 insertions(+), 10 deletions(-)

diff --git a/src/org/lineageos/lineageparts/applications/ExpandedDesktopPrefs.java b/src/org/lineageos/lineageparts/applications/ExpandedDesktopPrefs.java
index d5a470e..f48c555 100644
--- a/src/org/lineageos/lineageparts/applications/ExpandedDesktopPrefs.java
+++ b/src/org/lineageos/lineageparts/applications/ExpandedDesktopPrefs.java
@@ -25,7 +25,6 @@ import android.support.v7.preference.Preference;
 import android.support.v7.preference.PreferenceCategory;
 import android.support.v7.preference.PreferenceScreen;
 import android.view.WindowManagerGlobal;
-/*
 import android.view.WindowManagerPolicyControl;
 
 import org.lineageos.lineageparts.R;
@@ -133,4 +132,3 @@ public class ExpandedDesktopPrefs extends SettingsPreferenceFragment
         updateExpandedDesktopStyle();
     }
 }
-*/
diff --git a/src/org/lineageos/lineageparts/applications/ExpandedDesktopSettings.java b/src/org/lineageos/lineageparts/applications/ExpandedDesktopSettings.java
index ca3dcae..25ca2b5 100644
--- a/src/org/lineageos/lineageparts/applications/ExpandedDesktopSettings.java
+++ b/src/org/lineageos/lineageparts/applications/ExpandedDesktopSettings.java
@@ -33,7 +33,6 @@ import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
 import android.view.WindowManagerGlobal;
-/*
 import android.view.WindowManagerPolicyControl;
 import android.widget.AdapterView;
 import android.widget.BaseAdapter;
@@ -100,8 +99,7 @@ public class ExpandedDesktopSettings extends SettingsPreferenceFragment
 
         mIsGloballyExpanded = isGloballyExpanded(getActivity().getContentResolver());
         if (!mIsGloballyExpanded) {
-            WindowManagerPolicyControl.reloadFromSetting(getActivity(),
-                    Settings.Global.POLICY_CONTROL);
+            WindowManagerPolicyControl.reloadFromSetting(getActivity());
         }
         mAllPackagesAdapter = new AllPackagesAdapter(getActivity());
     }
@@ -319,8 +317,7 @@ public class ExpandedDesktopSettings extends SettingsPreferenceFragment
 
     private void save() {
         if (!mIsGloballyExpanded) {
-            WindowManagerPolicyControl.saveToSettings(getActivity(),
-                    Settings.Global.POLICY_CONTROL);
+            WindowManagerPolicyControl.saveToSettings(getActivity());
         }
     }
 
@@ -453,7 +450,6 @@ public class ExpandedDesktopSettings extends SettingsPreferenceFragment
             }
 
             final int index = Arrays.binarySearch(mPositions, position);
-*/
 
             /*
              * Consider this example: section positions are 0, 3, 5; the supplied
@@ -463,7 +459,6 @@ public class ExpandedDesktopSettings extends SettingsPreferenceFragment
              * To get from that number to the expected value of 1 we need to negate
              * and subtract 2.
              */
-/*
             return index >= 0 ? index : -index - 2;
         }
 
@@ -591,4 +586,4 @@ public class ExpandedDesktopSettings extends SettingsPreferenceFragment
         }
     }
 }
-*/
+
-- 
2.17.1

