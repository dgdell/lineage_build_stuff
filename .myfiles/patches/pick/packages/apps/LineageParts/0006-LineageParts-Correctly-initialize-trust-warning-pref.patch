From ff16e65931cdea85f35f9bf64cb7ef117fca7ea0 Mon Sep 17 00:00:00 2001
From: Danny Baumann <dannybaumann@web.de>
Date: Mon, 10 Dec 2018 15:28:12 +0100
Subject: [PATCH 6/7] LineageParts: Correctly initialize trust warning prefs.

Change-Id: I3cc221dbda9091098300ec228b4fa1720231db26
---
 src/org/lineageos/lineageparts/trust/TrustPreferences.java | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/org/lineageos/lineageparts/trust/TrustPreferences.java b/src/org/lineageos/lineageparts/trust/TrustPreferences.java
index 25e73e9..6ea800a 100644
--- a/src/org/lineageos/lineageparts/trust/TrustPreferences.java
+++ b/src/org/lineageos/lineageparts/trust/TrustPreferences.java
@@ -101,6 +101,11 @@ public class TrustPreferences extends SettingsPreferenceFragment {
         setupSecurityPatches(secPLevel, secVLevel);
         setupEncryption(encryptLevel);
 
+        int currentFeatures = LineageSettings.Secure.getInt(getContext().getContentResolver(),
+                LineageSettings.Secure.TRUST_WARNINGS, TrustInterface.TRUST_WARN_MAX_VALUE);
+        mWarnSELinuxPref.setChecked((currentFeatures & TrustInterface.TRUST_WARN_SELINUX) != 0);
+        mWarnKeysPref.setChecked((currentFeatures & TrustInterface.TRUST_WARN_PUBLIC_KEY) != 0);
+
         if (!isTelephony()) {
             mToolsCategory.removePreference(mSmsLimitPref);
         }
@@ -231,4 +236,4 @@ public class TrustPreferences extends SettingsPreferenceFragment {
         PackageManager pm = getContext().getPackageManager();
         return pm.hasSystemFeature(PackageManager.FEATURE_TELEPHONY);
     }
-}
\ No newline at end of file
+}
-- 
2.17.1

