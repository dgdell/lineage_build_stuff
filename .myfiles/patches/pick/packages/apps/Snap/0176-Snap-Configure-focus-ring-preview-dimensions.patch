From d4afff2d70f00b69eb836c002db279dd779e1584 Mon Sep 17 00:00:00 2001
From: Ethan Chen <intervigil@gmail.com>
Date: Fri, 16 Mar 2018 23:57:14 -0700
Subject: [PATCH 176/194] Snap: Configure focus ring preview dimensions

Change-Id: I49d7f28fb2f731e18c73b9d944882f9f8a4fb5c2
---
 src/com/android/camera/FocusOverlayManager.java | 1 +
 src/com/android/camera/PhotoModule.java         | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/com/android/camera/FocusOverlayManager.java b/src/com/android/camera/FocusOverlayManager.java
index 2d22275bf..287890cbd 100644
--- a/src/com/android/camera/FocusOverlayManager.java
+++ b/src/com/android/camera/FocusOverlayManager.java
@@ -180,6 +180,7 @@ public class FocusOverlayManager {
     public void setPreviewRect(Rect previewRect) {
         if (!mPreviewRect.equals(previewRect)) {
             mPreviewRect.set(previewRect);
+            mFocusRing.configurePreviewDimensions(CameraUtil.rectToRectF(mPreviewRect));
             resetCoordinateTransformer();
             mInitialized = true;
         }
diff --git a/src/com/android/camera/PhotoModule.java b/src/com/android/camera/PhotoModule.java
index cc3106aff..f48b1d07a 100644
--- a/src/com/android/camera/PhotoModule.java
+++ b/src/com/android/camera/PhotoModule.java
@@ -2829,7 +2829,7 @@ public class PhotoModule
                 if (mFocusManager == null) {
                     mFocusManager = new FocusOverlayManager(mPreferences, defaultFocusModes,
                             mInitialParams, this, mMirror,
-                            mActivity.getMainLooper(), mUI != null ? mUI.getFocusRing() : null, mActivity);
+                            mActivity.getMainLooper(), mUI.getFocusRing(), mActivity);
                 }
             }
         }
-- 
2.17.1

