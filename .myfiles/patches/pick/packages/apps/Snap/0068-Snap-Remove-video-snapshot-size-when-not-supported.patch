From b245531c8a9ee0b8aac6fe98b35d7b89e135d4dc Mon Sep 17 00:00:00 2001
From: Michael Bestas <mikeioannina@cyanogenmod.org>
Date: Mon, 15 Feb 2016 18:41:51 +0200
Subject: [PATCH 068/194] Snap: Remove video snapshot size when not supported

Change-Id: I3f4dd8b76044389ee4d0d257e47b4ac90262ccc1
---
 src/com/android/camera/CameraSettings.java | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

diff --git a/src/com/android/camera/CameraSettings.java b/src/com/android/camera/CameraSettings.java
index 163eaffd0..ef3515335 100755
--- a/src/com/android/camera/CameraSettings.java
+++ b/src/com/android/camera/CameraSettings.java
@@ -1001,9 +1001,14 @@ public class CameraSettings {
                     autoExposure, ParametersWrapper.getSupportedAutoexposure(mParameters));
         }
 
-        if(videoSnapSize != null) {
-            filterUnsupportedOptions(group, videoSnapSize, getSupportedVideoSnapSizes(mParameters));
-            filterSimilarPictureSize(group, videoSnapSize);
+        if (videoSnapSize != null) {
+            if (CameraUtil.isVideoSnapshotSupported(mParameters)) {
+                filterUnsupportedOptions(group, videoSnapSize,
+                        getSupportedVideoSnapSizes(mParameters));
+                filterSimilarPictureSize(group, videoSnapSize);
+            } else {
+                removePreference(group, videoSnapSize.getKey());
+            }
         }
 
         if (histogram!= null) {
-- 
2.17.1

