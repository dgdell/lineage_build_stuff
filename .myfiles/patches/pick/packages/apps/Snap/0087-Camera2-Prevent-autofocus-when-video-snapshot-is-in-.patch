From 8453182932b248ea7823a1313ee9083c7f7093dc Mon Sep 17 00:00:00 2001
From: Dheeraj CVR <cvr.dheeraj@gmail.com>
Date: Sat, 19 Apr 2014 02:33:46 +0530
Subject: [PATCH 087/194] Camera2: Prevent autofocus when video snapshot is in
 progress

During video recording if screen is tapped repeatedly, autofocus is
started while the snapshot is taken. This would either result in an
out of focus snapshot which would also disturb the focus in the recorded
video or crash the sensors that can't handle autofocus during snapshot.

Change-Id: If2763094f5ab7536e4409469276de54580e803c8
---
 src/com/android/camera/VideoModule.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/com/android/camera/VideoModule.java b/src/com/android/camera/VideoModule.java
index 073e3b927..6ad5c7501 100644
--- a/src/com/android/camera/VideoModule.java
+++ b/src/com/android/camera/VideoModule.java
@@ -641,7 +641,7 @@ public class VideoModule implements CameraModule,
             }
 
             // Check if metering area or focus area is supported.
-            if (mFocusAreaSupported || mMeteringAreaSupported) {
+            if ((mFocusAreaSupported || mMeteringAreaSupported) && !mSnapshotInProgress) {
                 mFocusManager.onSingleTapUp(x, y);
             }
         }
-- 
2.17.1

