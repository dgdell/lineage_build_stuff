From c1052b1f6d5e5e29d683a69b8f0bdb62c1b71731 Mon Sep 17 00:00:00 2001
From: Michael Bestas <mikeioannina@cyanogenmod.org>
Date: Mon, 15 Feb 2016 18:41:51 +0200
Subject: [PATCH 062/173] Snap: Remove video snapshot size when not supported

Change-Id: I3f4dd8b76044389ee4d0d257e47b4ac90262ccc1
---
 src/com/android/camera/CameraSettings.java | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

diff --git a/src/com/android/camera/CameraSettings.java b/src/com/android/camera/CameraSettings.java
index 585dc0a86..6b6a2f9ca 100755
--- a/src/com/android/camera/CameraSettings.java
+++ b/src/com/android/camera/CameraSettings.java
@@ -999,9 +999,14 @@ public class CameraSettings {
                     autoExposure, ParametersWrapper.getSupportedAutoexposure(mParameters));
         }
 
-        if(videoSnapSize != null) {
-            filterUnsupportedOptions(group, videoSnapSize, getSupportedVideoSnapSizes(mParameters));
-            filterSimilarPictureSize(group, videoSnapSize);
+        if (videoSnapSize != null) {
+            if (CameraUtil.isVideoSnapshotSupported(mParameters)) {
+                filterUnsupportedOptions(group, videoSnapSize,
+                        getSupportedVideoSnapSizes(mParameters));
+                filterSimilarPictureSize(group, videoSnapSize);
+            } else {
+                removePreference(group, videoSnapSize.getKey());
+            }
         }
 
         if (histogram!= null) {
-- 
2.17.1

