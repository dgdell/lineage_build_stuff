From f9f97301278328f107ab96094a2497dbb0dbfb88 Mon Sep 17 00:00:00 2001
From: Steve Kondik <steve@cyngn.com>
Date: Tue, 4 Oct 2016 09:08:21 -0700
Subject: [PATCH 009/206] snap: Fix module name conflict

 * Change jni_imageutil to jni_snapimageutil

Change-Id: I61eef66a439d1f7f3ef252a9e505789af80a2ace
---
 Android.mk                                               | 4 ++--
 jni/Android.mk                                           | 2 +-
 src/com/android/camera/imageprocessor/PostProcessor.java | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/Android.mk b/Android.mk
index 417dbf032..7cf649e90 100644
--- a/Android.mk
+++ b/Android.mk
@@ -40,9 +40,9 @@ LOCAL_PROGUARD_FLAG_FILES := proguard.flags
 # the libraries in the APK, otherwise just put them in /system/lib and
 # leave them out of the APK
 ifneq (,$(TARGET_BUILD_APPS))
-  LOCAL_JNI_SHARED_LIBRARIES := libjni_snapmosaic libjni_snaptinyplanet libjni_imageutil
+  LOCAL_JNI_SHARED_LIBRARIES := libjni_snapmosaic libjni_snaptinyplanet libjni_snapimageutil
 else
-  LOCAL_REQUIRED_MODULES := libjni_snapmosaic libjni_snaptinyplanet libjni_imageutil
+  LOCAL_REQUIRED_MODULES := libjni_snapmosaic libjni_snaptinyplanet libjni_snapimageutil
 endif
 
 include $(BUILD_PACKAGE)
diff --git a/jni/Android.mk b/jni/Android.mk
index 41e284f53..2aa572aab 100644
--- a/jni/Android.mk
+++ b/jni/Android.mk
@@ -67,7 +67,7 @@ include $(BUILD_SHARED_LIBRARY)
 include $(CLEAR_VARS)
 LOCAL_LDFLAGS   := -llog
 LOCAL_SDK_VERSION := 9
-LOCAL_MODULE    := libjni_imageutil
+LOCAL_MODULE    := libjni_snapimageutil
 LOCAL_MODULE_TAGS := optional
 LOCAL_SRC_FILES := image_util_jni.cpp
 LOCAL_CFLAGS    += -ffast-math -O3 -funroll-loops -Wno-unused-parameter
diff --git a/src/com/android/camera/imageprocessor/PostProcessor.java b/src/com/android/camera/imageprocessor/PostProcessor.java
index a8ed2dc8d..cee92c762 100755
--- a/src/com/android/camera/imageprocessor/PostProcessor.java
+++ b/src/com/android/camera/imageprocessor/PostProcessor.java
@@ -1214,6 +1214,6 @@ public class PostProcessor{
     private native int nativeResizeImage(byte[] oldBuf, byte[] newBuf, int oldWidth, int oldHeight, int oldStride, int newWidth, int newHeight);
     private native int nativeFlipNV21(byte[] buf, int stride, int height, int gap, boolean isVertical);
     static {
-        System.loadLibrary("jni_imageutil");
+        System.loadLibrary("jni_snapimageutil");
     }
 }
-- 
2.17.1

