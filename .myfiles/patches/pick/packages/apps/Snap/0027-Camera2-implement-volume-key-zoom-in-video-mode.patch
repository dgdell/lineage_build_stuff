From 0cc14f72bd4e7381a88ad3e7166d9bf3eaec3991 Mon Sep 17 00:00:00 2001
From: jt1134 <jt1134@gmail.com>
Date: Sat, 4 Jan 2014 20:52:27 -0600
Subject: [PATCH 027/194] Camera2: implement volume key zoom in video mode

Change-Id: I140e8cfb3e39700f60e40c35b38e92c83a3c26de
---
 src/com/android/camera/VideoModule.java |  9 +++++++++
 src/com/android/camera/VideoUI.java     | 14 ++++++++++++++
 2 files changed, 23 insertions(+)

diff --git a/src/com/android/camera/VideoModule.java b/src/com/android/camera/VideoModule.java
index 3d190e520..44bf51351 100644
--- a/src/com/android/camera/VideoModule.java
+++ b/src/com/android/camera/VideoModule.java
@@ -1380,6 +1380,12 @@ public class VideoModule implements CameraModule,
         }
 
         switch (keyCode) {
+            case KeyEvent.KEYCODE_VOLUME_UP:
+                mUI.onScaleStepResize(true);
+                return true;
+            case KeyEvent.KEYCODE_VOLUME_DOWN:
+                mUI.onScaleStepResize(false);
+                return true;
             case KeyEvent.KEYCODE_CAMERA:
                 if (event.getRepeatCount() == 0) {
                     mUI.clickShutter();
@@ -1402,6 +1408,9 @@ public class VideoModule implements CameraModule,
     @Override
     public boolean onKeyUp(int keyCode, KeyEvent event) {
         switch (keyCode) {
+            case KeyEvent.KEYCODE_VOLUME_UP:
+            case KeyEvent.KEYCODE_VOLUME_DOWN:
+                return true;
             case KeyEvent.KEYCODE_CAMERA:
                 mUI.pressShutter(false);
                 return true;
diff --git a/src/com/android/camera/VideoUI.java b/src/com/android/camera/VideoUI.java
index ce51d2a16..f7ce04ca0 100755
--- a/src/com/android/camera/VideoUI.java
+++ b/src/com/android/camera/VideoUI.java
@@ -22,6 +22,7 @@ import org.codeaurora.snapcam.R;
 
 import android.content.res.Configuration;
 import android.graphics.Bitmap;
+import android.graphics.Canvas;
 import android.graphics.Color;
 import android.graphics.Point;
 import android.graphics.drawable.ColorDrawable;
@@ -1103,6 +1104,19 @@ public class VideoUI implements PieRenderer.PieListener,
         return mCameraControls.getVisibility() == View.VISIBLE;
     }
 
+    public boolean onScaleStepResize(boolean direction) {
+        if (mGestures != null) {
+            return mGestures.onScaleStepResize(direction);
+        }
+        return false;
+    }
+
+    public void onScaleChangeDraw(Canvas canvas) {
+        if (mGestures != null) {
+            mGestures.onScaleChangeDraw(canvas);
+        }
+    }
+
     @Override
     public void onDisplayChanged() {
         mCameraControls.checkLayoutFlip();
-- 
2.17.1

