From 1269785a0938df224bbfa0663ed82880675dc4ca Mon Sep 17 00:00:00 2001
From: Ethan Chen <intervigil@gmail.com>
Date: Fri, 16 Mar 2018 23:57:14 -0700
Subject: [PATCH 198/206] Snap: Configure focus ring preview dimensions

Change-Id: I49d7f28fb2f731e18c73b9d944882f9f8a4fb5c2
---
 src/com/android/camera/FocusOverlayManager.java | 1 +
 src/com/android/camera/PhotoModule.java         | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/com/android/camera/FocusOverlayManager.java b/src/com/android/camera/FocusOverlayManager.java
index 6c6769e5e..37c5d0915 100755
--- a/src/com/android/camera/FocusOverlayManager.java
+++ b/src/com/android/camera/FocusOverlayManager.java
@@ -186,6 +186,7 @@ public class FocusOverlayManager {
     public void setPreviewRect(Rect previewRect) {
         if (!mPreviewRect.equals(previewRect)) {
             mPreviewRect.set(previewRect);
+            mFocusRing.configurePreviewDimensions(CameraUtil.rectToRectF(mPreviewRect));
             resetCoordinateTransformer();
             mInitialized = true;
         }
diff --git a/src/com/android/camera/PhotoModule.java b/src/com/android/camera/PhotoModule.java
index dca382061..e43e8569c 100644
--- a/src/com/android/camera/PhotoModule.java
+++ b/src/com/android/camera/PhotoModule.java
@@ -2978,7 +2978,7 @@ public class PhotoModule
                 if (mFocusManager == null) {
                     mFocusManager = new FocusOverlayManager(mPreferences, defaultFocusModes,
                             mInitialParams, this, mMirror,
-                            mActivity.getMainLooper(), mUI != null ? mUI.getFocusRing() : null, mActivity);
+                            mActivity.getMainLooper(), mUI.getFocusRing(), mActivity);
                 }
             }
         }
-- 
2.17.1

