From 247a4cdc2fa383adc1dc67af40eb757798040d1c Mon Sep 17 00:00:00 2001
From: Sultanxda <sultanxda@gmail.com>
Date: Sat, 12 Dec 2015 21:59:51 -0800
Subject: [PATCH 056/172] SnapdragonCamera: Set camera parameters before
 restarting preview

Ensure that all of the updated camera parameters are propagated to the camera
HAL prior to restarting the preview. This fixes the split-exposure observed when
turning ZSL off and on without exiting the app.

Change-Id: I392549ae7cc75b150e01cf8b635d2e3f1ad6ffb9
Signed-off-by: Sultanxda <sultanxda@gmail.com>
---
 src/com/android/camera/PhotoModule.java | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/com/android/camera/PhotoModule.java b/src/com/android/camera/PhotoModule.java
index 7f95d9b88..78bb75ddf 100644
--- a/src/com/android/camera/PhotoModule.java
+++ b/src/com/android/camera/PhotoModule.java
@@ -4952,6 +4952,7 @@ public class PhotoModule
         mLocationManager.recordLocation(recordLocation);
         if(needRestart()){
             Log.v(TAG, "Restarting Preview... Camera Mode Changed");
+            setCameraParameters(UPDATE_PARAM_PREFERENCE);
             stopPreview();
             startPreview();
             setCameraState(IDLE);
-- 
2.17.1

