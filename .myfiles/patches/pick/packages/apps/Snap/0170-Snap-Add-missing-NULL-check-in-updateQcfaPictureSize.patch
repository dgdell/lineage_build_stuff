From 6773ddd29a243448967ac65d33a7a474df0b0581 Mon Sep 17 00:00:00 2001
From: Wang Han <416810799@qq.com>
Date: Thu, 15 Nov 2018 14:34:33 +0800
Subject: [PATCH 170/173] Snap: Add missing NULL check in
 updateQcfaPictureSize()

 * Fixes crash when enabling Qcfa

Change-Id: I506a1d7da0b91bc48484bd251e0c6c9042962421
---
 src/com/android/camera/SettingsManager.java | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/com/android/camera/SettingsManager.java b/src/com/android/camera/SettingsManager.java
index 7bf637dae..517046574 100755
--- a/src/com/android/camera/SettingsManager.java
+++ b/src/com/android/camera/SettingsManager.java
@@ -328,10 +328,12 @@ public class SettingsManager implements ListMenu.SettingsListener {
     }
 
     public void updateQcfaPictureSize() {
-            ListPreference pictureSize = mPreferenceGroup.findPreference(KEY_PICTURE_SIZE);
+        ListPreference pictureSize = mPreferenceGroup.findPreference(KEY_PICTURE_SIZE);
+        if (pictureSize != null) {
             CameraSettings.formatPictureSizes(pictureSize,
                     getSupportedPictureSizeList(getCurrentCameraId()), mContext);
             CameraSettings.resetIfInvalid(pictureSize);
+        }
     }
 
     public void init() {
-- 
2.17.1

