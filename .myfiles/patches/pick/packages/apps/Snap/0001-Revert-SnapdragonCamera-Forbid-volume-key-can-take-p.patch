From 48b89f0c5b44a6f49dff5b0aa5f6ac0f402985ab Mon Sep 17 00:00:00 2001
From: Michael Bestas <mikeioannina@gmail.com>
Date: Sat, 29 Aug 2015 13:15:02 +0300
Subject: [PATCH 001/206] Revert "SnapdragonCamera: Forbid volume key can take
 picture"

This reverts commit e73e717b8be1ba834161914af4debc61c1feb8be.

Change-Id: Iee719f34f6016f89ec0bb1c078bfa25c2f718436
---
 res/values/bool.xml                         | 1 -
 src/com/android/camera/CaptureModule.java   | 6 +-----
 src/com/android/camera/PhotoModule.java     | 6 +-----
 src/com/android/camera/util/CameraUtil.java | 4 ----
 4 files changed, 2 insertions(+), 15 deletions(-)

diff --git a/res/values/bool.xml b/res/values/bool.xml
index 2bb520bf6..4488d70bb 100644
--- a/res/values/bool.xml
+++ b/res/values/bool.xml
@@ -16,5 +16,4 @@
 <resources>
     <bool name="show_action_bar_title">false</bool>
     <bool name="force_count_down_sound">false</bool>
-    <bool name="volume_key_shutter_disable">false</bool>
 </resources>
diff --git a/src/com/android/camera/CaptureModule.java b/src/com/android/camera/CaptureModule.java
index ce07379c0..2135bc020 100755
--- a/src/com/android/camera/CaptureModule.java
+++ b/src/com/android/camera/CaptureModule.java
@@ -2886,9 +2886,6 @@ public class CaptureModule implements CameraModule, PhotoController,
         switch (keyCode) {
             case KeyEvent.KEYCODE_VOLUME_UP:
             case KeyEvent.KEYCODE_VOLUME_DOWN:
-                if (CameraUtil.volumeKeyShutterDisable(mActivity)) {
-                    return false;
-                }
             case KeyEvent.KEYCODE_FOCUS:
                 if (mFirstTimeInitialized) {
                     if (event.getRepeatCount() == 0) {
@@ -2921,8 +2918,7 @@ public class CaptureModule implements CameraModule, PhotoController,
         switch (keyCode) {
             case KeyEvent.KEYCODE_VOLUME_UP:
             case KeyEvent.KEYCODE_VOLUME_DOWN:
-                if (mFirstTimeInitialized
-                        && !CameraUtil.volumeKeyShutterDisable(mActivity)) {
+                if (mFirstTimeInitialized) {
                     onShutterButtonClick();
                     return true;
                 }
diff --git a/src/com/android/camera/PhotoModule.java b/src/com/android/camera/PhotoModule.java
index 24f1de67a..159d56b72 100755
--- a/src/com/android/camera/PhotoModule.java
+++ b/src/com/android/camera/PhotoModule.java
@@ -2974,9 +2974,6 @@ public class PhotoModule
         switch (keyCode) {
             case KeyEvent.KEYCODE_VOLUME_UP:
             case KeyEvent.KEYCODE_VOLUME_DOWN:
-                if (CameraUtil.volumeKeyShutterDisable(mActivity)) {
-                   return false;
-                }
             case KeyEvent.KEYCODE_FOCUS:
                 if (/*TODO: mActivity.isInCameraApp() &&*/ mFirstTimeInitialized) {
                     if (event.getRepeatCount() == 0) {
@@ -3052,8 +3049,7 @@ public class PhotoModule
         switch (keyCode) {
             case KeyEvent.KEYCODE_VOLUME_UP:
             case KeyEvent.KEYCODE_VOLUME_DOWN:
-                if (/*mActivity.isInCameraApp() && */ mFirstTimeInitialized
-                        && !CameraUtil.volumeKeyShutterDisable(mActivity)) {
+                if (/*mActivity.isInCameraApp() && */ mFirstTimeInitialized) {
                     onShutterButtonClick();
                     return true;
                 }
diff --git a/src/com/android/camera/util/CameraUtil.java b/src/com/android/camera/util/CameraUtil.java
index 638874fc7..58bea6687 100755
--- a/src/com/android/camera/util/CameraUtil.java
+++ b/src/com/android/camera/util/CameraUtil.java
@@ -1185,10 +1185,6 @@ public class CameraUtil {
         return ret;
     }
 
-    public static boolean volumeKeyShutterDisable(Context context) {
-        return context.getResources().getBoolean(R.bool.volume_key_shutter_disable);
-    }
-
     public static int determineRatio(int width, int height) {
         if (height != 0) {
             return determineRatio(((float) width) / height);
-- 
2.17.1

