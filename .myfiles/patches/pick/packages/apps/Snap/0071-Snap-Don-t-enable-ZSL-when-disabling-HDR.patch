From 45135355a9bb87f38d31d7abf62751470c6c7334 Mon Sep 17 00:00:00 2001
From: Gabriele M <moto.falcon.git@gmail.com>
Date: Tue, 19 Jan 2016 16:45:25 +0100
Subject: [PATCH 071/206] Snap: Don't enable ZSL when disabling HDR

Instead, restore the default value. This prevents issues on devices
that don't support ZSL.

Change-Id: I9c456cd6503df29800e2bc7ccaa691cb3fb42681
---
 src/com/android/camera/PhotoModule.java | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/com/android/camera/PhotoModule.java b/src/com/android/camera/PhotoModule.java
index e99b95bb8..61f79d02f 100644
--- a/src/com/android/camera/PhotoModule.java
+++ b/src/com/android/camera/PhotoModule.java
@@ -4945,6 +4945,7 @@ public class PhotoModule
         //filter off unsupported settings
         final String settingOff = mActivity.getString(R.string.setting_off_value);
         final String settingOn = mActivity.getString(R.string.setting_on_value);
+        final String zsl = mActivity.getString(R.string.pref_camera_zsl_default);
         if (!CameraSettings.isZSLHDRSupported(mParameters)) {
             //HDR internally uses AE-bracketing. Disable both if not supported.
             if (notSame(pref, CameraSettings.KEY_CAMERA_HDR, settingOff) ||
@@ -4955,7 +4956,7 @@ public class PhotoModule
                 mUI.setPreference(CameraSettings.KEY_AE_BRACKET_HDR, settingOff);
             } else if (notSame(pref, CameraSettings.KEY_CAMERA_HDR, settingOn) ||
                 notSame(pref, CameraSettings.KEY_AE_BRACKET_HDR, settingOn)) {
-                mUI.setPreference(CameraSettings.KEY_ZSL,settingOn);
+                mUI.setPreference(CameraSettings.KEY_ZSL, zsl);
             }
         }
 
-- 
2.17.1

