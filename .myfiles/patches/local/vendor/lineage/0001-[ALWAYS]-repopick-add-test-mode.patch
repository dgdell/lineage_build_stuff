From 5b5b71b4f53bb73332c3f65caf3e21dae3136f78 Mon Sep 17 00:00:00 2001
From: nx111 <NX111.AimH@gmail.com>
Date: Fri, 2 Nov 2018 19:16:04 +0800
Subject: [PATCH 01/25] repopick: add test mode.

Change-Id: I4d793d7853e571a40a2627cdef00d53e656f23cc
---
 build/tools/repopick.py | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/build/tools/repopick.py b/build/tools/repopick.py
index 7c6bf153..450b44e0 100755
--- a/build/tools/repopick.py
+++ b/build/tools/repopick.py
@@ -177,6 +177,7 @@ if __name__ == '__main__':
     parser.add_argument('-p', '--pull', action='store_true', help='execute pull instead of cherry-pick')
     parser.add_argument('-P', '--path', help='use the specified path for the change')
     parser.add_argument('-t', '--topic', help='pick all commits from a specified topic')
+    parser.add_argument('--test', action='store_true', help='just print all commits\' change number')
     parser.add_argument('-Q', '--query', help='pick all commits using the specified query')
     parser.add_argument('-g', '--gerrit', default=default_gerrit, help='Gerrit Instance to use. Form proto://[user@]host[:port]')
     parser.add_argument('-e', '--exclude', nargs=1, help='exclude a list of commit numbers separated by a ,')
@@ -343,6 +344,10 @@ if __name__ == '__main__':
                 args.quiet or print('ERROR: The patch set {0}/{1} could not be found, using CURRENT_REVISION instead.'.format(change, patchset))
 
     for item in mergables:
+        if args.test:
+            print('Can applying change number {0}'.format(item['change_number']))
+            continue
+
         args.quiet or print('Applying change number {0}...'.format(item['id']))
         # Check if change is open and exit if it's not, unless -f is specified
         if (item['status'] != 'OPEN' and item['status'] != 'NEW' and item['status'] != 'DRAFT') and not args.query:
-- 
2.17.1

