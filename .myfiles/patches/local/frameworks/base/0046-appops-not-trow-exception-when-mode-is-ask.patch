From 99c76fcb91abc0354bdf26483e616302749f02d3 Mon Sep 17 00:00:00 2001
From: nx111 <NX111.AimH@gmail.com>
Date: Wed, 19 Dec 2018 14:51:22 +0800
Subject: [PATCH 47/47] appops: not trow exception when mode is ask.

Change-Id: I8886741eddf2eaac44a107a0e665df2904895c8e
---
 core/java/android/provider/Settings.java | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/core/java/android/provider/Settings.java b/core/java/android/provider/Settings.java
index 161cf77ac60..5a38e7a7d76 100644
--- a/core/java/android/provider/Settings.java
+++ b/core/java/android/provider/Settings.java
@@ -13393,7 +13393,9 @@ public final class Settings {
                         return true;
                     }
                 }
-
+            case AppOpsManager.MODE_ASK:
+                if ( appOpsOpCode == AppOpsManager.OP_READ_EXTERNAL_STORAGE || appOpsOpCode == AppOpsManager.OP_WRITE_EXTERNAL_STORAGE)
+                     return false;
             default:
                 // this is for all other cases trickled down here...
                 if (!throwException) {
-- 
2.17.1

