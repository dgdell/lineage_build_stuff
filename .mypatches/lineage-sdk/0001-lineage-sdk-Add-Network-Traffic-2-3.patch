From 2b51bb7077a07c663740a1cf1baa51e286134bd5 Mon Sep 17 00:00:00 2001
From: Hashbang173 <hashbang173@gmail.com>
Date: Thu, 15 Dec 2016 19:59:48 -0500
Subject: [PATCH] lineage-sdk: Add Network Traffic [2/3]

Change-Id: Ia5aadc3f03a7b434a047accbd7d53f4aa44c77fb
---
 .../res/drawable/stat_sys_network_traffic_down.xml | 33 ++++++++++++++++++++++
 .../res/drawable/stat_sys_network_traffic_up.xml   | 33 ++++++++++++++++++++++
 .../drawable/stat_sys_network_traffic_updown.xml   | 33 ++++++++++++++++++++++
 lineage/res/res/values/dimens.xml                  | 21 ++++++++++++++
 lineage/res/res/values/strings.xml                 |  6 ++++
 lineage/res/res/values/symbols.xml                 | 11 ++++++++
 .../java/lineageos/providers/LineageSettings.java  | 24 ++++++++++++++++
 7 files changed, 161 insertions(+)
 create mode 100644 lineage/res/res/drawable/stat_sys_network_traffic_down.xml
 create mode 100644 lineage/res/res/drawable/stat_sys_network_traffic_up.xml
 create mode 100644 lineage/res/res/drawable/stat_sys_network_traffic_updown.xml
 create mode 100644 lineage/res/res/values/dimens.xml

diff --git a/lineage/res/res/drawable/stat_sys_network_traffic_down.xml b/lineage/res/res/drawable/stat_sys_network_traffic_down.xml
new file mode 100644
index 0000000..4e0efe6
--- /dev/null
+++ b/lineage/res/res/drawable/stat_sys_network_traffic_down.xml
@@ -0,0 +1,33 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+     Copyright (C) 2017 The LineageOS Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="14dp"
+    android:height="18dp"
+    android:viewportWidth="14"
+    android:viewportHeight="18">
+
+    <path
+        android:name="down"
+        android:fillColor="#FFFFFFFF"
+        android:pathData="M9,16l3-3h-2V8H8v5H6L9,16z" />
+
+    <path
+        android:name="up"
+        android:fillColor="#4DFFFFFF"
+        android:pathData="M5,2L2,5h2v5h2V5h2L5,2z" />
+
+</vector>
diff --git a/lineage/res/res/drawable/stat_sys_network_traffic_up.xml b/lineage/res/res/drawable/stat_sys_network_traffic_up.xml
new file mode 100644
index 0000000..12091f3
--- /dev/null
+++ b/lineage/res/res/drawable/stat_sys_network_traffic_up.xml
@@ -0,0 +1,33 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+     Copyright (C) 2017 The LineageOS Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="14dp"
+    android:height="18dp"
+    android:viewportWidth="14"
+    android:viewportHeight="18">
+
+    <path
+        android:name="down"
+        android:fillColor="#4DFFFFFF"
+        android:pathData="M9,16l3-3h-2V8H8v5H6L9,16z" />
+
+    <path
+        android:name="up"
+        android:fillColor="#FFFFFFFF"
+        android:pathData="M5,2L2,5h2v5h2V5h2L5,2z" />
+
+</vector>
diff --git a/lineage/res/res/drawable/stat_sys_network_traffic_updown.xml b/lineage/res/res/drawable/stat_sys_network_traffic_updown.xml
new file mode 100644
index 0000000..80336ab
--- /dev/null
+++ b/lineage/res/res/drawable/stat_sys_network_traffic_updown.xml
@@ -0,0 +1,33 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+     Copyright (C) 2017 The LineageOS Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="14dp"
+    android:height="18dp"
+    android:viewportWidth="14"
+    android:viewportHeight="18">
+
+    <path
+        android:name="down"
+        android:fillColor="#FFFFFFFF"
+        android:pathData="M9,16l3-3h-2V8H8v5H6L9,16z" />
+
+    <path
+        android:name="up"
+        android:fillColor="#FFFFFFFF"
+        android:pathData="M5,2L2,5h2v5h2V5h2L5,2z" />
+
+</vector>
diff --git a/lineage/res/res/values/dimens.xml b/lineage/res/res/values/dimens.xml
new file mode 100644
index 0000000..fb3405e
--- /dev/null
+++ b/lineage/res/res/values/dimens.xml
@@ -0,0 +1,21 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+     Copyright (C) 2014 The CyanogenMod Project
+     Copyright (C) 2017 The LineageOS Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+<resources>
+    <dimen name="net_traffic_single_text_size">12dp</dimen>
+    <dimen name="net_traffic_multi_text_size">8dp</dimen>
+</resources>
diff --git a/lineage/res/res/values/strings.xml b/lineage/res/res/values/strings.xml
index f93db96..146b572 100644
--- a/lineage/res/res/values/strings.xml
+++ b/lineage/res/res/values/strings.xml
@@ -205,4 +205,10 @@
 
     <!-- General purpose use "unknown" string -->
     <string name="unknown">Unknown</string>
+
+    <!-- Status bar network traffic monitor strings -->
+    <string name="kilobitspersecond_short">Kbps</string>
+    <string name="megabitspersecond_short">Mbps</string>
+    <string name="network_traffic_format"><xliff:g id="value">%1$.1f</xliff:g></string>
+    <string name="network_traffic_format_with_unit"><xliff:g id="value">%1$.1f</xliff:g> <xliff:g id="unit">%2$s</xliff:g></string>
 </resources>
diff --git a/lineage/res/res/values/symbols.xml b/lineage/res/res/values/symbols.xml
index e005c31..026b4c4 100644
--- a/lineage/res/res/values/symbols.xml
+++ b/lineage/res/res/values/symbols.xml
@@ -130,4 +130,15 @@
 
     <!-- General purpose use "unknown" string -->
     <java-symbol type="string" name="unknown" />
+
+    <!-- Status bar network traffic monitor -->
+    <java-symbol type="drawable" name="stat_sys_network_traffic_down" />
+    <java-symbol type="drawable" name="stat_sys_network_traffic_up" />
+    <java-symbol type="drawable" name="stat_sys_network_traffic_updown" />
+    <java-symbol type="dimen" name="net_traffic_single_text_size" />
+    <java-symbol type="dimen" name="net_traffic_multi_text_size" />
+    <java-symbol type="string" name="kilobitspersecond_short" />
+    <java-symbol type="string" name="megabitspersecond_short" />
+    <java-symbol type="string" name="network_traffic_format" />
+    <java-symbol type="string" name="network_traffic_format_with_unit" />
 </resources>
diff --git a/sdk/src/java/lineageos/providers/LineageSettings.java b/sdk/src/java/lineageos/providers/LineageSettings.java
index d290580..ccbaa09 100644
--- a/sdk/src/java/lineageos/providers/LineageSettings.java
+++ b/sdk/src/java/lineageos/providers/LineageSettings.java
@@ -1,5 +1,6 @@
 /**
  * Copyright (c) 2015, The CyanogenMod Project
+ *               2017, The LineageOS Project
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
@@ -2890,6 +2891,29 @@ public final class LineageSettings {
          */
         public static final String LOCK_SCREEN_WEATHER_ENABLED = "lock_screen_weather_enabled";
 
+        /**
+         * Network traffic indicator mode
+         * 0 = Don't show network traffic indicator
+         * 1 = Display up-stream traffic only
+         * 2 = Display down-stream traffic only
+         * 3 = Display both up- and down-stream traffic
+         * @hide
+         */
+        public static final String NETWORK_TRAFFIC_MODE = "network_traffic_mode";
+
+        /**
+         * Whether or not to hide the network traffic indicator when there is no activity
+         * @hide
+         */
+        public static final String NETWORK_TRAFFIC_AUTOHIDE = "network_traffic_autohide";
+
+        /**
+         * Network traffic inactivity threshold (default is 5 kBs)
+         * @hide
+         */
+        public static final String NETWORK_TRAFFIC_AUTOHIDE_THRESHOLD =
+                "network_traffic_autohide_threshold";
+
 
         // endregion
 
-- 
2.7.4

