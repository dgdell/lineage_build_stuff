From 08faf1fc0e4c082aa6d9d38ed34cd0c69e14488d Mon Sep 17 00:00:00 2001
From: nx111 <gd.zhangdz@gmail.com>
Date: Wed, 2 May 2018 12:45:44 +0800
Subject: [PATCH 01/16] repopick: force apply path where supplied, print url.

Change-Id: I0643479e9d70ba1c14b461f46a77a5d4943cb099
---
 build/tools/repopick.py | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

diff --git a/build/tools/repopick.py b/build/tools/repopick.py
index 50947b26..bcdd3271 100755
--- a/build/tools/repopick.py
+++ b/build/tools/repopick.py
@@ -353,10 +353,10 @@ if __name__ == '__main__':
         #   - check that the project path exists
         project_path = None
 
-        if item['project'] in project_name_to_data and item['branch'] in project_name_to_data[item['project']]:
-            project_path = project_name_to_data[item['project']][item['branch']]
-        elif args.path:
+        if args.path:
             project_path = args.path
+        elif item['project'] in project_name_to_data and item['branch'] in project_name_to_data[item['project']]:
+            project_path = project_name_to_data[item['project']][item['branch']]
         elif args.ignore_missing:
             print('WARNING: Skipping {0} since there is no project directory for: {1}\n'.format(item['id'], item['project']))
             continue
@@ -395,7 +395,7 @@ if __name__ == '__main__':
 
         # Print out some useful info
         if not args.quiet:
-            print('--> Subject:       "{0}"'.format(item['subject'].encode('utf-8')))
+            print('--> Subject:       {0}'.format(item['subject'].encode('utf-8')))
             print('--> Project path:  {0}'.format(project_path))
             print('--> Change number: {0} (Patch Set {1})'.format(item['id'], item['patchset']))
 
@@ -404,6 +404,9 @@ if __name__ == '__main__':
         else:
             method = 'ssh'
 
+        if not args.quiet:
+            print('--> Url:           {0}'.format(item['fetch'][method]['url']))
+
         # Try fetching from GitHub first if using default gerrit
         if args.gerrit == default_gerrit:
             if args.verbose:
-- 
2.17.1

