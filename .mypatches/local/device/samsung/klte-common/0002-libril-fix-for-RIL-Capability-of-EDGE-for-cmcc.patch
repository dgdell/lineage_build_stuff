From 4e71706895cb87ed07433f85d76cce0bdd117176 Mon Sep 17 00:00:00 2001
From: nx111 <gd.zhangdz@gmail.com>
Date: Sat, 30 Dec 2017 16:39:18 +0800
Subject: [PATCH 2/6] libril: fix for RIL Capability of EDGE for cmcc.

Change-Id: I2398b1f8adb0a24c1097f48d8fef2d50424bb5dc
---
 libril/ril_service.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/libril/ril_service.cpp b/libril/ril_service.cpp
index 495c3e0..882fea9 100644
--- a/libril/ril_service.cpp
+++ b/libril/ril_service.cpp
@@ -3879,6 +3879,8 @@ int radio::getDataRegistrationStateResponse(int slotId,
                 char **resp = (char **) response;
                 dataRegResponse.regState = (RegState) ATOI_NULL_HANDLED_DEF(resp[0], 4);
                 dataRegResponse.rat =  ATOI_NULL_HANDLED_DEF(resp[3], 0);
+                if(dataRegResponse.rat > 100)
+			dataRegResponse.rat -= 100;
                 dataRegResponse.reasonDataDenied =  ATOI_NULL_HANDLED(resp[4]);
                 dataRegResponse.maxDataCalls =  ATOI_NULL_HANDLED_DEF(resp[5], 1);
                 fillCellIdentityFromDataRegStateResponseString(dataRegResponse.cellIdentity,
-- 
2.7.4

