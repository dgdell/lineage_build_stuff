From 8c801a09b4802919cf2ead4fd081dce995e5440f Mon Sep 17 00:00:00 2001
From: nx111 <gd.zhangdz@gmail.com>
Date: Fri, 12 Jan 2018 22:53:25 +0800
Subject: [PATCH 4/5] settings: AppOps: fix array index out bound.

Change-Id: I97c23780c8028f9e3c619eed2cb6f892cb8ce11f
---
 res/values/cm_arrays.xml                               | 13 +++++++++++++
 res/values/cm_strings.xml                              | 12 ++++++++++++
 src/com/android/settings/applications/AppOpsState.java |  1 +
 3 files changed, 26 insertions(+)

diff --git a/res/values/cm_arrays.xml b/res/values/cm_arrays.xml
index 3ae1564..41e501e 100644
--- a/res/values/cm_arrays.xml
+++ b/res/values/cm_arrays.xml
@@ -22,6 +22,7 @@
         <item>@string/app_ops_categories_messaging</item>
         <item>@string/app_ops_categories_media</item>
         <item>@string/app_ops_categories_device</item>
+        <item>@string/app_ops_categories_background</item>
         <item>@string/app_ops_categories_bootup</item>
         <item>@string/app_ops_categories_su</item>
     </string-array>
@@ -92,6 +93,12 @@
         <item>@string/app_ops_summaries_turn_screen_on</item>
         <item>@string/app_ops_summaries_get_accounts</item>
         <item>@string/app_ops_summaries_run_in_background</item>
+        <item>@string/app_ops_summaries_audio_accessibility_volume</item>
+        <item>@string/app_ops_summaries_read_phone_numbers</item>
+        <item>@string/app_ops_summaries_request_install_packages</item>
+        <item>@string/app_ops_summaries_picture_in_picture</item>
+        <item>@string/app_ops_summaries_instant_app_start_foreground</item>
+        <item>@string/app_ops_summaries_answer_phone_calls</item>
         <item>@string/app_ops_summaries_toggle_wifi</item>
         <item>@string/app_ops_summaries_toggle_bluetooth</item>
         <item>@string/app_ops_summaries_start_at_boot</item>
@@ -166,6 +173,12 @@
         <item>@string/app_ops_labels_turn_screen_on</item>
         <item>@string/app_ops_labels_get_accounts</item>
         <item>@string/app_ops_labels_run_in_background</item>
+        <item>@string/app_ops_labels_audio_accessibility_volume</item>
+        <item>@string/app_ops_labels_read_phone_numbers</item>
+        <item>@string/app_ops_labels_request_install_packages</item>
+        <item>@string/app_ops_labels_picture_in_picture</item>
+        <item>@string/app_ops_labels_instant_app_start_foreground</item>
+        <item>@string/app_ops_labels_answer_phone_calls</item>
         <item>@string/app_ops_labels_toggle_wifi</item>
         <item>@string/app_ops_labels_toggle_bluetooth</item>
         <item>@string/app_ops_labels_start_at_boot</item>
diff --git a/res/values/cm_strings.xml b/res/values/cm_strings.xml
index 9389276..becd96a 100644
--- a/res/values/cm_strings.xml
+++ b/res/values/cm_strings.xml
@@ -151,6 +151,12 @@
     <string name="app_ops_summaries_turn_screen_on">turn screen on</string>
     <string name="app_ops_summaries_get_accounts">get accounts</string>
     <string name="app_ops_summaries_run_in_background">run in background</string>
+    <string name="app_ops_summaries_audio_accessibility_volume">audio accessibility volume</string>
+    <string name="app_ops_summaries_read_phone_numbers">read phone numbers</string>
+    <string name="app_ops_summaries_request_install_packages">request install packages</string>
+    <string name="app_ops_summaries_picture_in_picture">picture in picture</string>
+    <string name="app_ops_summaries_instant_app_start_foreground">instant app start foreground</string>
+    <string name="app_ops_summaries_answer_phone_calls">answer phone calls</string>
     <string name="app_ops_summaries_toggle_wifi">toggle Wi-Fi</string>
     <string name="app_ops_summaries_toggle_bluetooth">toggle bluetooth</string>
     <string name="app_ops_summaries_start_at_boot">start at boot</string>
@@ -223,6 +229,12 @@
     <string name="app_ops_labels_turn_screen_on">Turn screen on</string>
     <string name="app_ops_labels_get_accounts">Get accounts</string>
     <string name="app_ops_labels_run_in_background">Run in background</string>
+    <string name="app_ops_labels_audio_accessibility_volume">audio accessibility volume</string>
+    <string name="app_ops_labels_read_phone_numbers">read phone numbers</string>
+    <string name="app_ops_labels_request_install_packages">request install packages</string>
+    <string name="app_ops_labels_picture_in_picture">picture in picture</string>
+    <string name="app_ops_labels_instant_app_start_foreground">instant app start foreground</string>
+    <string name="app_ops_labels_answer_phone_calls">answer phone calls</string>
     <string name="app_ops_labels_toggle_wifi">Toggle Wi-Fi</string>
     <string name="app_ops_labels_toggle_bluetooth">Toggle bluetooth</string>
     <string name="app_ops_labels_start_at_boot">Start at boot</string>
diff --git a/src/com/android/settings/applications/AppOpsState.java b/src/com/android/settings/applications/AppOpsState.java
index ba14b73..0efccd2 100644
--- a/src/com/android/settings/applications/AppOpsState.java
+++ b/src/com/android/settings/applications/AppOpsState.java
@@ -189,6 +189,7 @@ public class AppOpsState {
                     false,
                     false,
                     false,
+                    false,
                     false }
             );
 
-- 
2.7.4

