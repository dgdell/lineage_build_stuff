From 0083359791ddd31ee5d35352c8810e0ed9807527 Mon Sep 17 00:00:00 2001
From: codeworkx <daniel.hillenbrand@codeworkx.de>
Date: Mon, 28 Aug 2017 20:54:02 +0200
Subject: [PATCH 2/2] init: panic-reboot to bootloader only on eng builds

Since our regular builds are from type "userdebug" and not "user",
we have to care about this here.

Change-Id: If6c6f8adebf1c59fc8448f61793c2c3debca6899
---
 init/Android.mk | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/init/Android.mk b/init/Android.mk
index 6e79dbd..e718365 100644
--- a/init/Android.mk
+++ b/init/Android.mk
@@ -8,22 +8,22 @@ ifneq (,$(filter userdebug eng,$(TARGET_BUILD_VARIANT)))
 init_options += \
     -DALLOW_LOCAL_PROP_OVERRIDE=1 \
     -DALLOW_PERMISSIVE_SELINUX=1 \
-    -DREBOOT_BOOTLOADER_ON_PANIC=1 \
     -DDUMP_ON_UMOUNT_FAILURE=1
 else
 init_options += \
     -DALLOW_LOCAL_PROP_OVERRIDE=0 \
     -DALLOW_PERMISSIVE_SELINUX=0 \
-    -DREBOOT_BOOTLOADER_ON_PANIC=0 \
     -DDUMP_ON_UMOUNT_FAILURE=0
 endif
 
 ifneq (,$(filter eng,$(TARGET_BUILD_VARIANT)))
 init_options += \
-    -DSHUTDOWN_ZERO_TIMEOUT=1
+    -DSHUTDOWN_ZERO_TIMEOUT=1 \
+    -DREBOOT_BOOTLOADER_ON_PANIC=1
 else
 init_options += \
-    -DSHUTDOWN_ZERO_TIMEOUT=0
+    -DSHUTDOWN_ZERO_TIMEOUT=0 \
+    -DREBOOT_BOOTLOADER_ON_PANIC=0
 endif
 
 init_options += -DLOG_UEVENTS=0
-- 
2.7.4

