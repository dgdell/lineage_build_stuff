From dde27171ec66fb68eafa0615e32058bd7a5c9a7b Mon Sep 17 00:00:00 2001
From: nx111 <gd.zhangdz@gmail.com>
Date: Sat, 16 Dec 2017 08:58:18 +0800
Subject: [PATCH] telephony: fix RilDataRadioTechnology which great than 100.

Change-Id: I6c51f0789bb591b8c84b324b13be1a7a17aa0e9e
---
 telephony/java/android/telephony/ServiceState.java | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/telephony/java/android/telephony/ServiceState.java b/telephony/java/android/telephony/ServiceState.java
index 6151e5b..4c479c6 100644
--- a/telephony/java/android/telephony/ServiceState.java
+++ b/telephony/java/android/telephony/ServiceState.java
@@ -311,6 +311,8 @@ public class ServiceState implements Parcelable {
         mIsManualNetworkSelection = s.mIsManualNetworkSelection;
         mRilVoiceRadioTechnology = s.mRilVoiceRadioTechnology;
         mRilDataRadioTechnology = s.mRilDataRadioTechnology;
+        if (mRilDataRadioTechnology >= 100)
+            mRilDataRadioTechnology = mRilDataRadioTechnology - 100;
         mCssIndicator = s.mCssIndicator;
         mNetworkId = s.mNetworkId;
         mSystemId = s.mSystemId;
@@ -340,6 +342,8 @@ public class ServiceState implements Parcelable {
         mIsManualNetworkSelection = in.readInt() != 0;
         mRilVoiceRadioTechnology = in.readInt();
         mRilDataRadioTechnology = in.readInt();
+        if (mRilDataRadioTechnology >= 100)
+            mRilDataRadioTechnology = mRilDataRadioTechnology - 100;
         mCssIndicator = (in.readInt() != 0);
         mNetworkId = in.readInt();
         mSystemId = in.readInt();
@@ -1078,6 +1082,8 @@ public class ServiceState implements Parcelable {
     }
     /** @hide */
     public int getRilDataRadioTechnology() {
+        if (this.mRilDataRadioTechnology >= 100)
+            this.mRilDataRadioTechnology -= 100;
         return this.mRilDataRadioTechnology;
     }
     /**
-- 
2.7.4

