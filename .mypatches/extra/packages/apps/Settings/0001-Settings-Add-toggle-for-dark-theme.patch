From 695fc24b447204aa4a28f246928275974eb7f431 Mon Sep 17 00:00:00 2001
From: Harry Youd <harry@harryyoud.co.uk>
Date: Thu, 28 Dec 2017 20:25:59 +0100
Subject: [PATCH 1/3] Settings: Add toggle for dark theme

Change-Id: Ia242ebcb8a2f0efaa5a7a14a29e0eee76a5d98b0
---
 res/values/cm_arrays.xml     | 29 +++++++++++++++++++++++++++++
 res/values/cm_strings.xml    |  6 ++++++
 res/xml/display_settings.xml |  8 ++++++++
 3 files changed, 43 insertions(+)
 create mode 100644 res/values/cm_arrays.xml

diff --git a/res/values/cm_arrays.xml b/res/values/cm_arrays.xml
new file mode 100644
index 0000000..3a4f936
--- /dev/null
+++ b/res/values/cm_arrays.xml
@@ -0,0 +1,29 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+     Copyright (C) 2012-2016 The CyanogenMod Project
+     Copyright (C) 2017      The LineageOS Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
+    <string-array name="dark_theme_entries" translatable="false">
+        <item>@string/dark_theme_automatic</item>
+        <item>@string/dark_theme_light</item>
+        <item>@string/dark_theme_dark</item>
+    </string-array>
+    <string-array name="dark_theme_values" translatable="false">
+        <item>0</item>
+        <item>1</item>
+        <item>2</item>
+    </string-array>
+</resources>
diff --git a/res/values/cm_strings.xml b/res/values/cm_strings.xml
index 0551154..596da33 100644
--- a/res/values/cm_strings.xml
+++ b/res/values/cm_strings.xml
@@ -59,4 +59,10 @@
     <string name="adb_over_network">ADB over network</string>
     <string name="adb_over_network_summary">Enable TCP/IP debugging over network interfaces (Wi\u2011Fi, USB networks). This setting is reset on reboot</string>
     <string name="adb_over_network_warning">WARNING: When ADB over network is enabled, your phone is open for intrusions on all connected networks!\n\nOnly use this feature when you are connected on trusted networks.\n\nDo you really want to enable this function?</string>
+
+    <!-- Dark SysUI Theme -->
+    <string name="dark_theme_title">Quick Settings background color</string>
+    <string name="dark_theme_automatic">Automatic</string>
+    <string name="dark_theme_dark">Dark</string>
+    <string name="dark_theme_light">Light</string>
 </resources>
diff --git a/res/xml/display_settings.xml b/res/xml/display_settings.xml
index f0993ba..400ae96 100644
--- a/res/xml/display_settings.xml
+++ b/res/xml/display_settings.xml
@@ -71,6 +71,14 @@
         android:key="rotation"
         lineage:requiresFeature="android.hardware.sensor.accelerometer" />
 
+    <lineageos.preference.LineageSystemSettingListPreference
+        android:key="dark_theme"
+        android:title="@string/dark_theme_title"
+        android:summary="%s"
+        android:entries="@array/dark_theme_entries"
+        android:entryValues="@array/dark_theme_values"
+        android:defaultValue="0" />
+
     <Preference
         android:key="color_mode"
         android:title="@string/color_mode_title"
-- 
2.7.4

