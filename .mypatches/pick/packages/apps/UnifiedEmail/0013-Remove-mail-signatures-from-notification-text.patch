From c6e4ca6a9a42a8aa7295ab40f6dc5ce21717830e Mon Sep 17 00:00:00 2001
From: Danny Baumann <dannybaumann@web.de>
Date: Fri, 8 Jan 2016 11:28:11 +0100
Subject: [PATCH 13/20] Remove mail signatures from notification text.

Change-Id: Ia0ab851a33aa335724d83dadddf45adbfc1013c6
---
 src/com/android/mail/utils/NotificationUtils.java | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/com/android/mail/utils/NotificationUtils.java b/src/com/android/mail/utils/NotificationUtils.java
index 910870248..caaa32e96 100644
--- a/src/com/android/mail/utils/NotificationUtils.java
+++ b/src/com/android/mail/utils/NotificationUtils.java
@@ -1529,7 +1529,9 @@ public class NotificationUtils {
         final TextAppearanceSpan notificationSubjectSpan = new TextAppearanceSpan(
                 context, R.style.NotificationPrimaryText);
 
-        final String snippet = getMessageBodyWithoutElidedText(message);
+        String snippet = getMessageBodyWithoutElidedText(message);
+        // Remove email signatures
+        snippet = !TextUtils.isEmpty(snippet) ? snippet.replaceAll("(?ms)^-- .*", "") : "";
 
         // Change multiple newlines (with potential white space between), into a single new line
         final String collapsedSnippet =
-- 
2.17.1

