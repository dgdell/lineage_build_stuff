From f8bc88a57c69ca62810fd9b9247794c4d7aefb8b Mon Sep 17 00:00:00 2001
From: Arun Valiaparambil <avaliaparambil@cyngn.com>
Date: Fri, 1 Apr 2016 15:46:29 +0530
Subject: [PATCH 09/16] Play an audible notification on receiving a class zero
 message.

Changes ported from http://review.cyanogenmod.org/#/c/125457/

PAELLA-123

Change-Id: I1289790d32a3b69bf7892025bac5fa3bd74eeefc
---
 .../android/messaging/datamodel/BugleNotifications.java  | 9 +++++++++
 src/com/android/messaging/ui/ClassZeroActivity.java      | 3 +++
 2 files changed, 12 insertions(+)

diff --git a/src/com/android/messaging/datamodel/BugleNotifications.java b/src/com/android/messaging/datamodel/BugleNotifications.java
index b796e73..ffe9105 100644
--- a/src/com/android/messaging/datamodel/BugleNotifications.java
+++ b/src/com/android/messaging/datamodel/BugleNotifications.java
@@ -190,6 +190,15 @@ public class BugleNotifications {
         }
     }
 
+    /**
+     * Play a sound to notify arrival of a class 0 message
+     *
+     */
+    public static void playClassZeroNotification() {
+        final Uri ringtoneUri = RingtoneUtil.getNotificationRingtoneUri(null);
+        playObservableConversationNotificationSound(ringtoneUri);
+    }
+
     /**
      * Cancel all notifications of a certain type.
      *
diff --git a/src/com/android/messaging/ui/ClassZeroActivity.java b/src/com/android/messaging/ui/ClassZeroActivity.java
index 129ec19..ccb15a0 100644
--- a/src/com/android/messaging/ui/ClassZeroActivity.java
+++ b/src/com/android/messaging/ui/ClassZeroActivity.java
@@ -33,6 +33,7 @@ import android.view.Window;
 
 import com.android.messaging.R;
 import com.android.messaging.datamodel.action.ReceiveSmsMessageAction;
+import com.android.messaging.datamodel.BugleNotifications;
 import com.android.messaging.util.Assert;
 
 import java.util.ArrayList;
@@ -88,6 +89,8 @@ public class ClassZeroActivity extends Activity {
             return false;
         }
         mMessageQueue.add(messageValues);
+        // Show a notification to let the user know a new message has arrived
+        BugleNotifications.playClassZeroNotification();
         return true;
     }
 
-- 
2.17.1

