From 3dd2e2c103595a872bb472eefc62937a564e80fb Mon Sep 17 00:00:00 2001
From: T H <socialentry@gmail.com>
Date: Mon, 16 Jul 2018 00:34:36 -0400
Subject: [PATCH 3/4] Snap: Fix saving HSR

* HSR do not need to set capture rate.

Change-Id: Ie8fb27ea52039890dc23c73eb4b4b2837341f893
---
 src/com/android/camera/VideoModule.java | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/src/com/android/camera/VideoModule.java b/src/com/android/camera/VideoModule.java
index 14732483c..62032e248 100644
--- a/src/com/android/camera/VideoModule.java
+++ b/src/com/android/camera/VideoModule.java
@@ -1796,8 +1796,11 @@ public class VideoModule implements CameraModule,
             double fps = 1000 / (double) mTimeBetweenTimeLapseFrameCaptureMs;
             setCaptureRate(mMediaRecorder, fps);
         } else if (captureRate > 0) {
-            Log.i(TAG, "Setting capture-rate = " + captureRate);
-            mMediaRecorder.setCaptureRate(captureRate);
+            // Only HFR need capture rate
+            if (isHFR) {
+                Log.i(TAG, "Setting capture-rate = " + captureRate);
+                mMediaRecorder.setCaptureRate(captureRate);
+            }
 
             // for HSR, encoder's target-framerate = capture-rate
             // for HFR, encoder's taget-framerate = 30fps (from profile)
-- 
2.17.1

