From 4ee52182f8be20a728843c95ba5a36ff94421291 Mon Sep 17 00:00:00 2001
From: Bruno Martins <bgcngm@gmail.com>
Date: Tue, 13 Mar 2018 13:06:21 +0000
Subject: [PATCH 2/4] Settings: Hide Night Mode suggestion if LiveDisplay
 feature is present

 * Workaround by forcebly reporting that suggestion has been completed,
   when LiveDisplay is available.

Change-Id: I01f6b3a5acfeeca5468a9926b0bc21247a458dbf
---
 .../dashboard/suggestions/SuggestionFeatureProviderImpl.java   | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/com/android/settings/dashboard/suggestions/SuggestionFeatureProviderImpl.java b/src/com/android/settings/dashboard/suggestions/SuggestionFeatureProviderImpl.java
index 347e165093..e273cf7ffd 100644
--- a/src/com/android/settings/dashboard/suggestions/SuggestionFeatureProviderImpl.java
+++ b/src/com/android/settings/dashboard/suggestions/SuggestionFeatureProviderImpl.java
@@ -75,7 +75,8 @@ public class SuggestionFeatureProviderImpl implements SuggestionFeatureProvider
     public boolean isSuggestionCompleted(Context context, @NonNull ComponentName component) {
         final String className = component.getClassName();
         if (className.equals(NightDisplaySuggestionActivity.class.getName())) {
-            return hasUsedNightDisplay(context);
+            return context.getPackageManager().hasSystemFeature("org.lineageos.livedisplay")
+                    || hasUsedNightDisplay(context);
         }
         if (className.equals(NewDeviceIntroSuggestionActivity.class.getName())) {
             return NewDeviceIntroSuggestionActivity.isSuggestionComplete(context);
-- 
2.17.0

