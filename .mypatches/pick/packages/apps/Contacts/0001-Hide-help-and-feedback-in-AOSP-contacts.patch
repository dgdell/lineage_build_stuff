From 29edc56aa52319a768db0aa5578614e3d95b30aa Mon Sep 17 00:00:00 2001
From: John Shao <johnshao@google.com>
Date: Tue, 7 Nov 2017 21:07:18 -0800
Subject: [PATCH] Hide help and feedback in AOSP contacts

Change-Id: I8daf9ef8ebc99254cadab5f914db2f268f2422e3
---
 src/com/android/contacts/drawer/DrawerAdapter.java         | 7 +++++--
 src/com/android/contacts/editor/ContactEditorFragment.java | 3 +++
 2 files changed, 8 insertions(+), 2 deletions(-)

diff --git a/src/com/android/contacts/drawer/DrawerAdapter.java b/src/com/android/contacts/drawer/DrawerAdapter.java
index f1b7d91fc..ba4516353 100644
--- a/src/com/android/contacts/drawer/DrawerAdapter.java
+++ b/src/com/android/contacts/drawer/DrawerAdapter.java
@@ -38,6 +38,7 @@ import com.android.contacts.model.account.AccountDisplayInfoFactory;
 import com.android.contacts.profile.ProfileItem;
 import com.android.contacts.util.ImplicitIntentsUtil;
 import com.android.contacts.util.SharedPreferenceUtil;
+import com.android.contactsbind.HelpUtils;
 import com.android.contactsbind.ObjectFactory;
 
 import java.util.ArrayList;
@@ -138,8 +139,10 @@ public class DrawerAdapter extends BaseAdapter {
         mMiscItems.add(new DividerItem());
         mMiscItems.add(new MiscItem(R.id.nav_settings, R.string.menu_settings,
                 R.drawable.quantum_ic_settings_vd_theme_24));
-        mMiscItems.add(new MiscItem(R.id.nav_help, R.string.menu_help,
-                R.drawable.quantum_ic_help_vd_theme_24));
+        if (HelpUtils.isHelpAndFeedbackAvailable()) {
+            mMiscItems.add(new MiscItem(R.id.nav_help, R.string.menu_help,
+                    R.drawable.quantum_ic_help_vd_theme_24));
+        }
         rebuildItemsList();
     }
 
diff --git a/src/com/android/contacts/editor/ContactEditorFragment.java b/src/com/android/contacts/editor/ContactEditorFragment.java
index b8370246d..9f8e025b3 100644
--- a/src/com/android/contacts/editor/ContactEditorFragment.java
+++ b/src/com/android/contacts/editor/ContactEditorFragment.java
@@ -749,6 +749,9 @@ public class ContactEditorFragment extends Fragment implements
             });
         }
 
+        final MenuItem helpMenu = menu.findItem(R.id.menu_help);
+        helpMenu.setVisible(HelpUtils.isHelpAndFeedbackAvailable());
+
         int size = menu.size();
         for (int i = 0; i < size; i++) {
             menu.getItem(i).setEnabled(mEnabled);
-- 
2.15.1

