From bf5b59285208695976942f9534f20f3ade462786 Mon Sep 17 00:00:00 2001
From: LuK1337 <priv.luk@gmail.com>
Date: Sun, 28 Jan 2018 00:20:31 +0100
Subject: [PATCH 3/6] LineageParts: Reenable stats

Change-Id: I551112beba3278eb3a3101c20384339ca296f414
---
 AndroidManifest.xml                                               | 2 --
 res/xml/privacy_settings.xml                                      | 8 --------
 src/org/lineageos/lineageparts/lineagestats/ReportingService.java | 2 +-
 .../lineageparts/lineagestats/StatsUploadJobService.java          | 4 ++--
 4 files changed, 3 insertions(+), 13 deletions(-)

diff --git a/AndroidManifest.xml b/AndroidManifest.xml
index ce857d9..1b2a996 100644
--- a/AndroidManifest.xml
+++ b/AndroidManifest.xml
@@ -189,7 +189,6 @@
         </activity-alias>
 
         <!-- Anonymous Statistics -->
-        <!--
         <receiver android:name=".lineagestats.ReportingServiceManager"
             android:enabled="true"
             android:exported="false"
@@ -213,7 +212,6 @@
                  android:label="ReportingService"
                  android:enabled="true"
                  android:exported="false" />
-        -->
 
         <!-- Weather settings -->
         <activity-alias
diff --git a/res/xml/privacy_settings.xml b/res/xml/privacy_settings.xml
index 74f2570..7ad0a3f 100644
--- a/res/xml/privacy_settings.xml
+++ b/res/xml/privacy_settings.xml
@@ -29,12 +29,4 @@
             android:targetClass="com.android.settings.applications.ProtectedAppsActivity" />
     </Preference>
 
-    <!-- Anonymous statistics - (LineageStats) -->
-    <PreferenceScreen
-        android:key="lineagestats"
-        android:title="@string/anonymous_statistics_title"
-        android:summary="@string/anonymous_statistics_summary"
-        android:fragment="org.lineageos.lineageparts.lineagestats.AnonymousStats" >
-    </PreferenceScreen>
-
 </PreferenceScreen>
diff --git a/src/org/lineageos/lineageparts/lineagestats/ReportingService.java b/src/org/lineageos/lineageparts/lineagestats/ReportingService.java
index d413150..473e76b 100644
--- a/src/org/lineageos/lineageparts/lineagestats/ReportingService.java
+++ b/src/org/lineageos/lineageparts/lineagestats/ReportingService.java
@@ -60,7 +60,7 @@ public class ReportingService extends IntentService {
 
         // set job types
         lineageBundle.putInt(StatsUploadJobService.KEY_JOB_TYPE,
-                StatsUploadJobService.JOB_TYPE_LineageORG);
+                StatsUploadJobService.JOB_TYPE_LINEAGEORG);
 
         // schedule lineage stats upload
         js.schedule(new JobInfo.Builder(lineageOrgJobId, new ComponentName(getPackageName(),
diff --git a/src/org/lineageos/lineageparts/lineagestats/StatsUploadJobService.java b/src/org/lineageos/lineageparts/lineagestats/StatsUploadJobService.java
index 93b4d60..8526650 100644
--- a/src/org/lineageos/lineageparts/lineagestats/StatsUploadJobService.java
+++ b/src/org/lineageos/lineageparts/lineagestats/StatsUploadJobService.java
@@ -45,7 +45,7 @@ public class StatsUploadJobService extends JobService {
     private static final boolean DEBUG = Log.isLoggable(TAG, Log.DEBUG);
 
     public static final String KEY_JOB_TYPE = "job_type";
-    public static final int JOB_TYPE_LineageORG = 1;
+    public static final int JOB_TYPE_LINEAGEORG = 1;
 
     public static final String KEY_UNIQUE_ID = "uniqueId";
     public static final String KEY_DEVICE_NAME = "deviceName";
@@ -115,7 +115,7 @@ public class StatsUploadJobService extends JobService {
             int jobType = extras.getInt(KEY_JOB_TYPE, -1);
             if (!isCancelled()) {
                 switch (jobType) {
-                    case JOB_TYPE_LineageORG:
+                    case JOB_TYPE_LINEAGEORG:
                         try {
                             JSONObject json = buildStatsRequest(deviceId, deviceName,
                                     deviceVersion, deviceCountry, deviceCarrier, deviceCarrierId);
-- 
2.7.4

