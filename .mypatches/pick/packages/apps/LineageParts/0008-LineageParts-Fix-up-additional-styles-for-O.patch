From d173b9f88140572d8e57b04b59ecf14909228e22 Mon Sep 17 00:00:00 2001
From: Bruno Martins <bgcngm@gmail.com>
Date: Mon, 22 Jan 2018 00:22:54 +0000
Subject: [PATCH 8/8] LineageParts: Fix up additional styles for O

Change-Id: I6844d13106f5ed526c3401b8f025d30c9e9689a8
---
 .../preference_dropdown_material_settings.xml      | 35 ++++++++++++++++++++++
 res/values/styles.xml                              |  4 +++
 res/values/themes.xml                              |  2 +-
 3 files changed, 40 insertions(+), 1 deletion(-)
 create mode 100644 res/layout/preference_dropdown_material_settings.xml

diff --git a/res/layout/preference_dropdown_material_settings.xml b/res/layout/preference_dropdown_material_settings.xml
new file mode 100644
index 0000000..3912188
--- /dev/null
+++ b/res/layout/preference_dropdown_material_settings.xml
@@ -0,0 +1,35 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+  Copyright (C) 2016 The Android Open Source Project
+
+  Licensed under the Apache License, Version 2.0 (the "License");
+  you may not use this file except in compliance with the License.
+  You may obtain a copy of the License at
+
+       http://www.apache.org/licenses/LICENSE-2.0
+
+  Unless required by applicable law or agreed to in writing, software
+  distributed under the License is distributed on an "AS IS" BASIS,
+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+  See the License for the specific language governing permissions and
+  limitations under the License.
+  -->
+
+
+<!-- Based off frameworks/base/core/res/res/layout/preference_dropdown_material.xml
+     except that icon space in this layout is always reserved -->
+<FrameLayout
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content">
+
+    <Spinner
+        android:id="@+id/spinner"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="@dimen/preference_no_icon_padding_start"
+        android:visibility="invisible" />
+
+    <include layout="@layout/preference_material_settings"/>
+
+</FrameLayout>
diff --git a/res/values/styles.xml b/res/values/styles.xml
index 3ccd1ef..46a9cec 100644
--- a/res/values/styles.xml
+++ b/res/values/styles.xml
@@ -82,6 +82,10 @@
         <item name="android:iconSpaceReserved">true</item>
     </style>
 
+    <style name="DropdownPreferenceStyle" parent="@style/PreferenceStyle">
+        <item name="android:layout">@layout/preference_dropdown_material_settings</item>
+    </style>
+
     <style name="EditTextPreference" parent="@*android:style/Preference.Material.DialogPreference.EditTextPreference">
         <item name="android:dialogLayout">@layout/preference_dialog_edittext</item>
     </style>
diff --git a/res/values/themes.xml b/res/values/themes.xml
index be3f0e8..6f9e97c 100644
--- a/res/values/themes.xml
+++ b/res/values/themes.xml
@@ -26,7 +26,7 @@
 
     <style name="Theme.Settings" parent="Theme.SettingsBase">
         <item name="dialogPreferenceStyle">@style/DialogPreferenceStyle</item>
-        <item name="dropdownPreferenceStyle">@style/Preference.DropDown.Material</item>
+        <item name="dropdownPreferenceStyle">@style/DropdownPreferenceStyle</item>
         <item name="editTextPreferenceStyle">@style/EditTextPreference</item>
         <item name="preferenceCategoryStyle">@style/PreferenceCategoryStyle</item>
         <item name="preferenceFragmentStyle">@style/PreferenceFragmentStyle</item>
-- 
2.7.4

