From e0bbaf806435a48ad7c8ba64b00a2453c47eef62 Mon Sep 17 00:00:00 2001
From: Hendrik Hagendorn <finnq@lineageos.org>
Date: Sun, 15 Jan 2017 08:31:13 +0100
Subject: [PATCH 09/11] LineageParts: Bring back and refactor battery icon
 options

* Use the icon blacklist for hiding
* Combine options for hiding status bar icons in system tuner settings

Change-Id: Id8c6df982192cfb54350c9cfe8d8ca4983dd7972
---
 res/values/arrays.xml                             |  5 ++---
 res/xml/status_bar_settings.xml                   |  2 +-
 .../lineageparts/statusbar/StatusBarSettings.java | 15 ++++-----------
 3 files changed, 7 insertions(+), 15 deletions(-)

diff --git a/res/values/arrays.xml b/res/values/arrays.xml
index 79b0149..f958922 100644
--- a/res/values/arrays.xml
+++ b/res/values/arrays.xml
@@ -276,10 +276,9 @@
 
     <string-array name="status_bar_battery_style_values" translatable="false">
         <item>0</item>
-        <item>5</item>
+        <item>1</item>
         <item>2</item>
-        <item>6</item>
-        <item>4</item>
+        <item>3</item>
     </string-array>
 
     <string-array name="status_bar_battery_percentage_entries" translatable="false">
diff --git a/res/xml/status_bar_settings.xml b/res/xml/status_bar_settings.xml
index 29fd1a7..871b035 100644
--- a/res/xml/status_bar_settings.xml
+++ b/res/xml/status_bar_settings.xml
@@ -77,6 +77,7 @@
             android:defaultValue="2" />
 -->
     </PreferenceCategory>
+-->
 
 <!--
     <PreferenceCategory
@@ -101,7 +102,6 @@
             android:defaultValue="0" />
 
     </PreferenceCategory>
--->
 
     <PreferenceCategory
         android:title="@string/status_bar_brightness_category">
diff --git a/src/org/lineageos/lineageparts/statusbar/StatusBarSettings.java b/src/org/lineageos/lineageparts/statusbar/StatusBarSettings.java
index bf4bcc6..ba4efe7 100644
--- a/src/org/lineageos/lineageparts/statusbar/StatusBarSettings.java
+++ b/src/org/lineageos/lineageparts/statusbar/StatusBarSettings.java
@@ -36,8 +36,7 @@ public class StatusBarSettings extends SettingsPreferenceFragment
     private static final String STATUS_BAR_SHOW_BATTERY_PERCENT = "status_bar_show_battery_percent";
     private static final String STATUS_BAR_QUICK_QS_PULLDOWN = "qs_quick_pulldown";
 
-    private static final int STATUS_BAR_BATTERY_STYLE_HIDDEN = 4;
-    private static final int STATUS_BAR_BATTERY_STYLE_TEXT = 6;
+    private static final int STATUS_BAR_BATTERY_STYLE_TEXT = 3;
     private static final int PULLDOWN_DIR_NONE = 0;
     private static final int PULLDOWN_DIR_RIGHT = 1;
     private static final int PULLDOWN_DIR_LEFT = 2;
@@ -54,21 +53,19 @@ public class StatusBarSettings extends SettingsPreferenceFragment
         addPreferencesFromResource(R.xml.status_bar_settings);
 
         mStatusBarClock = (LineageSystemSettingListPreference) findPreference(STATUS_BAR_CLOCK_STYLE);
-/*
         mStatusBarBatteryShowPercent =
                 (LineageSystemSettingListPreference) findPreference(STATUS_BAR_SHOW_BATTERY_PERCENT);
-
+/*
         mStatusBarAmPm = (LineageSystemSettingListPreference) findPreference(STATUS_BAR_AM_PM);
         if (DateFormat.is24HourFormat(getActivity())) {
             mStatusBarAmPm.setEnabled(false);
             mStatusBarAmPm.setSummary(R.string.status_bar_am_pm_info);
         }
-
+*/
         mStatusBarBattery =
                 (LineageSystemSettingListPreference) findPreference(STATUS_BAR_BATTERY_STYLE);
         mStatusBarBattery.setOnPreferenceChangeListener(this);
         enableStatusBarBatteryDependents(mStatusBarBattery.getIntValue(2));
-*/
 
         mQuickPulldown =
                 (LineageSystemSettingListPreference) findPreference(STATUS_BAR_QUICK_QS_PULLDOWN);
@@ -105,18 +102,14 @@ public class StatusBarSettings extends SettingsPreferenceFragment
         int value = Integer.parseInt((String) newValue);
         if (preference == mQuickPulldown) {
             updateQuickPulldownSummary(value);
-/*
         } else if (preference == mStatusBarBattery) {
             enableStatusBarBatteryDependents(value);
-*/
         }
         return true;
     }
 
     private void enableStatusBarBatteryDependents(int batteryIconStyle) {
-        mStatusBarBatteryShowPercent.setEnabled(
-                batteryIconStyle != STATUS_BAR_BATTERY_STYLE_HIDDEN
-                && batteryIconStyle != STATUS_BAR_BATTERY_STYLE_TEXT);
+        mStatusBarBatteryShowPercent.setEnabled(batteryIconStyle != STATUS_BAR_BATTERY_STYLE_TEXT);
     }
 
     private void updateQuickPulldownSummary(int value) {
-- 
2.17.1

