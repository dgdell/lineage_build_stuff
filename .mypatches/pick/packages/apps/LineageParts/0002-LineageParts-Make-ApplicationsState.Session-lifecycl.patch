From 36ef969619b1dc02a7efecd227b9814f5d35aeb5 Mon Sep 17 00:00:00 2001
From: Tony Mantler <nicoya@google.com>
Date: Thu, 21 Sep 2017 15:50:27 -0700
Subject: [PATCH 2/2] LineageParts: Make ApplicationsState.Session
 lifecycle-aware

Bug: 66682989
Test: RunSettingsRoboTests
Change-Id: Idf56788fcae22639b7bf604a8c73cd5f0ff2da16
---
 .../lineageparts/applications/ExpandedDesktopSettings.java  | 6 +++---
 .../lineageparts/applications/LongScreenSettings.java       | 6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/src/org/lineageos/lineageparts/applications/ExpandedDesktopSettings.java b/src/org/lineageos/lineageparts/applications/ExpandedDesktopSettings.java
index a9c4ab1..ca3dcae 100644
--- a/src/org/lineageos/lineageparts/applications/ExpandedDesktopSettings.java
+++ b/src/org/lineageos/lineageparts/applications/ExpandedDesktopSettings.java
@@ -95,7 +95,7 @@ public class ExpandedDesktopSettings extends SettingsPreferenceFragment
 
         mApplicationsState = ApplicationsState.getInstance(getActivity().getApplication());
         mSession = mApplicationsState.newSession(this);
-        mSession.resume();
+        mSession.onResume();
         mActivityFilter = new ActivityFilter(getActivity().getPackageManager());
 
         mIsGloballyExpanded = isGloballyExpanded(getActivity().getContentResolver());
@@ -149,8 +149,8 @@ public class ExpandedDesktopSettings extends SettingsPreferenceFragment
         super.onDestroy();
 
         save();
-        mSession.pause();
-        mSession.release();
+        mSession.onPause();
+        mSession.onDestroy();
     }
 
     @Override
diff --git a/src/org/lineageos/lineageparts/applications/LongScreenSettings.java b/src/org/lineageos/lineageparts/applications/LongScreenSettings.java
index 6a03a5e..782e33e 100644
--- a/src/org/lineageos/lineageparts/applications/LongScreenSettings.java
+++ b/src/org/lineageos/lineageparts/applications/LongScreenSettings.java
@@ -66,7 +66,7 @@ public class LongScreenSettings extends SettingsPreferenceFragment
 
         mApplicationsState = ApplicationsState.getInstance(getActivity().getApplication());
         mSession = mApplicationsState.newSession(this);
-        mSession.resume();
+        mSession.onResume();
         mActivityFilter = new ActivityFilter(getActivity().getPackageManager());
         mAllPackagesAdapter = new AllPackagesAdapter(getActivity());
 
@@ -103,8 +103,8 @@ public class LongScreenSettings extends SettingsPreferenceFragment
     public void onDestroy() {
         super.onDestroy();
 
-        mSession.pause();
-        mSession.release();
+        mSession.onPause();
+        mSession.onDestroy();
     }
 
     @Override
-- 
2.17.1

