From 487aa7b928f01ea2a03fb6cf3687123576d14b85 Mon Sep 17 00:00:00 2001
From: Abhisek Devkota <ciwrl@lineageos.org>
Date: Wed, 31 Jan 2018 01:33:59 -0800
Subject: [PATCH 2/9] SUW: Update Intent for Wifi connect

Change-Id: I22e52795cc408ea7093b788c31babb2d127a7f5b
---
 src/com/cyanogenmod/setupwizard/SetupWizardApp.java    | 4 +++-
 src/com/cyanogenmod/setupwizard/WifiSetupActivity.java | 7 ++-----
 2 files changed, 5 insertions(+), 6 deletions(-)

diff --git a/src/com/cyanogenmod/setupwizard/SetupWizardApp.java b/src/com/cyanogenmod/setupwizard/SetupWizardApp.java
index f10a917..fa5fc6f 100644
--- a/src/com/cyanogenmod/setupwizard/SetupWizardApp.java
+++ b/src/com/cyanogenmod/setupwizard/SetupWizardApp.java
@@ -37,7 +37,7 @@ public class SetupWizardApp extends Application {
     public static final boolean LOGV = Log.isLoggable(TAG, Log.VERBOSE);
 
     public static final String ACTION_FINISHED = "com.cyanogenmod.setupwizard.SETUP_FINISHED";
-    public static final String ACTION_SETUP_WIFI = "com.android.net.wifi.SETUP_WIFI_NETWORK";
+    public static final String ACTION_SETUP_WIFI = "android.net.wifi.PICK_WIFI_NETWORK";
     public static final String ACTION_SETUP_FINGERPRINT = "android.settings.FINGERPRINT_SETUP";
     public static final String ACTION_SETUP_LOCKSCREEN = "com.android.settings.SETUP_LOCK_SCREEN";
     public static final String ACTION_EMERGENCY_DIAL = "com.android.phone.EmergencyDialer.DIAL";
@@ -57,6 +57,8 @@ public class SetupWizardApp extends Application {
     public static final String EXTRA_SCRIPT_URI = "scriptUri";
     public static final String EXTRA_ACTION_ID = "actionId";
     public static final String EXTRA_RESULT_CODE = "com.android.setupwizard.ResultCode";
+    public static final String EXTRA_PREFS_SHOW_BUTTON_BAR = "extra_prefs_show_button_bar";
+    public static final String EXTRA_PREFS_SET_BACK_TEXT = "extra_prefs_set_back_text";
 
     public static final String KEY_DETECT_CAPTIVE_PORTAL = "captive_portal_detection_enabled";
     public static final String KEY_SEND_METRICS = "send_metrics";
diff --git a/src/com/cyanogenmod/setupwizard/WifiSetupActivity.java b/src/com/cyanogenmod/setupwizard/WifiSetupActivity.java
index 65ca02a..ec49dd3 100644
--- a/src/com/cyanogenmod/setupwizard/WifiSetupActivity.java
+++ b/src/com/cyanogenmod/setupwizard/WifiSetupActivity.java
@@ -37,11 +37,8 @@ public class WifiSetupActivity extends SubBaseActivity {
         if (SetupWizardUtils.hasLeanback(this)) {
             intent.setComponent(SetupWizardUtils.mTvwifisettingsActivity);
         }
-        intent.putExtra(SetupWizardApp.EXTRA_FIRST_RUN, true);
-        intent.putExtra(SetupWizardApp.EXTRA_ALLOW_SKIP, true);
-        intent.putExtra(SetupWizardApp.EXTRA_USE_IMMERSIVE, true);
-        intent.putExtra(SetupWizardApp.EXTRA_THEME, EXTRA_MATERIAL_LIGHT);
-        intent.putExtra(SetupWizardApp.EXTRA_AUTO_FINISH, false);
+        intent.putExtra(SetupWizardApp.EXTRA_PREFS_SHOW_BUTTON_BAR, true);
+        intent.putExtra(SetupWizardApp.EXTRA_PREFS_SET_BACK_TEXT , false);
         startSubactivity(intent, REQUEST_CODE_SETUP_WIFI);
     }
 
-- 
2.7.4

