From d4b222c4d7ccf957e63868ce4466804edfb504e5 Mon Sep 17 00:00:00 2001
From: Gabriele M <moto.falcon.git@gmail.com>
Date: Sun, 1 Apr 2018 17:50:58 +0200
Subject: [PATCH 6/7] repopick: Allow to pick changes by URL

Change-Id: I460c987cc03c4f6ff03ecab1bc39e52cec413c13
---
 build/tools/repopick.py | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/build/tools/repopick.py b/build/tools/repopick.py
index 0ce59f96..50947b26 100755
--- a/build/tools/repopick.py
+++ b/build/tools/repopick.py
@@ -279,8 +279,12 @@ if __name__ == '__main__':
         reviews = fetch_query(args.gerrit, args.query)
         change_numbers = [str(r['number']) for r in sorted(reviews, key=cmp_to_key(cmp_reviews))]
     if args.change_number:
+        change_url_re = re.compile('https?://.+?/([0-9]+(?:/[0-9]+)?)/?')
         for c in args.change_number:
-            if '-' in c:
+            change_number = change_url_re.findall(c)
+            if change_number:
+                change_numbers.extend(change_number)
+            elif '-' in c:
                 templist = c.split('-')
                 for i in range(int(templist[0]), int(templist[1]) + 1):
                     change_numbers.append(str(i))
-- 
2.15.1

