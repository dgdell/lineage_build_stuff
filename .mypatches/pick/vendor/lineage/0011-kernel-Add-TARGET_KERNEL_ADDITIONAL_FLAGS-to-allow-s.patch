From e0a671f9543d0f416df3c91e8b8277bfbb2455d6 Mon Sep 17 00:00:00 2001
From: Rashed Abdel-Tawab <rashed@linux.com>
Date: Fri, 15 Jun 2018 22:45:53 -0700
Subject: [PATCH 11/22] kernel: Add TARGET_KERNEL_ADDITIONAL_FLAGS to allow
 setting extra cflags

Change-Id: I8786d6c1de6652f87a02c990c4b56f62b0cc0203
---
 build/tasks/kernel.mk | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/build/tasks/kernel.mk b/build/tasks/kernel.mk
index 8965b1c1..5f4e7685 100644
--- a/build/tasks/kernel.mk
+++ b/build/tasks/kernel.mk
@@ -27,6 +27,7 @@
 #   TARGET_KERNEL_VARIANT_CONFIG       = Variant defconfig, optional
 #   TARGET_KERNEL_SELINUX_CONFIG       = SELinux defconfig, optional
 #   TARGET_KERNEL_ADDITIONAL_CONFIG    = Additional defconfig, optional
+#   TARGET_KERNEL_ADDITIONAL_FLAGS     = Additional make flags, optional
 #   TARGET_KERNEL_ARCH                 = Kernel Arch
 #   TARGET_KERNEL_CROSS_COMPILE_PREFIX = Compiler prefix (e.g. arm-eabi-)
 #                                          defaults to arm-linux-androidkernel- for arm
@@ -274,6 +275,10 @@ ifeq ($(HOST_OS),darwin)
   MAKE_FLAGS += LIBRARY_PATH=/usr/local/opt/openssl/lib
 endif
 
+ifneq ($(TARGET_KERNEL_ADDITIONAL_FLAGS),)
+  MAKE_FLAGS += $(TARGET_KERNEL_ADDITIONAL_FLAGS)
+endif
+
 ifeq ($(TARGET_KERNEL_MODULES),)
     TARGET_KERNEL_MODULES := INSTALLED_KERNEL_MODULES
 endif
-- 
2.17.1

