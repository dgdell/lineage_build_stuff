From b49ad5c955bad65c9e557219a42f3ddeb422ea9b Mon Sep 17 00:00:00 2001
From: Gabriele M <moto.falcon.git@gmail.com>
Date: Tue, 10 Apr 2018 18:35:12 +0200
Subject: [PATCH 05/11] repopick: Update SSH queries result to match HTTP
 queries

Needed after the recent repopick changes.

Change-Id: I14f57afefeb9579d1d9896d8dc4512645b5b68e9
---
 build/tools/repopick.py | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/build/tools/repopick.py b/build/tools/repopick.py
index bcdd3271..b6534da4 100755
--- a/build/tools/repopick.py
+++ b/build/tools/repopick.py
@@ -84,13 +84,16 @@ def fetch_query_via_ssh(remote_url, query):
                 'current_revision': data['currentPatchSet']['revision'],
                 'number': int(data['number']),
                 'revisions': {patch_set['revision']: {
-                    'number': int(patch_set['number']),
+                    '_number': int(patch_set['number']),
                     'fetch': {
                         'ssh': {
                             'ref': patch_set['ref'],
                             'url': 'ssh://{0}:{1}/{2}'.format(userhost, port, data['project'])
                         }
-                    }
+                    },
+                    'commit': {
+                        'parents': [{ 'commit': parent } for parent in patch_set['parents']]
+                    },
                 } for patch_set in data['patchSets']},
                 'subject': data['subject'],
                 'project': data['project'],
-- 
2.17.0

