From 91646fb24cc5b8bf55e6563fb8a72861a492b80f Mon Sep 17 00:00:00 2001
From: T H <socialentry@gmail.com>
Date: Thu, 2 Aug 2018 17:06:04 -0400
Subject: [PATCH 2/3] klte-common: Use sensors MultiHAL

Change-Id: I527e72e2e0419931ba21137826774f5b65299f92
---
 common-proprietary-files.txt | 2 +-
 configs/sensors/_hals.conf   | 1 +
 klte.mk                      | 7 +++++++
 3 files changed, 9 insertions(+), 1 deletion(-)
 create mode 100644 configs/sensors/_hals.conf

diff --git a/common-proprietary-files.txt b/common-proprietary-files.txt
index 82764d4..b5c3999 100644
--- a/common-proprietary-files.txt
+++ b/common-proprietary-files.txt
@@ -269,7 +269,7 @@ bin/rmt_storage:vendor/bin/rmt_storage|000ddcabfc9416e9a27ba6d04860cc14b6803cdd
 vendor/lib/libril-qcril-hook-oem.so|6a73ed46f4fbcb283eea5fb44b24a7d14522bfe5
 
 # Sensors
-lib/hw/sensors.msm8974.so:vendor/lib/hw/sensors.msm8974.so|48c6112bc4097e9176fcd53bf3f7ba0d643b27aa
+lib/hw/sensors.msm8974.so:vendor/lib/hw/sensors.vendor.msm8974.so|48c6112bc4097e9176fcd53bf3f7ba0d643b27aa
 lib/libhr.so:vendor/lib/libhr.so
 
 # Time services
diff --git a/configs/sensors/_hals.conf b/configs/sensors/_hals.conf
new file mode 100644
index 0000000..644e254
--- /dev/null
+++ b/configs/sensors/_hals.conf
@@ -0,0 +1 @@
+/vendor/lib/hw/sensors.vendor.msm8974.so
\ No newline at end of file
diff --git a/klte.mk b/klte.mk
index dd4936a..527aa13 100644
--- a/klte.mk
+++ b/klte.mk
@@ -95,6 +95,13 @@ PRODUCT_PACKAGES += \
     init.qcom.usb.rc \
     ueventd.qcom.rc
 
+# Sensors
+PRODUCT_PACKAGES += \
+    sensors.msm8974
+
+PRODUCT_COPY_FILES += \
+    $(LOCAL_PATH)/configs/sensors/_hals.conf:$(TARGET_COPY_OUT_VENDOR)/etc/sensors/_hals.conf
+
 # Thermal
 PRODUCT_COPY_FILES += \
     $(LOCAL_PATH)/configs/thermal-engine-8974.conf:system/vendor/etc/thermal-engine-8974.conf
-- 
2.17.1

