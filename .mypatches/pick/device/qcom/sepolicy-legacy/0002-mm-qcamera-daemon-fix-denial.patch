From fa3a579eeb8769a389e9ba131f73e00c643bbd64 Mon Sep 17 00:00:00 2001
From: Vladimir Oltean <olteanv@gmail.com>
Date: Wed, 26 Sep 2018 21:18:06 +0300
Subject: [PATCH 02/18] mm-qcamera-daemon: fix denial

avc: denied { use } for path="anon_inode:dmabuf" dev="anon_inodefs"
     ino=11426 scontext=u:r:mm-qcamerad:s0
     tcontext=u:r:platform_app:s0:c512,c768 tclass=fd

Change-Id: I1de19511563236ee4a7a0bd395f711e1bcb189c4
Signed-off-by: Vladimir Oltean <olteanv@gmail.com>
---
 common/mm-qcamerad.te | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/common/mm-qcamerad.te b/common/mm-qcamerad.te
index 70e14d1..c4ce449 100644
--- a/common/mm-qcamerad.te
+++ b/common/mm-qcamerad.te
@@ -19,6 +19,8 @@ userdebug_or_eng(`
   set_prop(mm-qcamerad, camera_prop)
 ')
 
+allow mm-qcamerad platform_app:fd use;
+
 #Communicate with user land process through domain socket
 #allow mm-qcamerad camera_socket:sock_file { create unlink write };
 allow mm-qcamerad camera_socket:dir w_dir_perms;
-- 
2.17.1

