From 85351bb5e20b027a7b2d6a1a586503a25939b379 Mon Sep 17 00:00:00 2001
From: Michael Bestas <mkbestas@lineageos.org>
Date: Thu, 25 Jan 2018 22:33:21 +0200
Subject: [PATCH 4/4] legacy: Allow qcom power HAL to interact with perfd

Change-Id: Ib43f7575cefdeddcc02a3a6240c6f38aef18300d
---
 legacy-common/hal_power_default.te | 4 ++++
 legacy-common/mpdecision.te        | 2 ++
 2 files changed, 6 insertions(+)
 create mode 100644 legacy-common/hal_power_default.te

diff --git a/legacy-common/hal_power_default.te b/legacy-common/hal_power_default.te
new file mode 100644
index 0000000..1267d84
--- /dev/null
+++ b/legacy-common/hal_power_default.te
@@ -0,0 +1,4 @@
+allow hal_power_default mpctl_socket:dir search;
+allow hal_power_default mpctl_socket:sock_file write;
+
+allow hal_power_default mpdecision:unix_stream_socket connectto;
diff --git a/legacy-common/mpdecision.te b/legacy-common/mpdecision.te
index 953856c..6ac509c 100644
--- a/legacy-common/mpdecision.te
+++ b/legacy-common/mpdecision.te
@@ -3,3 +3,5 @@ allow mpdecision sysfs_kgsl:file rw_file_perms;
 allow mpdecision sysfs_runtime_status:file r_file_perms;
 
 get_prop(mpdecision, freq_prop)
+
+r_dir_file(mpdecision, hal_power_default)
-- 
2.7.4

