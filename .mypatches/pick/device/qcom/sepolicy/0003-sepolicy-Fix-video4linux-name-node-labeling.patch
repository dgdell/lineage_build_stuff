From 724d4f2db16a247a91bb05ba0d32c30cdd168f69 Mon Sep 17 00:00:00 2001
From: Bruno Martins <bgcngm@gmail.com>
Date: Mon, 4 Jun 2018 21:02:56 +0100
Subject: [PATCH 3/5] sepolicy: Fix video4linux "name" node labeling

Do u even regex, br0?

Change-Id: If907448d394f967268c9f72051bec5a47220087b
---
 common/file_contexts        | 8 ++++----
 legacy-common/file_contexts | 4 ++--
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/common/file_contexts b/common/file_contexts
index 48b3edf..2839cea 100644
--- a/common/file_contexts
+++ b/common/file_contexts
@@ -435,11 +435,11 @@
 /sys/devices(/platform)?/soc/[a-z0-9]+\.qcom,mdss_mdp/bw_mode_bitmap   u:object_r:sysfs_graphics:s0
 /sys/devices/soc\.0/[a-z0-9]+\.qcom,mdss_mdp/bw_mode_bitmap         u:object_r:sysfs_graphics:s0
 /sys/devices/soc\.0/[a-z0-9]+\.qcom,mdss_mdp/caps                   u:object_r:sysfs_graphics:s0
-/sys/devices(/platform)?/soc/[a-z0-9]+\.qcom,mdss_cam/video4linux/video[0-33]/name(/.*)?   u:object_r:sysfs_graphics:s0
-/sys/devices(/platform)?/soc/[a-z0-9]+\.qcom,mdss_rotator/video4linux/video[0-33]/name(/.*)?   u:object_r:sysfs_graphics:s0
+/sys/devices(/platform)?/soc/[a-z0-9]+\.qcom,mdss_cam/video4linux/video[0-9]+/name(/.*)?   u:object_r:sysfs_graphics:s0
+/sys/devices(/platform)?/soc/[a-z0-9]+\.qcom,mdss_rotator/video4linux/video[0-9]+/name(/.*)?   u:object_r:sysfs_graphics:s0
 /sys/devices(/platform)?/soc/[a-z0-9]+\.qcom,mdss_rotator/caps      u:object_r:sysfs_graphics:s0
-/sys/devices(/platform)?/soc/[a-z0-9]+\.qcom,vidc/video4linux/video[0-33]/name(/.*)?   u:object_r:sysfs_graphics:s0
-/sys/devices(/platform)?/soc/[a-z0-9]+\.qcom,cci/[a-z0-9]+\.qcom,cci:qcom,camera@[0-2]/video4linux/video[0-33]/name(/.*)?   u:object_r:sysfs_graphics:s0
+/sys/devices(/platform)?/soc/[a-z0-9]+\.qcom,vidc/video4linux/video[0-9]+/name(/.*)?   u:object_r:sysfs_graphics:s0
+/sys/devices(/platform)?/soc/[a-z0-9]+\.qcom,cci/[a-z0-9]+\.qcom,cci:qcom,camera@[0-2]/video4linux/video[0-9]+/name(/.*)?   u:object_r:sysfs_graphics:s0
 /sys/bus/platform/drivers/xhci_msm_hsic(/.*)?                       u:object_r:sysfs_hsic:s0
 /sys/devices/msm_hsic_host/host_ready                               u:object_r:sysfs_hsic_host_rdy:s0
 /sys/bus/esoc(/.*)?                                                 u:object_r:sysfs_esoc:s0
diff --git a/legacy-common/file_contexts b/legacy-common/file_contexts
index dc0fe80..b6d7679 100644
--- a/legacy-common/file_contexts
+++ b/legacy-common/file_contexts
@@ -39,8 +39,8 @@
 
 # Camera
 /data/fdAlbum                                                                 u:object_r:camera_data_file:s0
-/sys/devices(/platform)?/soc\.0/[0-9a-f]+\.qcom,msm-cam/video4linux/video[0-33]/name(/.*)?  u:object_r:sysfs_graphics:s0
-/sys/devices(/platform)?/soc\.0/[0-9a-f]+\.qcom,cci/[0-9]+\.qcom,camera/video4linux/video[0-33]/name(/.*)?  u:object_r:sysfs_graphics:s0
+/sys/devices(/platform)?/soc\.0/[0-9a-f]+\.qcom,msm-cam/video4linux/video[0-9]+/name(/.*)?  u:object_r:sysfs_graphics:s0
+/sys/devices(/platform)?/soc\.0/[0-9a-f]+\.qcom,cci/[0-9]+\.qcom,camera/video4linux/video[0-9]+/name(/.*)?  u:object_r:sysfs_graphics:s0
 
 # UIO
 /sys/devices(/platform)?/soc\.0/[0-9a-f]+\.qcom,msm-core/uio/uio[0-9]+(/.*)?  u:object_r:sysfs_uio_file:s0
-- 
2.17.0

