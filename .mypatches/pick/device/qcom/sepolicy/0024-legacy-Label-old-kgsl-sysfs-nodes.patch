From 1e20a2fef5f607c9e6296f5b96f464fe4deafb04 Mon Sep 17 00:00:00 2001
From: Michael Bestas <mkbestas@lineageos.org>
Date: Tue, 16 Jan 2018 20:20:48 +0200
Subject: [PATCH 24/25] legacy: Label old kgsl sysfs nodes

* Required for older kernels like msm8974 3.4

Change-Id: I8e25e6b2a70f698adc387bc8717e4afe110413d5
---
 legacy-common/file_contexts | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/legacy-common/file_contexts b/legacy-common/file_contexts
index 05af641..f924b32 100644
--- a/legacy-common/file_contexts
+++ b/legacy-common/file_contexts
@@ -51,3 +51,8 @@
 /sys/devices/[0-9a-f]+\.mdm_sharedmem/uio/uio[0-9]+(/.*)?           u:object_r:sysfs_uio_file:s0
 /sys/devices/[0-9a-f]+\.bimc_sharedmem/uio/uio[0-9]+(/.*)?          u:object_r:sysfs_uio_file:s0
 /sys/devices/[0-9a-f]+\.oem_data_sharedmem/uio/uio[0-9]+(/.*)?      u:object_r:sysfs_uio_file:s0
+
+# GPU
+/sys/devices/[a-f0-9]+\.qcom,kgsl-3d0/kgsl/kgsl-3d0(/.*)?                     u:object_r:sysfs_kgsl:s0
+/sys/devices/[a-f0-9]+\.qcom,kgsl-3d0/devfreq/[a-f0-9]+.qcom,kgsl-3d0(/.*)?   u:object_r:sysfs_kgsl:s0
+/sys/devices/[a-f0-9]+\.qcom,kgsl-3d0/kgsl/kgsl-3d0/gpuclk                    u:object_r:sysfs_kgsl_gpuclk:s0
-- 
2.7.4

