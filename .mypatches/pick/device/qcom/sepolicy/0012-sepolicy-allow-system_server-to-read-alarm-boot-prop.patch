From ee0ea3ddb8e0dd9ad34daf124409b5c887bb8a70 Mon Sep 17 00:00:00 2001
From: Demon000 <demonsingur@gmail.com>
Date: Wed, 10 Jan 2018 20:52:45 +0200
Subject: [PATCH 12/13] sepolicy: allow system_server to read alarm boot prop

Fixes the following denial.

avc: denied { read } for comm="system_server"
name="u:object_r:alarm_boot_prop:s0"
dev="tmpfs"
ino=10769
scontext=u:r:system_server:s0
tcontext=u:object_r:alarm_boot_prop:s0
tclass=file

Change-Id: I142c92d9785bd79fba7d50e70ab4d689bb2ba7d5
---
 common/system_server.te | 1 +
 1 file changed, 1 insertion(+)

diff --git a/common/system_server.te b/common/system_server.te
index 31eff2c..f28e852 100644
--- a/common/system_server.te
+++ b/common/system_server.te
@@ -153,6 +153,7 @@ allow system_server system_file:system module_load;
 
 allow system_server persist_alarm_file:dir rw_dir_perms;
 allow system_server persist_alarm_file:file { rw_file_perms create };
+get_prop(system_server, alarm_boot_prop)
 userdebug_or_eng(`
   diag_use(system_server)
 ')
-- 
2.7.4

