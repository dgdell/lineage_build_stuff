From 82d124a0b533e8908eb8b44fab499abfe7123a42 Mon Sep 17 00:00:00 2001
From: razorloves <razorloves@gmail.com>
Date: Wed, 3 Oct 2018 11:09:43 -0500
Subject: [PATCH 3/3] audio: Use generated kernel headers

Change-Id: I0a7775ceda07b9090a7ea04e389559d32fbb3618

# Conflicts:
#	post_proc/Android.mk
---
 hal/Android.mk       | 2 ++
 post_proc/Android.mk | 7 +++++++
 2 files changed, 9 insertions(+)

diff --git a/hal/Android.mk b/hal/Android.mk
index f855dbc58..5b63d84a0 100644
--- a/hal/Android.mk
+++ b/hal/Android.mk
@@ -206,6 +206,8 @@ LOCAL_SRC_FILES += audio_perf.cpp
 
 LOCAL_HEADER_LIBRARIES += libhardware_headers
 
+LOCAL_HEADER_LIBRARIES += generated_kernel_headers
+
 LOCAL_MODULE := audio.primary.$(TARGET_BOARD_PLATFORM)
 
 LOCAL_MODULE_RELATIVE_PATH := hw
diff --git a/post_proc/Android.mk b/post_proc/Android.mk
index b9cd903f8..540206286 100644
--- a/post_proc/Android.mk
+++ b/post_proc/Android.mk
@@ -42,6 +42,8 @@ LOCAL_HEADER_LIBRARIES += libsystem_headers
 LOCAL_C_INCLUDES += $(TARGET_OUT_INTERMEDIATES)/KERNEL_OBJ/usr/include
 LOCAL_ADDITIONAL_DEPENDENCIES := $(TARGET_OUT_INTERMEDIATES)/KERNEL_OBJ/usr
 
+LOCAL_HEADER_LIBRARIES += generated_kernel_headers
+
 include $(BUILD_SHARED_LIBRARY)
 endif
 
@@ -78,6 +80,8 @@ LOCAL_HEADER_LIBRARIES += libsystem_headers
 LOCAL_C_INCLUDES += $(TARGET_OUT_INTERMEDIATES)/KERNEL_OBJ/usr/include
 LOCAL_ADDITIONAL_DEPENDENCIES := $(TARGET_OUT_INTERMEDIATES)/KERNEL_OBJ/usr
 
+LOCAL_HEADER_LIBRARIES += generated_kernel_headers
+
 include $(BUILD_SHARED_LIBRARY)
 
 endif
@@ -111,6 +115,9 @@ LOCAL_C_INCLUDES := \
 
 LOCAL_HEADER_LIBRARIES += libhardware_headers
 LOCAL_HEADER_LIBRARIES += libsystem_headers
+
+LOCAL_HEADER_LIBRARIES += generated_kernel_headers
+
 include $(BUILD_SHARED_LIBRARY)
 
 endif
-- 
2.17.1

