From 59d966f736b69a158138ea59b91621caa01e9d08 Mon Sep 17 00:00:00 2001
From: Ricardo Cerqueira <cyanogenmod@cerqueira.org>
Date: Sun, 19 Jan 2014 19:07:46 +0000
Subject: [PATCH 11/74] Allow library to be used by apps directly

Change-Id: Ib74be626471d73817d644c7777a2b18a32712f8a
---
 Android.mk                    | 12 ++++++++++++
 qcom/fmradio/qcom.fmradio.xml |  5 +++++
 2 files changed, 17 insertions(+)
 create mode 100644 qcom/fmradio/qcom.fmradio.xml

diff --git a/Android.mk b/Android.mk
index 0841d85..8c8d2c8 100644
--- a/Android.mk
+++ b/Android.mk
@@ -11,8 +11,20 @@ LOCAL_JNI_SHARED_LIBRARIES := libqcomfm_jni
 LOCAL_SHARED_LIBRARIES := liblog
 LOCAL_MODULE:= qcom.fmradio
 
+LOCAL_ADDITIONAL_DEPENDENCIES := qcom.fmradio.xml
+
 include $(BUILD_JAVA_LIBRARY)
 
+include $(CLEAR_VARS)
+
+LOCAL_MODULE := qcom.fmradio.xml
+LOCAL_SRC_FILES := qcom/fmradio/$(LOCAL_MODULE)
+LOCAL_MODULE_TAGS := optional
+LOCAL_MODULE_CLASS := ETC
+LOCAL_MODULE_PATH := $(TARGET_OUT)/etc/permissions
+
+include $(BUILD_PREBUILT)
+
 ifeq ($(BOARD_HAS_QCA_FM_SOC), "cherokee")
 LOCAL_CFLAGS += -DFM_SOC_TYPE_CHEROKEE
 endif
diff --git a/qcom/fmradio/qcom.fmradio.xml b/qcom/fmradio/qcom.fmradio.xml
new file mode 100644
index 0000000..6a55cc6
--- /dev/null
+++ b/qcom/fmradio/qcom.fmradio.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<permissions>
+    <library name="qcom.fmradio"
+            file="/system/framework/qcom.fmradio.jar" />
+</permissions>
-- 
2.17.1

