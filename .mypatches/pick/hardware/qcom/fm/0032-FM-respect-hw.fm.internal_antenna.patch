From ea588d7f48e49af35af5cef47531618556e185f5 Mon Sep 17 00:00:00 2001
From: Dhruv Paranjape <lord.dhruv@gmail.com>
Date: Thu, 14 May 2015 20:49:26 +0800
Subject: [PATCH 32/74] FM: respect hw.fm.internal_antenna

PS2: Patch from here: http://forum.xda-developers.com/showpost.php?p=60580714&postcount=86

Change-Id: Ic3104de252bac108c925e7cd5f50d9e89ca63779
---
 fmapp2/src/com/caf/fmradio/FMRadioService.java | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

diff --git a/fmapp2/src/com/caf/fmradio/FMRadioService.java b/fmapp2/src/com/caf/fmradio/FMRadioService.java
index c1cedab..5ce91ae 100644
--- a/fmapp2/src/com/caf/fmradio/FMRadioService.java
+++ b/fmapp2/src/com/caf/fmradio/FMRadioService.java
@@ -2403,13 +2403,11 @@ public class FMRadioService extends Service
             bStatus = enableAutoAF(FmSharedPreferences.getAutoAFSwitch());
             Log.d(LOGTAG, "enableAutoAF done, Status :" +  bStatus);
 
-            /* There is no internal Antenna*/
-            bStatus = mReceiver.setInternalAntenna(false);
-            Log.d(LOGTAG, "setInternalAntenna done, Status :" +  bStatus);
-
-            /* Read back to verify the internal Antenna mode*/
             readInternalAntennaAvailable();
 
+            bStatus = mReceiver.setInternalAntenna(mInternalAntennaAvailable);
+            Log.d(LOGTAG, "setInternalAntenna done, Status :" +  bStatus);
+
             startNotification();
             bStatus = true;
          }
-- 
2.17.1

