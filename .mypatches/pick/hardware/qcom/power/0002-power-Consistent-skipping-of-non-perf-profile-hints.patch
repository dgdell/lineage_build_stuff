From 6557f8014be9f835d02d54a259a7e558f94a3cbe Mon Sep 17 00:00:00 2001
From: Michael Bestas <mkbestas@lineageos.org>
Date: Mon, 26 Mar 2018 05:21:23 +0300
Subject: [PATCH 2/2] power: Consistent skipping of non perf profile hints

Change-Id: I9129de9046df7b922af7b32eac94167776f820cf
---
 power-8996.c | 8 +++++---
 power-8998.c | 8 +++++---
 2 files changed, 10 insertions(+), 6 deletions(-)

diff --git a/power-8996.c b/power-8996.c
index 5eddefa..201fb63 100644
--- a/power-8996.c
+++ b/power-8996.c
@@ -266,11 +266,13 @@ int power_hint_override(power_hint_t hint, void *data)
         return HINT_HANDLED;
     }
 
-    /* Skip other hints in power save mode */
-    if (current_power_profile == PROFILE_POWER_SAVE)
+    // Skip other hints in high/low power modes
+    if (current_power_profile == PROFILE_POWER_SAVE ||
+            current_power_profile == PROFILE_HIGH_PERFORMANCE) {
         return HINT_HANDLED;
+    }
 
-    switch(hint) {
+    switch (hint) {
         case POWER_HINT_VIDEO_ENCODE:
             ret_val = process_video_encode_hint(data);
             break;
diff --git a/power-8998.c b/power-8998.c
index d5faa06..bb03ff5 100644
--- a/power-8998.c
+++ b/power-8998.c
@@ -260,11 +260,13 @@ int power_hint_override(power_hint_t hint, void *data)
         return HINT_HANDLED;
     }
 
-    /* Skip other hints in power save mode */
-    if (current_power_profile == PROFILE_POWER_SAVE)
+    // Skip other hints in high/low power modes
+    if (current_power_profile == PROFILE_POWER_SAVE ||
+            current_power_profile == PROFILE_HIGH_PERFORMANCE) {
         return HINT_HANDLED;
+    }
 
-    switch(hint) {
+    switch (hint) {
         case POWER_HINT_VIDEO_ENCODE:
             ret_val = process_video_encode_hint(data);
             break;
-- 
2.15.1

