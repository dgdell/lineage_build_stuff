From 2a715c10f1d53c3e68495dc39a05877bb3daff72 Mon Sep 17 00:00:00 2001
From: Chih-Hung Hsieh <chh@google.com>
Date: Tue, 2 Jan 2018 11:34:10 -0800
Subject: [PATCH 1/2] Add -Wno-error to compile with global -Werror.

Bug: 66996870
Test: normal builds.
Change-Id: Iee4ac5f95a2013c5eeac1c061889a593caf0ec36
---
 hal/Android.mk                         | 1 +
 mm-audio/aenc-aac/qdsp6/Android.mk     | 1 +
 mm-audio/aenc-amrnb/qdsp6/Android.mk   | 1 +
 mm-audio/aenc-evrc/qdsp6/Android.mk    | 1 +
 mm-audio/aenc-qcelp13/qdsp6/Android.mk | 1 +
 post_proc/Android.mk                   | 1 +
 visualizer/Android.mk                  | 1 +
 voice_processing/Android.mk            | 1 +
 8 files changed, 8 insertions(+)

diff --git a/hal/Android.mk b/hal/Android.mk
index ace5c207c..14ab5135c 100644
--- a/hal/Android.mk
+++ b/hal/Android.mk
@@ -37,6 +37,7 @@ LOCAL_SRC_FILES += audio_extn/audio_extn.c
 LOCAL_C_INCLUDES += $(TARGET_OUT_INTERMEDIATES)/KERNEL_OBJ/usr/include
 LOCAL_ADDITIONAL_DEPENDENCIES += $(TARGET_OUT_INTERMEDIATES)/KERNEL_OBJ/usr
 LOCAL_CFLAGS += -DUSE_VENDOR_EXTN
+LOCAL_CFLAGS += -Wno-error
 
 ifeq ($(strip $(AUDIO_FEATURE_ENABLED_ANC_HEADSET)),true)
     LOCAL_CFLAGS += -DANC_HEADSET_ENABLED
diff --git a/mm-audio/aenc-aac/qdsp6/Android.mk b/mm-audio/aenc-aac/qdsp6/Android.mk
index b22d4269f..5e88c3efe 100644
--- a/mm-audio/aenc-aac/qdsp6/Android.mk
+++ b/mm-audio/aenc-aac/qdsp6/Android.mk
@@ -30,6 +30,7 @@ LOCAL_MODULE            := libOmxAacEnc
 LOCAL_MODULE_TAGS       := optional
 LOCAL_VENDOR_MODULE     := true
 LOCAL_CFLAGS            := $(libOmxAacEnc-def)
+LOCAL_CFLAGS            += -Wno-error
 LOCAL_C_INCLUDES        := $(libOmxAacEnc-inc)
 LOCAL_PRELINK_MODULE    := false
 LOCAL_SHARED_LIBRARIES  := libutils liblog
diff --git a/mm-audio/aenc-amrnb/qdsp6/Android.mk b/mm-audio/aenc-amrnb/qdsp6/Android.mk
index ee092a95d..8c5ef1fd4 100644
--- a/mm-audio/aenc-amrnb/qdsp6/Android.mk
+++ b/mm-audio/aenc-amrnb/qdsp6/Android.mk
@@ -30,6 +30,7 @@ LOCAL_MODULE            := libOmxAmrEnc
 LOCAL_MODULE_TAGS       := optional
 LOCAL_VENDOR_MODULE     := true
 LOCAL_CFLAGS            := $(libOmxAmrEnc-def)
+LOCAL_CFLAGS            += -Wno-error
 LOCAL_C_INCLUDES        := $(libOmxAmrEnc-inc)
 LOCAL_PRELINK_MODULE    := false
 LOCAL_SHARED_LIBRARIES  := libutils liblog
diff --git a/mm-audio/aenc-evrc/qdsp6/Android.mk b/mm-audio/aenc-evrc/qdsp6/Android.mk
index c3afb611d..575b844e4 100644
--- a/mm-audio/aenc-evrc/qdsp6/Android.mk
+++ b/mm-audio/aenc-evrc/qdsp6/Android.mk
@@ -30,6 +30,7 @@ LOCAL_MODULE            := libOmxEvrcEnc
 LOCAL_MODULE_TAGS       := optional
 LOCAL_VENDOR_MODULE     := true
 LOCAL_CFLAGS            := $(libOmxEvrcEnc-def)
+LOCAL_CFLAGS            += -Wno-error
 LOCAL_C_INCLUDES        := $(libOmxEvrcEnc-inc)
 LOCAL_PRELINK_MODULE    := false
 LOCAL_SHARED_LIBRARIES  := libutils liblog
diff --git a/mm-audio/aenc-qcelp13/qdsp6/Android.mk b/mm-audio/aenc-qcelp13/qdsp6/Android.mk
index c48c23b0c..c8ca8a545 100644
--- a/mm-audio/aenc-qcelp13/qdsp6/Android.mk
+++ b/mm-audio/aenc-qcelp13/qdsp6/Android.mk
@@ -30,6 +30,7 @@ LOCAL_MODULE            := libOmxQcelp13Enc
 LOCAL_MODULE_TAGS       := optional
 LOCAL_VENDOR_MODULE     := true
 LOCAL_CFLAGS            := $(libOmxQcelp13Enc-def)
+LOCAL_CFLAGS            += -Wno-error
 LOCAL_C_INCLUDES        := $(libOmxQcelp13Enc-inc)
 LOCAL_PRELINK_MODULE    := false
 LOCAL_SHARED_LIBRARIES  := libutils liblog
diff --git a/post_proc/Android.mk b/post_proc/Android.mk
index 68be34289..ba3c27208 100644
--- a/post_proc/Android.mk
+++ b/post_proc/Android.mk
@@ -16,6 +16,7 @@ LOCAL_SRC_FILES:= \
 	effect_api.c
 
 LOCAL_CFLAGS+= -O2 -fvisibility=hidden
+LOCAL_CFLAGS+= -Wno-error
 
 LOCAL_SHARED_LIBRARIES := \
 	libcutils \
diff --git a/visualizer/Android.mk b/visualizer/Android.mk
index 3916df743..899b31f49 100644
--- a/visualizer/Android.mk
+++ b/visualizer/Android.mk
@@ -20,6 +20,7 @@ LOCAL_SRC_FILES:= \
 	offload_visualizer.c
 
 LOCAL_CFLAGS+= -O2 -fvisibility=hidden
+LOCAL_CFLAGS+= -Wno-error
 
 LOCAL_HEADER_LIBRARIES := \
 	libsystem_headers
diff --git a/voice_processing/Android.mk b/voice_processing/Android.mk
index 2f880213d..206a94524 100644
--- a/voice_processing/Android.mk
+++ b/voice_processing/Android.mk
@@ -22,5 +22,6 @@ LOCAL_SHARED_LIBRARIES := \
 LOCAL_SHARED_LIBRARIES += libdl
 
 LOCAL_CFLAGS += -fvisibility=hidden
+LOCAL_CFLAGS += -Wno-error
 
 include $(BUILD_SHARED_LIBRARY)
-- 
2.17.1

