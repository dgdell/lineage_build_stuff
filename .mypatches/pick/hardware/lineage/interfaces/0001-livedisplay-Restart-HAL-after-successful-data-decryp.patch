From 40fca9e64a3673327ca473aad21cdfa3621d9f23 Mon Sep 17 00:00:00 2001
From: Rashed Abdel-Tawab <rashed@linux.com>
Date: Tue, 3 Jul 2018 11:16:14 -0700
Subject: [PATCH] livedisplay: Restart HAL after successful data decryption

Change-Id: I7e78896132fcef74c642e7dd2e6b637dd5f0733a
Ref: BUGBASH-1908
---
 .../default/vendor.lineage.livedisplay@1.0-service-legacymm.rc | 3 +++
 .../1.0/default/vendor.lineage.livedisplay@1.0-service-sdm.rc  | 3 +++
 2 files changed, 6 insertions(+)

diff --git a/livedisplay/1.0/default/vendor.lineage.livedisplay@1.0-service-legacymm.rc b/livedisplay/1.0/default/vendor.lineage.livedisplay@1.0-service-legacymm.rc
index 4cc81ca..13db37c 100644
--- a/livedisplay/1.0/default/vendor.lineage.livedisplay@1.0-service-legacymm.rc
+++ b/livedisplay/1.0/default/vendor.lineage.livedisplay@1.0-service-legacymm.rc
@@ -2,3 +2,6 @@ service livedisplay-hal-1-0 /vendor/bin/hw/vendor.lineage.livedisplay@1.0-servic
     class hal
     user system
     group system
+
+on property:vold.decrypt=trigger_restart_framework
+    restart livedisplay-hal-1-0
diff --git a/livedisplay/1.0/default/vendor.lineage.livedisplay@1.0-service-sdm.rc b/livedisplay/1.0/default/vendor.lineage.livedisplay@1.0-service-sdm.rc
index 1ef94eb..6922011 100644
--- a/livedisplay/1.0/default/vendor.lineage.livedisplay@1.0-service-sdm.rc
+++ b/livedisplay/1.0/default/vendor.lineage.livedisplay@1.0-service-sdm.rc
@@ -2,3 +2,6 @@ service livedisplay-hal-1-0 /vendor/bin/hw/vendor.lineage.livedisplay@1.0-servic
     class hal
     user system
     group system
+
+on property:vold.decrypt=trigger_restart_framework
+    restart livedisplay-hal-1-0
-- 
2.17.1

