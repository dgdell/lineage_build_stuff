From ba4aedae135c9922a521a245c44f94b5e3c395b9 Mon Sep 17 00:00:00 2001
From: Demon Singur <demonsingur@gmail.com>
Date: Sun, 29 Apr 2018 16:16:47 +0000
Subject: [PATCH 2/4] lineage/interfaces: extend android.hardware.vibrator@1.0

Change-Id: I1722d1c9f0a8bdfb18c73ad86f20e2b5a1c36aac
---
 vibrator/1.0/Android.bp    | 89 ++++++++++++++++++++++++++++++++++++++
 vibrator/1.0/Android.mk    | 80 ++++++++++++++++++++++++++++++++++
 vibrator/1.0/IVibrator.hal | 25 +++++++++++
 vibrator/Android.bp        |  1 +
 4 files changed, 195 insertions(+)
 create mode 100644 vibrator/1.0/Android.bp
 create mode 100644 vibrator/1.0/Android.mk
 create mode 100644 vibrator/1.0/IVibrator.hal

diff --git a/vibrator/1.0/Android.bp b/vibrator/1.0/Android.bp
new file mode 100644
index 0000000..250d0fd
--- /dev/null
+++ b/vibrator/1.0/Android.bp
@@ -0,0 +1,89 @@
+// This file is autogenerated by hidl-gen. Do not edit manually.
+
+filegroup {
+    name: "vendor.lineage.vibrator@1.0_hal",
+    srcs: [
+        "IVibrator.hal",
+    ],
+}
+
+genrule {
+    name: "vendor.lineage.vibrator@1.0_genc++",
+    tools: ["hidl-gen"],
+    cmd: "$(location hidl-gen) -o $(genDir) -Lc++-sources -randroid.hardware:hardware/interfaces -randroid.hidl:system/libhidl/transport -rvendor.lineage:hardware/lineage/interfaces vendor.lineage.vibrator@1.0",
+    srcs: [
+        ":vendor.lineage.vibrator@1.0_hal",
+    ],
+    out: [
+        "vendor/lineage/vibrator/1.0/VibratorAll.cpp",
+    ],
+}
+
+genrule {
+    name: "vendor.lineage.vibrator@1.0_genc++_headers",
+    tools: ["hidl-gen"],
+    cmd: "$(location hidl-gen) -o $(genDir) -Lc++-headers -randroid.hardware:hardware/interfaces -randroid.hidl:system/libhidl/transport -rvendor.lineage:hardware/lineage/interfaces vendor.lineage.vibrator@1.0",
+    srcs: [
+        ":vendor.lineage.vibrator@1.0_hal",
+    ],
+    out: [
+        "vendor/lineage/vibrator/1.0/IVibrator.h",
+        "vendor/lineage/vibrator/1.0/IHwVibrator.h",
+        "vendor/lineage/vibrator/1.0/BnHwVibrator.h",
+        "vendor/lineage/vibrator/1.0/BpHwVibrator.h",
+        "vendor/lineage/vibrator/1.0/BsVibrator.h",
+    ],
+}
+
+cc_library {
+    name: "vendor.lineage.vibrator@1.0",
+    defaults: ["hidl-module-defaults"],
+    generated_sources: ["vendor.lineage.vibrator@1.0_genc++"],
+    generated_headers: ["vendor.lineage.vibrator@1.0_genc++_headers"],
+    export_generated_headers: ["vendor.lineage.vibrator@1.0_genc++_headers"],
+    vendor_available: true,
+    vndk: {
+        enabled: true,
+    },
+    shared_libs: [
+        "libhidlbase",
+        "libhidltransport",
+        "libhwbinder",
+        "liblog",
+        "libutils",
+        "libcutils",
+        "android.hardware.vibrator@1.0",
+    ],
+    export_shared_lib_headers: [
+        "libhidlbase",
+        "libhidltransport",
+        "libhwbinder",
+        "libutils",
+        "android.hardware.vibrator@1.0",
+    ],
+}
+
+cc_library {
+    name: "vendor.lineage.vibrator@1.0_vendor",
+    defaults: ["hidl-module-defaults"],
+    generated_sources: ["vendor.lineage.vibrator@1.0_genc++"],
+    generated_headers: ["vendor.lineage.vibrator@1.0_genc++_headers"],
+    export_generated_headers: ["vendor.lineage.vibrator@1.0_genc++_headers"],
+    vendor: true,
+    shared_libs: [
+        "libhidlbase",
+        "libhidltransport",
+        "libhwbinder",
+        "liblog",
+        "libutils",
+        "libcutils",
+        "android.hardware.vibrator@1.0",
+    ],
+    export_shared_lib_headers: [
+        "libhidlbase",
+        "libhidltransport",
+        "libhwbinder",
+        "libutils",
+        "android.hardware.vibrator@1.0",
+    ],
+}
diff --git a/vibrator/1.0/Android.mk b/vibrator/1.0/Android.mk
new file mode 100644
index 0000000..1b66b8f
--- /dev/null
+++ b/vibrator/1.0/Android.mk
@@ -0,0 +1,80 @@
+# This file is autogenerated by hidl-gen. Do not edit manually.
+
+LOCAL_PATH := $(call my-dir)
+
+################################################################################
+
+include $(CLEAR_VARS)
+LOCAL_MODULE := vendor.lineage.vibrator-V1.0-java
+LOCAL_MODULE_CLASS := JAVA_LIBRARIES
+
+intermediates := $(call local-generated-sources-dir, COMMON)
+
+HIDL := $(HOST_OUT_EXECUTABLES)/hidl-gen$(HOST_EXECUTABLE_SUFFIX)
+
+LOCAL_JAVA_LIBRARIES := \
+    android.hardware.vibrator-V1.0-java \
+    android.hidl.base-V1.0-java \
+
+
+#
+# Build IVibrator.hal
+#
+GEN := $(intermediates)/vendor/lineage/vibrator/V1_0/IVibrator.java
+$(GEN): $(HIDL)
+$(GEN): PRIVATE_HIDL := $(HIDL)
+$(GEN): PRIVATE_DEPS := $(LOCAL_PATH)/IVibrator.hal
+$(GEN): PRIVATE_OUTPUT_DIR := $(intermediates)
+$(GEN): PRIVATE_CUSTOM_TOOL = \
+        $(PRIVATE_HIDL) -o $(PRIVATE_OUTPUT_DIR) \
+        -Ljava \
+        -randroid.hardware:hardware/interfaces \
+        -randroid.hidl:system/libhidl/transport \
+        -rvendor.lineage:hardware/lineage/interfaces \
+        vendor.lineage.vibrator@1.0::IVibrator
+
+$(GEN): $(LOCAL_PATH)/IVibrator.hal
+	$(transform-generated-source)
+LOCAL_GENERATED_SOURCES += $(GEN)
+include $(BUILD_JAVA_LIBRARY)
+
+
+################################################################################
+
+include $(CLEAR_VARS)
+LOCAL_MODULE := vendor.lineage.vibrator-V1.0-java-static
+LOCAL_MODULE_CLASS := JAVA_LIBRARIES
+
+intermediates := $(call local-generated-sources-dir, COMMON)
+
+HIDL := $(HOST_OUT_EXECUTABLES)/hidl-gen$(HOST_EXECUTABLE_SUFFIX)
+
+LOCAL_STATIC_JAVA_LIBRARIES := \
+    android.hardware.vibrator-V1.0-java-static \
+    android.hidl.base-V1.0-java-static \
+
+
+#
+# Build IVibrator.hal
+#
+GEN := $(intermediates)/vendor/lineage/vibrator/V1_0/IVibrator.java
+$(GEN): $(HIDL)
+$(GEN): PRIVATE_HIDL := $(HIDL)
+$(GEN): PRIVATE_DEPS := $(LOCAL_PATH)/IVibrator.hal
+$(GEN): PRIVATE_OUTPUT_DIR := $(intermediates)
+$(GEN): PRIVATE_CUSTOM_TOOL = \
+        $(PRIVATE_HIDL) -o $(PRIVATE_OUTPUT_DIR) \
+        -Ljava \
+        -randroid.hardware:hardware/interfaces \
+        -randroid.hidl:system/libhidl/transport \
+        -rvendor.lineage:hardware/lineage/interfaces \
+        vendor.lineage.vibrator@1.0::IVibrator
+
+$(GEN): $(LOCAL_PATH)/IVibrator.hal
+	$(transform-generated-source)
+LOCAL_GENERATED_SOURCES += $(GEN)
+include $(BUILD_STATIC_JAVA_LIBRARY)
+
+
+
+include $(call all-makefiles-under,$(LOCAL_PATH))
diff --git a/vibrator/1.0/IVibrator.hal b/vibrator/1.0/IVibrator.hal
new file mode 100644
index 0000000..a29f683
--- /dev/null
+++ b/vibrator/1.0/IVibrator.hal
@@ -0,0 +1,25 @@
+/*
+ * Copyright (C) 2018 The Android Open Source Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package vendor.lineage.vibrator@1.0;
+
+import android.hardware.vibrator@1.0;
+
+interface IVibrator extends android.hardware.vibrator@1.0::IVibrator {
+    getDefaultIntensity() generates (Status status, uint8_t defaultIntensity);
+    getIntensity() generates (Status status, uint8_t intensity);
+    setIntensity(uint8_t newIntensity) generates (Status status);
+};
diff --git a/vibrator/Android.bp b/vibrator/Android.bp
index 27fc83b..ba90f2c 100644
--- a/vibrator/Android.bp
+++ b/vibrator/Android.bp
@@ -1,4 +1,5 @@
 // This is an autogenerated file, do not edit.
 subdirs = [
+    "1.0",
     "1.0/default",
 ]
-- 
2.17.1

