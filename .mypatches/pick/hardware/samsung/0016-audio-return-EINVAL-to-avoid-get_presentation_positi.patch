From 5869cd357e9b0bd9dffe70ac207cda4ec266b73c Mon Sep 17 00:00:00 2001
From: Victor Lourme <l0w@protonmail.ch>
Date: Mon, 26 Mar 2018 19:36:07 +0200
Subject: [PATCH 16/35] audio: return EINVAL to avoid get_presentation_position
 spamming logs

Change-Id: I32ec0c5651395c7af3dc4b80d25204bf0fcc1977
---
 audio/audio_hw.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/audio/audio_hw.c b/audio/audio_hw.c
index 94650dc..9aa5989 100644
--- a/audio/audio_hw.c
+++ b/audio/audio_hw.c
@@ -3303,7 +3303,7 @@ static int out_get_presentation_position(const struct audio_stream_out *stream,
                                    uint64_t *frames, struct timespec *timestamp)
 {
     struct stream_out *out = (struct stream_out *)stream;
-    int ret = -1;
+    int ret = -EINVAL;
 
     lock_output_stream(out);
 
@@ -3342,7 +3342,6 @@ static int out_get_presentation_position(const struct audio_stream_out *stream,
                             ret = 0;
                             goto done;
                         }
-                        ret = -1;
                     }
                 }
             }
-- 
2.17.1

