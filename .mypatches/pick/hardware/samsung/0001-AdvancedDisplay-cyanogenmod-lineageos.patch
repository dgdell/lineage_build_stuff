From 52b8b794a366f156ce443de2dccee0548244260b Mon Sep 17 00:00:00 2001
From: micky387 <mickaelsaibi@free.fr>
Date: Wed, 27 Dec 2017 22:35:26 +0100
Subject: [PATCH] AdvancedDisplay: cyanogenmod -> lineageos

Change-Id: Ie6d64f0995f266d2dbe3e16c8032820cc5164c1f
---
 AdvancedDisplay/Android.mk                         |  2 +-
 AdvancedDisplay/AndroidManifest.xml                |  4 +-
 AdvancedDisplay/res/xml/screen_preferences.xml     |  4 +-
 .../settings/device/AdvancedDisplayActivity.java   | 31 ------------
 .../settings/device/AdvancedDisplayFragment.java   | 45 -----------------
 .../settings/device/BootCompletedReceiver.java     | 31 ------------
 .../com/cyanogenmod/settings/device/Constants.java | 22 --------
 .../cyanogenmod/settings/device/mDNIeNegative.java | 58 ----------------------
 .../cyanogenmod/settings/device/mDNIeScenario.java | 58 ----------------------
 .../settings/device/AdvancedDisplayActivity.java   | 31 ++++++++++++
 .../settings/device/AdvancedDisplayFragment.java   | 45 +++++++++++++++++
 .../settings/device/BootCompletedReceiver.java     | 31 ++++++++++++
 .../org/lineageos/settings/device/Constants.java   | 22 ++++++++
 .../lineageos/settings/device/mDNIeNegative.java   | 58 ++++++++++++++++++++++
 .../lineageos/settings/device/mDNIeScenario.java   | 58 ++++++++++++++++++++++
 15 files changed, 250 insertions(+), 250 deletions(-)
 delete mode 100644 AdvancedDisplay/src/com/cyanogenmod/settings/device/AdvancedDisplayActivity.java
 delete mode 100644 AdvancedDisplay/src/com/cyanogenmod/settings/device/AdvancedDisplayFragment.java
 delete mode 100644 AdvancedDisplay/src/com/cyanogenmod/settings/device/BootCompletedReceiver.java
 delete mode 100644 AdvancedDisplay/src/com/cyanogenmod/settings/device/Constants.java
 delete mode 100644 AdvancedDisplay/src/com/cyanogenmod/settings/device/mDNIeNegative.java
 delete mode 100644 AdvancedDisplay/src/com/cyanogenmod/settings/device/mDNIeScenario.java
 create mode 100644 AdvancedDisplay/src/org/lineageos/settings/device/AdvancedDisplayActivity.java
 create mode 100644 AdvancedDisplay/src/org/lineageos/settings/device/AdvancedDisplayFragment.java
 create mode 100644 AdvancedDisplay/src/org/lineageos/settings/device/BootCompletedReceiver.java
 create mode 100644 AdvancedDisplay/src/org/lineageos/settings/device/Constants.java
 create mode 100644 AdvancedDisplay/src/org/lineageos/settings/device/mDNIeNegative.java
 create mode 100644 AdvancedDisplay/src/org/lineageos/settings/device/mDNIeScenario.java

diff --git a/AdvancedDisplay/Android.mk b/AdvancedDisplay/Android.mk
index 3362e95..d972dc4 100644
--- a/AdvancedDisplay/Android.mk
+++ b/AdvancedDisplay/Android.mk
@@ -13,7 +13,7 @@ LOCAL_STATIC_JAVA_LIBRARIES := \
     android-support-v7-appcompat \
     android-support-v7-preference \
     android-support-v7-recyclerview \
-    org.cyanogenmod.platform.internal
+    org.lineageos.platform.internal
 
 LOCAL_PROGUARD_FLAG_FILES := proguard.flags
 
diff --git a/AdvancedDisplay/AndroidManifest.xml b/AdvancedDisplay/AndroidManifest.xml
index 82b1ad3..241b105 100644
--- a/AdvancedDisplay/AndroidManifest.xml
+++ b/AdvancedDisplay/AndroidManifest.xml
@@ -1,13 +1,13 @@
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
-    package="com.cyanogenmod.settings.device"
+    package="org.lineageos.settings.device"
     android:sharedUserId="android.uid.system">
 
     <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
 
     <application
         android:label="@string/app_name">
-        <receiver android:name="com.cyanogenmod.settings.device.BootCompletedReceiver">
+        <receiver android:name="org.lineageos.settings.device.BootCompletedReceiver">
             <intent-filter>
                 <action android:name="android.intent.action.BOOT_COMPLETED" />
                 <category android:name="android.intent.category.DEFAULT" />
diff --git a/AdvancedDisplay/res/xml/screen_preferences.xml b/AdvancedDisplay/res/xml/screen_preferences.xml
index 2223cdb..492f5a4 100644
--- a/AdvancedDisplay/res/xml/screen_preferences.xml
+++ b/AdvancedDisplay/res/xml/screen_preferences.xml
@@ -6,7 +6,7 @@
             android:title="@string/screen_colors_title">
 
         <!-- mDNIe Scenario modes -->
-        <com.cyanogenmod.settings.device.mDNIeScenario
+        <org.lineageos.settings.device.mDNIeScenario
                 android:key="mdnie_scenario"
                 android:title="@string/mdnie_scenario_title_head"
                 android:summary="@string/mdnie_scenario_summary_head"
@@ -15,7 +15,7 @@
                 android:defaultValue="0" />
 
         <!-- mDNIe Negative mode -->
-        <com.cyanogenmod.settings.device.mDNIeNegative
+        <org.lineageos.settings.device.mDNIeNegative
                 android:key="mdnie_negative"
                 android:title="@string/mdnie_negative_title_head"
                 android:summary="@string/mdnie_negative_summary_head"
diff --git a/AdvancedDisplay/src/com/cyanogenmod/settings/device/AdvancedDisplayActivity.java b/AdvancedDisplay/src/com/cyanogenmod/settings/device/AdvancedDisplayActivity.java
deleted file mode 100644
index 29ab9b6..0000000
--- a/AdvancedDisplay/src/com/cyanogenmod/settings/device/AdvancedDisplayActivity.java
+++ /dev/null
@@ -1,31 +0,0 @@
-/*
- * Copyright (C) 2017 The LineageOS Project
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.cyanogenmod.settings.device;
-
-import android.os.Bundle;
-
-import com.android.settingslib.drawer.SettingsDrawerActivity;
-
-public class AdvancedDisplayActivity extends SettingsDrawerActivity {
-
-    protected void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-
-        getFragmentManager().beginTransaction().replace(R.id.content_frame,
-                new AdvancedDisplayFragment()).commit();
-    }
-}
diff --git a/AdvancedDisplay/src/com/cyanogenmod/settings/device/AdvancedDisplayFragment.java b/AdvancedDisplay/src/com/cyanogenmod/settings/device/AdvancedDisplayFragment.java
deleted file mode 100644
index a2b7f7b..0000000
--- a/AdvancedDisplay/src/com/cyanogenmod/settings/device/AdvancedDisplayFragment.java
+++ /dev/null
@@ -1,45 +0,0 @@
-/*
- * Copyright (C) 2017 The LineageOS Project
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.cyanogenmod.settings.device;
-
-import android.content.res.Resources;
-import android.os.Bundle;
-import android.support.v14.preference.PreferenceFragment;
-
-import com.cyanogenmod.settings.device.R;
-
-import org.cyanogenmod.internal.util.FileUtils;
-
-public class AdvancedDisplayFragment extends PreferenceFragment {
-    private mDNIeScenario mmDNIeScenario;
-    private mDNIeNegative mmDNIeNegative;
-
-    @Override
-    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {
-        addPreferencesFromResource(R.xml.screen_preferences);
-        Resources res = getResources();
-
-        /* mDNIe */
-        mmDNIeScenario = (mDNIeScenario) findPreference(Constants.KEY_MDNIE_SCENARIO);
-        mmDNIeScenario.setEnabled(
-                FileUtils.isFileWritable(res.getString(R.string.mdnie_scenario_sysfs_file)));
-
-        mmDNIeNegative = (mDNIeNegative) findPreference(Constants.KEY_MDNIE_NEGATIVE);
-        mmDNIeNegative.setEnabled(
-                FileUtils.isFileWritable(res.getString(R.string.mdnie_negative_sysfs_file)));
-    }
-}
diff --git a/AdvancedDisplay/src/com/cyanogenmod/settings/device/BootCompletedReceiver.java b/AdvancedDisplay/src/com/cyanogenmod/settings/device/BootCompletedReceiver.java
deleted file mode 100644
index 9408f35..0000000
--- a/AdvancedDisplay/src/com/cyanogenmod/settings/device/BootCompletedReceiver.java
+++ /dev/null
@@ -1,31 +0,0 @@
-/*
- * Copyright (C) 2012 The CyanogenMod Project
- *               2017 The LineageOS Project
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.cyanogenmod.settings.device;
-
-import android.content.BroadcastReceiver;
-import android.content.Context;
-import android.content.Intent;
-
-public class BootCompletedReceiver extends BroadcastReceiver {
-
-    @Override
-    public void onReceive(Context context, Intent intent) {
-        mDNIeScenario.restore(context);
-        mDNIeNegative.restore(context);
-    }
-}
diff --git a/AdvancedDisplay/src/com/cyanogenmod/settings/device/Constants.java b/AdvancedDisplay/src/com/cyanogenmod/settings/device/Constants.java
deleted file mode 100644
index 5ce0473..0000000
--- a/AdvancedDisplay/src/com/cyanogenmod/settings/device/Constants.java
+++ /dev/null
@@ -1,22 +0,0 @@
-/*
- * Copyright (C) 2017 The LineageOS Project
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.cyanogenmod.settings.device;
-
-public class Constants {
-    static final String KEY_MDNIE_SCENARIO = "mdnie_scenario";
-    static final String KEY_MDNIE_NEGATIVE = "mdnie_negative";
-}
diff --git a/AdvancedDisplay/src/com/cyanogenmod/settings/device/mDNIeNegative.java b/AdvancedDisplay/src/com/cyanogenmod/settings/device/mDNIeNegative.java
deleted file mode 100644
index fc24e98..0000000
--- a/AdvancedDisplay/src/com/cyanogenmod/settings/device/mDNIeNegative.java
+++ /dev/null
@@ -1,58 +0,0 @@
-/*
- * Copyright (C) 2012 The CyanogenMod Project
- *               2017 The LineageOS Project
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.cyanogenmod.settings.device;
-
-import android.content.Context;
-import android.content.SharedPreferences;
-import android.support.v7.preference.ListPreference;
-import android.support.v7.preference.Preference;
-import android.support.v7.preference.Preference.OnPreferenceChangeListener;
-import android.support.v7.preference.PreferenceManager;
-import android.util.AttributeSet;
-
-import org.cyanogenmod.internal.util.FileUtils;
-
-public class mDNIeNegative extends ListPreference implements OnPreferenceChangeListener {
-
-    private static String FILE = null;
-
-    public mDNIeNegative(Context context, AttributeSet attrs) {
-        super(context, attrs);
-        this.setOnPreferenceChangeListener(this);
-        FILE = context.getResources().getString(R.string.mdnie_negative_sysfs_file);
-    }
-
-    /**
-     * Restore mdnie user mode setting from SharedPreferences. (Write to kernel.)
-     * @param context       The context to read the SharedPreferences from
-     */
-    public static void restore(Context context) {
-        FILE = context.getResources().getString(R.string.mdnie_negative_sysfs_file);
-        if (!FileUtils.isFileWritable(FILE)) {
-            return;
-        }
-
-        SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(context);
-        FileUtils.writeLine(FILE, sharedPrefs.getString(Constants.KEY_MDNIE_NEGATIVE, "0"));
-    }
-
-    public boolean onPreferenceChange(Preference preference, Object newValue) {
-        FileUtils.writeLine(FILE, (String) newValue);
-        return true;
-    }
-}
diff --git a/AdvancedDisplay/src/com/cyanogenmod/settings/device/mDNIeScenario.java b/AdvancedDisplay/src/com/cyanogenmod/settings/device/mDNIeScenario.java
deleted file mode 100644
index bd5a698..0000000
--- a/AdvancedDisplay/src/com/cyanogenmod/settings/device/mDNIeScenario.java
+++ /dev/null
@@ -1,58 +0,0 @@
-/*
- * Copyright (C) 2012 The CyanogenMod Project
- *               2017 The LineageOS Project
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.cyanogenmod.settings.device;
-
-import android.content.Context;
-import android.content.SharedPreferences;
-import android.support.v7.preference.ListPreference;
-import android.support.v7.preference.Preference;
-import android.support.v7.preference.Preference.OnPreferenceChangeListener;
-import android.support.v7.preference.PreferenceManager;
-import android.util.AttributeSet;
-
-import org.cyanogenmod.internal.util.FileUtils;
-
-public class mDNIeScenario extends ListPreference implements OnPreferenceChangeListener {
-
-    private static String FILE = null;
-
-    public mDNIeScenario(Context context, AttributeSet attrs) {
-        super(context,attrs);
-        this.setOnPreferenceChangeListener(this);
-        FILE = context.getResources().getString(R.string.mdnie_scenario_sysfs_file);
-    }
-
-    /**
-     * Restore mdnie "camera" setting from SharedPreferences. (Write to kernel.)
-     * @param context       The context to read the SharedPreferences from
-     */
-    public static void restore(Context context) {
-        FILE = context.getResources().getString(R.string.mdnie_scenario_sysfs_file);
-        if (!FileUtils.isFileWritable(FILE)) {
-            return;
-        }
-
-        SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(context);
-        FileUtils.writeLine(FILE, sharedPrefs.getString(Constants.KEY_MDNIE_SCENARIO, "0"));
-    }
-
-    public boolean onPreferenceChange(Preference preference, Object newValue) {
-        FileUtils.writeLine(FILE, (String) newValue);
-        return true;
-    }
-}
diff --git a/AdvancedDisplay/src/org/lineageos/settings/device/AdvancedDisplayActivity.java b/AdvancedDisplay/src/org/lineageos/settings/device/AdvancedDisplayActivity.java
new file mode 100644
index 0000000..82ce158
--- /dev/null
+++ b/AdvancedDisplay/src/org/lineageos/settings/device/AdvancedDisplayActivity.java
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C) 2017 The LineageOS Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.lineageos.settings.device;
+
+import android.os.Bundle;
+
+import com.android.settingslib.drawer.SettingsDrawerActivity;
+
+public class AdvancedDisplayActivity extends SettingsDrawerActivity {
+
+    protected void onCreate(Bundle savedInstanceState) {
+        super.onCreate(savedInstanceState);
+
+        getFragmentManager().beginTransaction().replace(R.id.content_frame,
+                new AdvancedDisplayFragment()).commit();
+    }
+}
diff --git a/AdvancedDisplay/src/org/lineageos/settings/device/AdvancedDisplayFragment.java b/AdvancedDisplay/src/org/lineageos/settings/device/AdvancedDisplayFragment.java
new file mode 100644
index 0000000..6d4c534
--- /dev/null
+++ b/AdvancedDisplay/src/org/lineageos/settings/device/AdvancedDisplayFragment.java
@@ -0,0 +1,45 @@
+/*
+ * Copyright (C) 2017 The LineageOS Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.lineageos.settings.device;
+
+import android.content.res.Resources;
+import android.os.Bundle;
+import android.support.v14.preference.PreferenceFragment;
+
+import org.lineageos.settings.device.R;
+
+import org.lineageos.internal.util.FileUtils;
+
+public class AdvancedDisplayFragment extends PreferenceFragment {
+    private mDNIeScenario mmDNIeScenario;
+    private mDNIeNegative mmDNIeNegative;
+
+    @Override
+    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {
+        addPreferencesFromResource(R.xml.screen_preferences);
+        Resources res = getResources();
+
+        /* mDNIe */
+        mmDNIeScenario = (mDNIeScenario) findPreference(Constants.KEY_MDNIE_SCENARIO);
+        mmDNIeScenario.setEnabled(
+                FileUtils.isFileWritable(res.getString(R.string.mdnie_scenario_sysfs_file)));
+
+        mmDNIeNegative = (mDNIeNegative) findPreference(Constants.KEY_MDNIE_NEGATIVE);
+        mmDNIeNegative.setEnabled(
+                FileUtils.isFileWritable(res.getString(R.string.mdnie_negative_sysfs_file)));
+    }
+}
diff --git a/AdvancedDisplay/src/org/lineageos/settings/device/BootCompletedReceiver.java b/AdvancedDisplay/src/org/lineageos/settings/device/BootCompletedReceiver.java
new file mode 100644
index 0000000..36a4270
--- /dev/null
+++ b/AdvancedDisplay/src/org/lineageos/settings/device/BootCompletedReceiver.java
@@ -0,0 +1,31 @@
+/*
+ * Copyright (C) 2012 The CyanogenMod Project
+ *               2017 The LineageOS Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.lineageos.settings.device;
+
+import android.content.BroadcastReceiver;
+import android.content.Context;
+import android.content.Intent;
+
+public class BootCompletedReceiver extends BroadcastReceiver {
+
+    @Override
+    public void onReceive(Context context, Intent intent) {
+        mDNIeScenario.restore(context);
+        mDNIeNegative.restore(context);
+    }
+}
diff --git a/AdvancedDisplay/src/org/lineageos/settings/device/Constants.java b/AdvancedDisplay/src/org/lineageos/settings/device/Constants.java
new file mode 100644
index 0000000..372cf50
--- /dev/null
+++ b/AdvancedDisplay/src/org/lineageos/settings/device/Constants.java
@@ -0,0 +1,22 @@
+/*
+ * Copyright (C) 2017 The LineageOS Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.lineageos.settings.device;
+
+public class Constants {
+    static final String KEY_MDNIE_SCENARIO = "mdnie_scenario";
+    static final String KEY_MDNIE_NEGATIVE = "mdnie_negative";
+}
diff --git a/AdvancedDisplay/src/org/lineageos/settings/device/mDNIeNegative.java b/AdvancedDisplay/src/org/lineageos/settings/device/mDNIeNegative.java
new file mode 100644
index 0000000..25d4199
--- /dev/null
+++ b/AdvancedDisplay/src/org/lineageos/settings/device/mDNIeNegative.java
@@ -0,0 +1,58 @@
+/*
+ * Copyright (C) 2012 The CyanogenMod Project
+ *               2017 The LineageOS Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.lineageos.settings.device;
+
+import android.content.Context;
+import android.content.SharedPreferences;
+import android.support.v7.preference.ListPreference;
+import android.support.v7.preference.Preference;
+import android.support.v7.preference.Preference.OnPreferenceChangeListener;
+import android.support.v7.preference.PreferenceManager;
+import android.util.AttributeSet;
+
+import org.lineageos.internal.util.FileUtils;
+
+public class mDNIeNegative extends ListPreference implements OnPreferenceChangeListener {
+
+    private static String FILE = null;
+
+    public mDNIeNegative(Context context, AttributeSet attrs) {
+        super(context, attrs);
+        this.setOnPreferenceChangeListener(this);
+        FILE = context.getResources().getString(R.string.mdnie_negative_sysfs_file);
+    }
+
+    /**
+     * Restore mdnie user mode setting from SharedPreferences. (Write to kernel.)
+     * @param context       The context to read the SharedPreferences from
+     */
+    public static void restore(Context context) {
+        FILE = context.getResources().getString(R.string.mdnie_negative_sysfs_file);
+        if (!FileUtils.isFileWritable(FILE)) {
+            return;
+        }
+
+        SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(context);
+        FileUtils.writeLine(FILE, sharedPrefs.getString(Constants.KEY_MDNIE_NEGATIVE, "0"));
+    }
+
+    public boolean onPreferenceChange(Preference preference, Object newValue) {
+        FileUtils.writeLine(FILE, (String) newValue);
+        return true;
+    }
+}
diff --git a/AdvancedDisplay/src/org/lineageos/settings/device/mDNIeScenario.java b/AdvancedDisplay/src/org/lineageos/settings/device/mDNIeScenario.java
new file mode 100644
index 0000000..9261f7c
--- /dev/null
+++ b/AdvancedDisplay/src/org/lineageos/settings/device/mDNIeScenario.java
@@ -0,0 +1,58 @@
+/*
+ * Copyright (C) 2012 The CyanogenMod Project
+ *               2017 The LineageOS Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.lineageos.settings.device;
+
+import android.content.Context;
+import android.content.SharedPreferences;
+import android.support.v7.preference.ListPreference;
+import android.support.v7.preference.Preference;
+import android.support.v7.preference.Preference.OnPreferenceChangeListener;
+import android.support.v7.preference.PreferenceManager;
+import android.util.AttributeSet;
+
+import org.lineageos.internal.util.FileUtils;
+
+public class mDNIeScenario extends ListPreference implements OnPreferenceChangeListener {
+
+    private static String FILE = null;
+
+    public mDNIeScenario(Context context, AttributeSet attrs) {
+        super(context,attrs);
+        this.setOnPreferenceChangeListener(this);
+        FILE = context.getResources().getString(R.string.mdnie_scenario_sysfs_file);
+    }
+
+    /**
+     * Restore mdnie "camera" setting from SharedPreferences. (Write to kernel.)
+     * @param context       The context to read the SharedPreferences from
+     */
+    public static void restore(Context context) {
+        FILE = context.getResources().getString(R.string.mdnie_scenario_sysfs_file);
+        if (!FileUtils.isFileWritable(FILE)) {
+            return;
+        }
+
+        SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(context);
+        FileUtils.writeLine(FILE, sharedPrefs.getString(Constants.KEY_MDNIE_SCENARIO, "0"));
+    }
+
+    public boolean onPreferenceChange(Preference preference, Object newValue) {
+        FileUtils.writeLine(FILE, (String) newValue);
+        return true;
+    }
+}
-- 
2.7.4

