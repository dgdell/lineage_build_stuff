From 3cb2caa887b3164bd7afa705094e6f2e2f7e5cfa Mon Sep 17 00:00:00 2001
From: Tom Marshall <tdm.code@gmail.com>
Date: Fri, 20 Apr 2018 23:30:52 +0200
Subject: [PATCH 2/2] recovery: Do not load time from /persist

 * This is apparently not the current time.

Change-Id: I1973dbede7906e40fa768dccf1400a0e16d99b74
---
 recovery.cpp | 8 --------
 1 file changed, 8 deletions(-)

diff --git a/recovery.cpp b/recovery.cpp
index a02ff0ea..c85beedc 100644
--- a/recovery.cpp
+++ b/recovery.cpp
@@ -140,7 +140,6 @@ static const char* adb_keys_data = "/data/misc/adb/adb_keys";
 static const char* adb_keys_root = "/adb_keys";
 static const char* time_off_1_data = "/data/time/ats_1";
 static const char* time_off_2_data = "/data/system/time/ats_1";
-static const char* time_off_3_data = "/persist/time/ats_1";
 static const char* time_off_root = "/ats";
 
 RecoveryUI* ui = nullptr;
@@ -1509,13 +1508,6 @@ static void copy_userdata_files() {
         }
         ensure_path_unmounted("/data");
     }
-
-    if (ensure_path_mounted("/persist") == 0) {
-        if (access(time_off_3_data, R_OK) == 0) {
-            file_copy(time_off_3_data, time_off_root);
-        }
-        ensure_path_unmounted("/persist");
-    }
 }
 
 static void set_time() {
-- 
2.17.1

