From 1b230edb7460b93b262cd5aa4831a7b72ba0b373 Mon Sep 17 00:00:00 2001
From: Pengxuan Zheng <pzheng@codeaurora.org>
Date: Fri, 27 Oct 2017 17:13:50 -0700
Subject: [PATCH 4/8] Turn off sdclang for cfi sanitizer

This patch turns off sdclang for the cfi sanitizer. This is only a temporary
workaround for the cfi sanitizer issue encountered when building O-MR1 with
SDLLVM. It should be reverted once the cfi sanitizer issue is fixed in SDLLVM.

Change-Id: I714916d04a11d63aa6819567be73386320696121
---
 core/config_sanitizers.mk | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/core/config_sanitizers.mk b/core/config_sanitizers.mk
index 0d182e9..70cb456 100644
--- a/core/config_sanitizers.mk
+++ b/core/config_sanitizers.mk
@@ -226,6 +226,10 @@ ifneq ($(my_sanitize),)
 endif
 
 ifneq ($(filter cfi,$(my_sanitize)),)
+  # FIXME: revert this once the cfi sanitizer issue is fixed
+  my_sdclang := false
+  my_sdclang_2 := false
+
   # __cfi_check needs to be built as Thumb (see the code in linker_cfi.cpp).
   # LLVM is not set up to do this on a function basis, so force Thumb on the
   # entire module.
-- 
2.7.4

