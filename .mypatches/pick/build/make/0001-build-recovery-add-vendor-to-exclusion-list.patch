From e1d43b70aaa66255690d79f6b9633f7f6026200e Mon Sep 17 00:00:00 2001
From: Marko Man <darkobas@gmail.com>
Date: Fri, 1 Dec 2017 14:06:10 -0500
Subject: [PATCH 01/23] build: recovery: add vendor to exclusion list

on some devices there is a vendor symlink in rootdir.
Ignore that for recovery.

Change-Id: Id0e54f7d135418cbe3adc1985c2dd26e260ab495
---
 core/Makefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/core/Makefile b/core/Makefile
index bc9f8be60..0a9cc99ca 100644
--- a/core/Makefile
+++ b/core/Makefile
@@ -1254,7 +1254,7 @@ define build-recoveryramdisk
   $(hide) mkdir -p $(TARGET_RECOVERY_ROOT_OUT)/etc $(TARGET_RECOVERY_ROOT_OUT)/sdcard $(TARGET_RECOVERY_ROOT_OUT)/tmp
   @echo Copying baseline ramdisk...
   # Use rsync because "cp -Rf" fails to overwrite broken symlinks on Mac.
-  $(hide) rsync -a --exclude=etc --exclude=sdcard $(IGNORE_RECOVERY_SEPOLICY) $(IGNORE_CACHE_LINK) $(TARGET_ROOT_OUT) $(TARGET_RECOVERY_OUT)
+  $(hide) rsync -a --exclude=etc --exclude=sdcard --exclude=vendor $(IGNORE_RECOVERY_SEPOLICY) $(IGNORE_CACHE_LINK) $(TARGET_ROOT_OUT) $(TARGET_RECOVERY_OUT)
   # Copy adbd from system/bin to recovery/root/sbin
   $(hide) cp -f $(TARGET_OUT_EXECUTABLES)/adbd $(TARGET_RECOVERY_ROOT_OUT)/sbin/adbd
   @echo Modifying ramdisk contents...
-- 
2.17.1

