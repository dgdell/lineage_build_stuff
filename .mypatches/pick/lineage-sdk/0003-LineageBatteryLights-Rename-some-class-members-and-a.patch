From 1d05763977b6301c96567d4e62b09e17b1a02ab0 Mon Sep 17 00:00:00 2001
From: Bruno Martins <bgcngm@gmail.com>
Date: Tue, 24 Apr 2018 19:43:02 +0100
Subject: [PATCH 3/6] LineageBatteryLights: Rename some class members and add
 more debugging

 * Follow LineageNotificationLights debug logic

Change-Id: I6b4a91db45a119c8c0b8b30684386765b73b93d2
---
 .../notification/LineageBatteryLights.java    | 30 +++++++++++++------
 1 file changed, 21 insertions(+), 9 deletions(-)

diff --git a/sdk/src/java/org/lineageos/internal/notification/LineageBatteryLights.java b/sdk/src/java/org/lineageos/internal/notification/LineageBatteryLights.java
index 414c57e..fbc874d 100644
--- a/sdk/src/java/org/lineageos/internal/notification/LineageBatteryLights.java
+++ b/sdk/src/java/org/lineageos/internal/notification/LineageBatteryLights.java
@@ -1,5 +1,5 @@
 /**
- * Copyright (C) 2017 The LineageOS Project
+ * Copyright (C) 2017-2018 The LineageOS Project
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
@@ -55,8 +55,8 @@ public final class LineageBatteryLights {
     private int mBatteryLowARGB;
     private int mBatteryMediumARGB;
     private int mBatteryFullARGB;
-    private int mBatteryBrightness;
-    private int mBatteryBrightnessZen;
+    private int mBatteryBrightnessLevel;
+    private int mBatteryBrightnessZenLevel;
 
     private final Context mContext;
 
@@ -115,9 +115,20 @@ public final class LineageBatteryLights {
 
     public void calcLights(LedValues ledValues, int level, int status, boolean low) {
         if (DEBUG) {
-            Slog.i(TAG, "calcLights input: ledValues={ " + ledValues + " } level="
-                    + level + " status=" + status + " low=" + low);
+            Slog.i(TAG, "calcLights input:"
+                    + " ledValues={ " + ledValues + " }"
+                    + " level=" + level
+                    + " status=" + status
+                    + " low=" + low
+                    + " mCanAdjustBrightness=" + mCanAdjustBrightness
+                    + " mHALAdjustableBrightness=" + mHALAdjustableBrightness
+                    + " mUseSegmentedBatteryLed=" + mUseSegmentedBatteryLed
+                    + " mBatteryBrightnessLevel=" + mBatteryBrightnessLevel
+                    + " mBatteryBrightnessZenLevel=" + mBatteryBrightnessZenLevel
+                    + " mZenMode=" + mZenMode
+            );
         }
+
         // The only meaningful ledValues values received by frameworks BatteryService
         // are the pulse times (for low battery). Explicitly set enabled state and
         // color to ensure that we arrive at a deterministic outcome.
@@ -135,9 +146,9 @@ public final class LineageBatteryLights {
         } else if (mUseSegmentedBatteryLed) {
             brightness = level;
         } else if (mZenMode == Global.ZEN_MODE_OFF) {
-            brightness = mBatteryBrightness;
+            brightness = mBatteryBrightnessLevel;
         } else {
-            brightness = mBatteryBrightnessZen;
+            brightness = mBatteryBrightnessZenLevel;
         }
         ledValues.setBrightness(brightness);
 
@@ -258,13 +269,14 @@ public final class LineageBatteryLights {
                     LineageSettings.System.BATTERY_LIGHT_FULL_COLOR, res.getInteger(
                     com.android.internal.R.integer.config_notificationsBatteryFullARGB));
 
+            // Adustable battery LED brightness.
             if (mCanAdjustBrightness) {
                 // Battery brightness level
-                mBatteryBrightness = LineageSettings.System.getInt(resolver,
+                mBatteryBrightnessLevel = LineageSettings.System.getInt(resolver,
                         LineageSettings.System.BATTERY_LIGHT_BRIGHTNESS_LEVEL,
                         LedValues.LIGHT_BRIGHTNESS_MAXIMUM);
                 // Battery brightness level in Do Not Disturb mode
-                mBatteryBrightnessZen = LineageSettings.System.getInt(resolver,
+                mBatteryBrightnessZenLevel = LineageSettings.System.getInt(resolver,
                         LineageSettings.System.BATTERY_LIGHT_BRIGHTNESS_LEVEL_ZEN,
                         LedValues.LIGHT_BRIGHTNESS_MAXIMUM);
             }
-- 
2.17.0

