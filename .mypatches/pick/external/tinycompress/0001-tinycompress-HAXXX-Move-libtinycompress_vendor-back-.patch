From 7cf7b22930d923f6c3d9f1d1b455bb2f619874e2 Mon Sep 17 00:00:00 2001
From: LuK1337 <priv.luk@gmail.com>
Date: Sat, 16 Dec 2017 22:46:25 +0100
Subject: [PATCH] tinycompress: HAXXX: Move libtinycompress_vendor back to
 Android.mk

Change-Id: I9924d855eedc340e4f50aae033ebe5503193b95c
---
 Android.bp | 24 +-----------------------
 Android.mk | 14 ++++++++++++++
 2 files changed, 15 insertions(+), 23 deletions(-)
 create mode 100644 Android.mk

diff --git a/Android.bp b/Android.bp
index 23d84a1..c22852c 100644
--- a/Android.bp
+++ b/Android.bp
@@ -17,28 +17,6 @@ cc_library_shared {
     ],
 }
 
-cc_library_shared {
-    name: "libtinycompress_vendor",
-    vendor: true,
-
-    cflags: [ 
-        "-Wno-macro-redefined",
-        "-DUSE_VENDOR_EXTN",
-    ],
-    export_include_dirs: ["include"],
-    srcs: [
-        "compress.c",
-        "utils.c",
-    ],
-    shared_libs: [
-        "libcutils",
-        "libutils",
-    ],
-    header_libs: [
-        "device_kernel_headers",
-    ],
-}
-
 cc_binary {
     name: "cplay",
     vendor: true,
@@ -49,6 +27,6 @@ cc_binary {
     shared_libs: [
         "libcutils",
         "libutils",
-        "libtinycompress_vendor",
+        "libtinycompress",
     ],
 }
diff --git a/Android.mk b/Android.mk
new file mode 100644
index 0000000..79b2a96
--- /dev/null
+++ b/Android.mk
@@ -0,0 +1,14 @@
+LOCAL_PATH := $(call my-dir)
+
+include $(CLEAR_VARS)
+LOCAL_CFLAGS := -Wno-macro-redefined
+LOCAL_C_INCLUDES:= $(LOCAL_PATH)/include
+LOCAL_C_INCLUDES += $(TARGET_OUT_INTERMEDIATES)/KERNEL_OBJ/usr/include
+LOCAL_ADDITIONAL_DEPENDENCIES += $(TARGET_OUT_INTERMEDIATES)/KERNEL_OBJ/usr
+LOCAL_CFLAGS += -DUSE_VENDOR_EXTN
+LOCAL_SRC_FILES:= compress.c utils.c
+LOCAL_MODULE := libtinycompress_vendor
+LOCAL_SHARED_LIBRARIES:= libcutils libutils
+LOCAL_MODULE_TAGS := optional
+LOCAL_VENDOR_MODULE := true
+include $(BUILD_SHARED_LIBRARY)
-- 
2.7.4

