From 888489b08d7b5a5eb67a9a17c7de47fe70fe2785 Mon Sep 17 00:00:00 2001
From: Rashed Abdel-Tawab <rashed@linux.com>
Date: Mon, 18 Dec 2017 21:44:11 -0800
Subject: [PATCH] softap: Fix for VNDK_VERSION=current

Change-Id: I3925e794f5c065bd2843a4ea4c9fe122c182d5b3
---
 softap/sdk/Android.mk | 2 ++
 softap/sdk/qsap.c     | 5 +++--
 softap/sdk/qsap_api.c | 2 +-
 3 files changed, 6 insertions(+), 3 deletions(-)

diff --git a/softap/sdk/Android.mk b/softap/sdk/Android.mk
index 59ade7f..d81e50b 100755
--- a/softap/sdk/Android.mk
+++ b/softap/sdk/Android.mk
@@ -65,5 +65,7 @@ LOCAL_PRELINK_MODULE := false
 
 LOCAL_SHARED_LIBRARIES := libnetutils libutils libbinder libcutils libhardware_legacy libnl liblog
 
+LOCAL_VENDOR_MODULE := true
+
 include $(BUILD_SHARED_LIBRARY)
 
diff --git a/softap/sdk/qsap.c b/softap/sdk/qsap.c
index dd9d388..308a355 100644
--- a/softap/sdk/qsap.c
+++ b/softap/sdk/qsap.c
@@ -31,6 +31,7 @@
 #include <stdlib.h>
 #include <fcntl.h>
 #include <errno.h>
+#include <sched.h>
 #include <string.h>
 #include <stdio.h>
 
@@ -46,11 +47,11 @@
 
 #define LOG_TAG "QCLDR-"
 
-#include "cutils/log.h"
+#include "log/log.h"
 #include "cutils/memory.h"
 #include "cutils/misc.h"
 #include "cutils/properties.h"
-#include "private/android_filesystem_config.h"
+#include "cutils/android_filesystem_config.h"
 
 #include "qsap_api.h"
 #include "qsap.h"
diff --git a/softap/sdk/qsap_api.c b/softap/sdk/qsap_api.c
index 061c501..ca65d8f 100644
--- a/softap/sdk/qsap_api.c
+++ b/softap/sdk/qsap_api.c
@@ -43,7 +43,7 @@
 #include <sys/stat.h>
 #include <sys/types.h>
 #include <unistd.h>
-#include <private/android_filesystem_config.h>
+#include <cutils/android_filesystem_config.h>
 #include <net/if.h>
 #include <net/if_arp.h>
 #include <netlink/netlink.h>
-- 
2.15.1

