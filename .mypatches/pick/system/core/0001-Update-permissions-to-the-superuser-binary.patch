From 976c1f8de0d99b9952deb719dcd62479d3c96649 Mon Sep 17 00:00:00 2001
From: Ricardo Cerqueira <ricardo@cyngn.com>
Date: Wed, 26 Nov 2014 21:49:52 +0000
Subject: [PATCH 1/2] Update permissions to the superuser binary

Change-Id: Ia382c74854cfbe625653b8b6b016b37f93132658
---
 libcutils/fs_config.cpp | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/libcutils/fs_config.cpp b/libcutils/fs_config.cpp
index cc96ff8..c7e604e 100644
--- a/libcutils/fs_config.cpp
+++ b/libcutils/fs_config.cpp
@@ -163,10 +163,11 @@ static const struct fs_path_config android_files[] = {
     { 00444, AID_ROOT,      AID_ROOT,      0, ven_conf_dir + 1 },
     { 00444, AID_ROOT,      AID_ROOT,      0, ven_conf_file + 1 },
 
-    // the following two files are INTENTIONALLY set-uid, but they
-    // are NOT included on user builds.
+    // the following file is INTENTIONALLY set-uid, but it
+    // is NOT included on user builds.
     { 06755, AID_ROOT,      AID_ROOT,      0, "system/xbin/procmem" },
-    { 04750, AID_ROOT,      AID_SHELL,     0, "system/xbin/su" },
+    /* Lineage's daemonized su doesn't need the setuid bit */
+    { 00755, AID_ROOT,      AID_SHELL,     0, "system/xbin/su" },
 
     // the following files have enhanced capabilities and ARE included
     // in user builds.
-- 
2.7.4

