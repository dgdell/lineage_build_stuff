From bedcb53079287ab50dfcd7786e9628215b4d841a Mon Sep 17 00:00:00 2001
From: nx111 <gd.zhangdz@gmail.com>
Date: Fri, 24 Aug 2018 01:14:34 +0800
Subject: [PATCH] su: use checkOp for AppOpsManager.

Change-Id: If0fad9781d2ab635ff7c449763028d9348f86779
---
 binder/appops-wrapper.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/binder/appops-wrapper.cpp b/binder/appops-wrapper.cpp
index acc26b3..199a424 100644
--- a/binder/appops-wrapper.cpp
+++ b/binder/appops-wrapper.cpp
@@ -11,7 +11,7 @@ int appops_start_op_su(int uid, const char *pkgName) {
     ALOGD("Checking whether app [uid:%d, pkgName: %s] is allowed to be root", uid, pkgName);
     AppOpsManager *ops = new AppOpsManager();
 
-    int mode = ops->startOp(AppOpsManager::OP_SU, uid, String16(pkgName));
+    int mode = ops->checkOp(AppOpsManager::OP_SU, uid, String16(pkgName));
 
     switch (mode) {
         case AppOpsManager::MODE_ALLOWED:
-- 
2.17.1

