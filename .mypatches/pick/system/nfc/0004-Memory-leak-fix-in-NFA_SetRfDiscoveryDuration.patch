From 722721ccf6b2db30d8c0f99806a2ef477ad9e858 Mon Sep 17 00:00:00 2001
From: Jizhou Liao <Jizhou.Liao@nxp.com>
Date: Mon, 18 Dec 2017 11:30:08 -0800
Subject: [PATCH 4/4] Memory leak fix in NFA_SetRfDiscoveryDuration()

Test: compile
Change-Id: Id896d79e09def5c978d1a95548a1fa231510f708
---
 src/nfa/dm/nfa_dm_api.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/nfa/dm/nfa_dm_api.c b/src/nfa/dm/nfa_dm_api.c
index 474a525..1bc293e 100644
--- a/src/nfa/dm/nfa_dm_api.c
+++ b/src/nfa/dm/nfa_dm_api.c
@@ -738,7 +738,8 @@ tNFA_STATUS NFA_SetRfDiscoveryDuration(uint16_t discovery_period_ms) {
   NFA_TRACE_API0("NFA_SetRfDiscoveryDuration ()");
 
   /* Post the API message */
-  p_msg = (tNFA_DM_API_SET_RF_DISC_DUR*)GKI_getbuf(sizeof(NFC_HDR));
+  p_msg = (tNFA_DM_API_SET_RF_DISC_DUR*)GKI_getbuf(
+      sizeof(tNFA_DM_API_SET_RF_DISC_DUR));
   if (p_msg != NULL) {
     p_msg->hdr.event = NFA_DM_API_SET_RF_DISC_DURATION_EVT;
 
-- 
2.17.0

