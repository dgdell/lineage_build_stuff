From 2cf05c18cd4735896fdc0d7faab6aedbc412e676 Mon Sep 17 00:00:00 2001
From: Michael Bestas <mkbestas@lineageos.org>
Date: Wed, 5 Sep 2018 18:45:37 +0300
Subject: [PATCH 17/46] [DNM] Revert "Handle public volumes and otherwise
 invalid UUIDs."

This reverts commit 18f325012d1c807f2b0a9c577868722cc5fe4252.

Change-Id: I072055835662b2fb45db3af4d76354acc3eb4dcd
---
 core/java/android/os/storage/StorageManager.java | 9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)

diff --git a/core/java/android/os/storage/StorageManager.java b/core/java/android/os/storage/StorageManager.java
index 2d1bb2f25d8..86a59cf34f8 100644
--- a/core/java/android/os/storage/StorageManager.java
+++ b/core/java/android/os/storage/StorageManager.java
@@ -758,15 +758,10 @@ public class StorageManager {
         }
         try {
             for (VolumeInfo vol : mStorageManager.getVolumes(0)) {
-                if (vol.path != null && FileUtils.contains(vol.path, pathString)
-                        && vol.type != VolumeInfo.TYPE_PUBLIC) {
+                if (vol.path != null && FileUtils.contains(vol.path, pathString)) {
                     // TODO: verify that emulated adopted devices have UUID of
                     // underlying volume
-                    try {
-                        return convert(vol.fsUuid);
-                    } catch (IllegalArgumentException e) {
-                        continue;
-                    }
+                    return convert(vol.fsUuid);
                 }
             }
         } catch (RemoteException e) {
-- 
2.17.1

