From 5899c652fa0c48cdee1d40ce7eebff747374b1d3 Mon Sep 17 00:00:00 2001
From: Joey <joey@lineageos.org>
Date: Thu, 19 Apr 2018 14:16:25 +0200
Subject: [PATCH 06/19] base: introduce trust interface

Privacy guard branding has been replaced with Trust's

Change-Id: I439ed1e0bab688585dce91dd828c36c17da4af37
Signed-off-by: Joey <joey@lineageos.org>
---
 .../res/drawable/permission_dialog_trust.xml  | 26 +++++++++++++++++++
 .../drawable/stat_notify_privacy_guard.xml    | 11 --------
 core/res/res/drawable/stat_notify_trust.xml   | 26 +++++++++++++++++++
 core/res/res/values/lineage_symbols.xml       |  3 ++-
 .../com/android/server/PermissionDialog.java  |  2 ++
 .../server/am/ActivityManagerService.java     |  2 +-
 6 files changed, 57 insertions(+), 13 deletions(-)
 create mode 100644 core/res/res/drawable/permission_dialog_trust.xml
 delete mode 100644 core/res/res/drawable/stat_notify_privacy_guard.xml
 create mode 100644 core/res/res/drawable/stat_notify_trust.xml

diff --git a/core/res/res/drawable/permission_dialog_trust.xml b/core/res/res/drawable/permission_dialog_trust.xml
new file mode 100644
index 00000000000..e14508d52a1
--- /dev/null
+++ b/core/res/res/drawable/permission_dialog_trust.xml
@@ -0,0 +1,26 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+     Copyright (C) 2018 The LineageOS Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="24"
+    android:viewportHeight="24">
+
+    <path
+        android:fillColor="@android:color/accent_device_default_light"
+        android:pathData="M5,3L19,3C20.105,3 21,3.895 21,5L21,12C21,16.971 16.971,21 12,21C7.029,21 3,16.971 3,12L3,5C3,3.895 3.895,3 5,3ZM18.902,13.168C18.994,12.624 18.627,12.108 18.082,12.016C17.538,11.925 17.022,12.292 16.93,12.837C16.528,15.225 14.45,17 12,17C9.55,17 7.472,15.226 7.069,12.838C6.978,12.294 6.462,11.927 5.917,12.018C5.373,12.11 5.005,12.626 5.097,13.171C5.661,16.517 8.57,19 12,19C15.43,19 18.339,16.516 18.902,13.168ZM11.046,5.698L9.127,11.297C9.045,11.516 9,11.753 9,12C9,13.104 9.895,14 11,14C11.01,14 11.019,14 11.029,14L13,14C13.55,14 14.05,13.78 14.41,13.41C14.78,13.05 15,12.55 15,12L12.6,12L11,11.999L11.438,10.724L11.646,10.116L12.938,6.346C12.978,6.238 13,6.121 13,6C13,5.448 12.552,5 12,5C11.553,5 11.174,5.293 11.046,5.698Z" />
+</vector>
\ No newline at end of file
diff --git a/core/res/res/drawable/stat_notify_privacy_guard.xml b/core/res/res/drawable/stat_notify_privacy_guard.xml
deleted file mode 100644
index de3aa7711b1..00000000000
--- a/core/res/res/drawable/stat_notify_privacy_guard.xml
+++ /dev/null
@@ -1,11 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<vector xmlns:android="http://schemas.android.com/apk/res/android"
-    android:width="26dp"
-    android:height="24dp"
-    android:viewportWidth="26"
-    android:viewportHeight="24">
-
-    <path
-        android:pathData="M21.539,8.978c-0.132,2.629-0.803,5.264-2.162,7.534  c-1.186,1.991-2.889,3.675-4.905,4.82c-0.459,0.259-0.932,0.494-1.427,0.676c-0.061,0.029-0.122-0.014-0.18-0.032 c-1.047-0.415-2.019-1.006-2.909-1.693c-1.807-1.397-3.239-3.263-4.151-5.356c-0.725-1.651-1.137-3.429-1.297-5.222 C4.33,7.77,4.442,5.816,4.73,3.896c0.601,0.053,1.207,0.031,1.807-0.017c1.309-0.115,2.596-0.41,3.849-0.799 c0.888-0.283,1.766-0.604,2.611-0.999c1.13,0.523,2.311,0.935,3.512,1.26c1.549,0.412,3.157,0.666,4.763,0.562 c0.116,0.846,0.216,1.695,0.261,2.548c0.002,0.241,0.042,0.481,0.037,0.723C21.574,7.776,21.594,8.379,21.539,8.978z"
-        android:fillColor="#FFFFFFFF" />
-</vector>
diff --git a/core/res/res/drawable/stat_notify_trust.xml b/core/res/res/drawable/stat_notify_trust.xml
new file mode 100644
index 00000000000..426fb9dd660
--- /dev/null
+++ b/core/res/res/drawable/stat_notify_trust.xml
@@ -0,0 +1,26 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+     Copyright (C) 2018 The LineageOS Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="24"
+    android:viewportHeight="24">
+
+    <path
+        android:fillColor="@android:color/white"
+        android:pathData="M5,3L19,3C20.105,3 21,3.895 21,5L21,12C21,16.971 16.971,21 12,21C7.029,21 3,16.971 3,12L3,5C3,3.895 3.895,3 5,3ZM18.902,13.168C18.994,12.624 18.627,12.108 18.082,12.016C17.538,11.925 17.022,12.292 16.93,12.837C16.528,15.225 14.45,17 12,17C9.55,17 7.472,15.226 7.069,12.838C6.978,12.294 6.462,11.927 5.917,12.018C5.373,12.11 5.005,12.626 5.097,13.171C5.661,16.517 8.57,19 12,19C15.43,19 18.339,16.516 18.902,13.168ZM11.046,5.698L9.127,11.297C9.045,11.516 9,11.753 9,12C9,13.104 9.895,14 11,14C11.01,14 11.019,14 11.029,14L13,14C13.55,14 14.05,13.78 14.41,13.41C14.78,13.05 15,12.55 15,12L12.6,12L11,11.999L11.438,10.724L11.646,10.116L12.938,6.346C12.978,6.238 13,6.121 13,6C13,5.448 12.552,5 12,5C11.553,5 11.174,5.293 11.046,5.698Z" />
+</vector>
\ No newline at end of file
diff --git a/core/res/res/values/lineage_symbols.xml b/core/res/res/values/lineage_symbols.xml
index cb94552a7a4..0ce4b2d6f95 100644
--- a/core/res/res/values/lineage_symbols.xml
+++ b/core/res/res/values/lineage_symbols.xml
@@ -43,7 +43,8 @@
     <java-symbol type="bool" name="config_deviceHasVariableButtonBrightness" />
 
     <!-- Privacy Guard -->
-    <java-symbol type="drawable" name="stat_notify_privacy_guard" />
+    <java-symbol type="drawable" name="permission_dialog_trust" />
+    <java-symbol type="drawable" name="stat_notify_trust" />
     <java-symbol type="string" name="privacy_guard_notification" />
     <java-symbol type="string" name="privacy_guard_notification_detail" />
     <java-symbol type="string" name="privacy_guard_dialog_title" />
diff --git a/services/core/java/com/android/server/PermissionDialog.java b/services/core/java/com/android/server/PermissionDialog.java
index fd676b5f893..7da5a5af0b2 100644
--- a/services/core/java/com/android/server/PermissionDialog.java
+++ b/services/core/java/com/android/server/PermissionDialog.java
@@ -97,6 +97,8 @@ public class PermissionDialog extends BasePermissionDialog {
                 name, mOpLabels[mCode]));
         setView(mView);
 
+        setIcon(com.android.internal.R.drawable.permission_dialog_trust);
+
         // After the timeout, pretend the user clicked the quit button
         mHandler.sendMessageDelayed(
                 mHandler.obtainMessage(ACTION_IGNORED_TIMEOUT), DISMISS_TIMEOUT);
diff --git a/services/core/java/com/android/server/am/ActivityManagerService.java b/services/core/java/com/android/server/am/ActivityManagerService.java
index 7274c8033df..8dba53af276 100644
--- a/services/core/java/com/android/server/am/ActivityManagerService.java
+++ b/services/core/java/com/android/server/am/ActivityManagerService.java
@@ -2418,7 +2418,7 @@ public class ActivityManagerService extends IActivityManager.Stub
 
                     Notification.Builder builder = new Notification.Builder(mContext,
                             SystemNotificationChannels.SECURITY);
-                    builder.setSmallIcon(com.android.internal.R.drawable.stat_notify_privacy_guard)
+                    builder.setSmallIcon(com.android.internal.R.drawable.stat_notify_trust)
                             .setOngoing(true)
                             .setPriority(Notification.PRIORITY_LOW)
                             .setContentTitle(title)
-- 
2.17.0

