From 1812780842c9a5d8eaf8ea7ada8262b843fa7d1f Mon Sep 17 00:00:00 2001
From: Chaitanya Saggurthi <csaggurt@codeaurora.org>
Date: Wed, 31 May 2017 23:02:36 +0530
Subject: [PATCH 09/14] Add support for getAtr api

Add support to query the ATR from SIM Card

CRs-Fixed: 2055157

Change-Id: I7a0a1c5c92226cce70cc67c36c2df85ef205f70a
---
 .../com/android/internal/telephony/ITelephony.aidl    | 11 +++++++++++
 .../com/android/internal/telephony/RILConstants.java  |  1 +
 2 files changed, 12 insertions(+)

diff --git a/telephony/java/com/android/internal/telephony/ITelephony.aidl b/telephony/java/com/android/internal/telephony/ITelephony.aidl
index 9262ec5ed53..d9d4fec84f5 100644
--- a/telephony/java/com/android/internal/telephony/ITelephony.aidl
+++ b/telephony/java/com/android/internal/telephony/ITelephony.aidl
@@ -1377,4 +1377,15 @@ interface ITelephony {
      * @hide
      */
     SignalStrength getSignalStrength(int subId);
+
+    /**
+     * Get ATR (Answer To Reset; as per ISO/IEC 7816-4) from SIM card
+     */
+    byte[] getAtr();
+
+    /**
+     * Get ATR (Answer To Reset; as per ISO/IEC 7816-4) from SIM card
+     * for a particular subId.
+     */
+    byte[] getAtrUsingSubId(int subId);
 }
diff --git a/telephony/java/com/android/internal/telephony/RILConstants.java b/telephony/java/com/android/internal/telephony/RILConstants.java
index e2d25b8e352..b22bfc98371 100644
--- a/telephony/java/com/android/internal/telephony/RILConstants.java
+++ b/telephony/java/com/android/internal/telephony/RILConstants.java
@@ -417,6 +417,7 @@ cat include/telephony/ril.h | \
     int RIL_REQUEST_SET_CARRIER_INFO_IMSI_ENCRYPTION = 141;
     int RIL_REQUEST_START_NETWORK_SCAN = 142;
     int RIL_REQUEST_STOP_NETWORK_SCAN = 143;
+    int RIL_REQUEST_SIM_QUERY_ATR = 200;
 
     int RIL_RESPONSE_ACKNOWLEDGEMENT = 800;
 
-- 
2.17.0

