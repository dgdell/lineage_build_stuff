From 53952273ec53102b43bf6bc23fa0d55ed07fd374 Mon Sep 17 00:00:00 2001
From: Rashed Abdel-Tawab <rashed@linux.com>
Date: Sat, 24 Mar 2018 13:20:52 -0400
Subject: [PATCH 11/30] camera: Check if aux camera whitelist is set before
 restricting cameras

Some devices have a fully featured 3rd camera and adding 20+
camera apps to the whitelist is not just stupid, it's impossible
due to the string length limit on systemprops. Add a check to see
if the prop is even set, and if not, just restore the original
behaviour and expose all the cameras to all the apps.

Change-Id: I6c3b33c077e8710c73b5d0fa28e1b017d6c43a58
---
 core/java/android/hardware/Camera.java | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/core/java/android/hardware/Camera.java b/core/java/android/hardware/Camera.java
index 07893238eef..5176054b291 100644
--- a/core/java/android/hardware/Camera.java
+++ b/core/java/android/hardware/Camera.java
@@ -284,12 +284,12 @@ public class Camera {
             TextUtils.StringSplitter splitter = new TextUtils.SimpleStringSplitter(',');
             splitter.setString(packageList);
             for (String str : splitter) {
-                if (packageName.equals(str)) {
-                    return true;
+                if (!packageName.equals(str)) {
+                    return false;
                 }
             }
         }
-        return false;
+        return true;
     }
 
     /**
-- 
2.17.1

