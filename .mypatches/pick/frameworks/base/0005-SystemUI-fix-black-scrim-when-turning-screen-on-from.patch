From 4adac9f15769403fbc75411d9c047fcddbba73b2 Mon Sep 17 00:00:00 2001
From: Anas Karbila <anaskarbila@aospa.co>
Date: Thu, 18 Jan 2018 17:47:19 -0500
Subject: [PATCH 05/14] SystemUI: fix black scrim when turning screen on from
 AOD

* TODO: Maybe add same fade anim as pixel 2

Change-Id: I351a212b2989f56df3b6353f41a379281ed1a9f1
Signed-off-by: Pranav Vashi <neobuddy89@gmail.com>
Signed-off-by: Adesh15 <adesikha15@gmail.com>
---
 .../android/systemui/statusbar/phone/ScrimController.java | 8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)

diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/phone/ScrimController.java b/packages/SystemUI/src/com/android/systemui/statusbar/phone/ScrimController.java
index 702afa3a38b..0325d589ce6 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/phone/ScrimController.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/phone/ScrimController.java
@@ -389,7 +389,7 @@ public class ScrimController implements ViewTreeObserver.OnPreDrawListener,
                 setScrimInFrontAlpha(1f);
                 setScrimBehindAlpha(0f);
             }
-        } else if (!mKeyguardShowing && !mBouncerShowing && !mWakingUpFromAodStarting) {
+        } else if (!mKeyguardShowing && !mBouncerShowing) {
             updateScrimNormal();
             setScrimInFrontAlpha(0);
         } else {
@@ -425,11 +425,7 @@ public class ScrimController implements ViewTreeObserver.OnPreDrawListener,
             setScrimBehindAlpha(mScrimBehindAlpha);
         } else {
             float fraction = Math.max(0, Math.min(mFraction, 1));
-            if (mWakingUpFromAodStarting) {
-                setScrimInFrontAlpha(1f);
-            } else {
-                setScrimInFrontAlpha(0f);
-            }
+            setScrimInFrontAlpha(0f);
             setScrimBehindAlpha(fraction
                     * (mScrimBehindAlphaKeyguard - mScrimBehindAlphaUnlocking)
                     + mScrimBehindAlphaUnlocking);
-- 
2.17.0

