From 83861b4281f43992907f0ef162b224bbf14e0e6a Mon Sep 17 00:00:00 2001
From: Aaron Kling <webgeek1234@gmail.com>
Date: Tue, 7 Nov 2017 14:12:45 -0600
Subject: [PATCH 22/28] Expose getChannelList [1/2]

Change-Id: I0c3faaf770f2924076dbe91c237ce83aaf6a938b
---
 wifi/java/android/net/wifi/IWifiManager.aidl |  3 +++
 wifi/java/android/net/wifi/WifiChannel.aidl  | 20 ++++++++++++++++++++
 wifi/java/android/net/wifi/WifiManager.java  | 10 ++++++++++
 3 files changed, 33 insertions(+)
 create mode 100644 wifi/java/android/net/wifi/WifiChannel.aidl

diff --git a/wifi/java/android/net/wifi/IWifiManager.aidl b/wifi/java/android/net/wifi/IWifiManager.aidl
index 3250916e00a..e39a3085120 100755
--- a/wifi/java/android/net/wifi/IWifiManager.aidl
+++ b/wifi/java/android/net/wifi/IWifiManager.aidl
@@ -22,6 +22,7 @@ import android.content.pm.ParceledListSlice;
 import android.net.wifi.hotspot2.OsuProvider;
 import android.net.wifi.hotspot2.PasspointConfiguration;
 
+import android.net.wifi.WifiChannel;
 import android.net.wifi.WifiConfiguration;
 import android.net.wifi.WifiInfo;
 import android.net.wifi.ScanSettings;
@@ -190,5 +191,7 @@ interface IWifiManager
     int setAppProperty(String key, String value);
 
     int setAppPropertyOnDeath(IBinder binder, String key, String value);
+
+    List<WifiChannel> getChannelList();
 }
 
diff --git a/wifi/java/android/net/wifi/WifiChannel.aidl b/wifi/java/android/net/wifi/WifiChannel.aidl
new file mode 100644
index 00000000000..57c84a35867
--- /dev/null
+++ b/wifi/java/android/net/wifi/WifiChannel.aidl
@@ -0,0 +1,20 @@
+/**
+ * Copyright (c) 2008, The Android Open Source Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package android.net.wifi;
+
+/** @hide */
+parcelable WifiChannel;
diff --git a/wifi/java/android/net/wifi/WifiManager.java b/wifi/java/android/net/wifi/WifiManager.java
index 13555fb3444..ef8d3a67edc 100644
--- a/wifi/java/android/net/wifi/WifiManager.java
+++ b/wifi/java/android/net/wifi/WifiManager.java
@@ -3649,4 +3649,14 @@ public class WifiManager {
     public WifiAppPropertyManager getWifiAppPropertyManager() {
         return new WifiAppPropertyManager();
     }
+
+    /** @hide */
+    public List<WifiChannel> getChannelList() {
+        try {
+            return mService.getChannelList();
+        }
+        catch (RemoteException dummy) {
+            return null;
+        }
+    }
 }
-- 
2.17.1

