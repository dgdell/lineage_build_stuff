From 32454d63b92ed43c4695a4d121a6b2e684648a3e Mon Sep 17 00:00:00 2001
From: Marko Man <darkobas@gmail.com>
Date: Sat, 1 Sep 2018 14:00:46 +0200
Subject: [PATCH 54/57] SystemUI: Fix NFC tile state and its disabled drawable
 fill color

Change-Id: I8309eda6b2dbb28156dd463e667ff60545b37b7d
---
 packages/SystemUI/res/drawable/ic_qs_nfc_disabled.xml           | 2 +-
 .../SystemUI/src/com/android/systemui/qs/tiles/NfcTile.java     | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/packages/SystemUI/res/drawable/ic_qs_nfc_disabled.xml b/packages/SystemUI/res/drawable/ic_qs_nfc_disabled.xml
index 558f3d083f4..becb18ad8ba 100644
--- a/packages/SystemUI/res/drawable/ic_qs_nfc_disabled.xml
+++ b/packages/SystemUI/res/drawable/ic_qs_nfc_disabled.xml
@@ -22,7 +22,7 @@
     <path
         android:pathData="M4 20h16V4H4v16z" />
     <path
-        android:fillColor="#4DFFFFFF"
+        android:fillColor="#FFFFFFFF"
         android:pathData="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1 .9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0
 18H4V4h16v16zM18 6h-5c-1.1 0-2 .9-2 2v2.28c-.6 .35 -1 .98-1 1.72 0 1.1 .9 2 2
 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V8h3v8H8V8h2V6H6v12h12V6z" />
diff --git a/packages/SystemUI/src/com/android/systemui/qs/tiles/NfcTile.java b/packages/SystemUI/src/com/android/systemui/qs/tiles/NfcTile.java
index 12daff1f12f..b31f9f8fa84 100644
--- a/packages/SystemUI/src/com/android/systemui/qs/tiles/NfcTile.java
+++ b/packages/SystemUI/src/com/android/systemui/qs/tiles/NfcTile.java
@@ -25,6 +25,7 @@ import android.content.pm.PackageManager;
 import android.graphics.drawable.Drawable;
 import android.nfc.NfcAdapter;
 import android.provider.Settings;
+import android.service.quicksettings.Tile;
 import android.widget.Switch;
 
 import com.android.internal.logging.MetricsLogger;
@@ -101,6 +102,7 @@ public class NfcTile extends QSTileImpl<BooleanState> {
 
         if (getAdapter() == null) return;
         state.value = getAdapter().isEnabled();
+        state.state = state.value ? Tile.STATE_ACTIVE : Tile.STATE_INACTIVE;
         state.label = mContext.getString(R.string.quick_settings_nfc_label);
         state.icon = new DrawableIcon(state.value ? mEnable : mDisable);
         state.expandedAccessibilityClassName = Switch.class.getName();
-- 
2.17.1

