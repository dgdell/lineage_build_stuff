From 68574cc9dc122d9e4b5a29e436a9f58903578b6c Mon Sep 17 00:00:00 2001
From: Jacob McSwain <jacob.a.mcswain@gmail.com>
Date: Fri, 25 Nov 2016 21:54:23 -0600
Subject: [PATCH 02/36] SystemUI: Add a reversed version of OPA layout

AKA the pixel navbar

This is a combination of 8 commits.
This is the 1st commit message:
Pixel Navbar, reverse engineered from smali.

Notes:
- This is forcing the Pixel Home button on people,
  and it looks ugly with the other nav buttons being hollow

- There MAY still be a few fixes yet to be found in this code
  because it WAS a big file to RE from smali. I have yet to find
  any, but time is the best tester.

- Shoutout to @bigrushdog for providing a decompiled form used
  to verify the smali and as a guideline for the more obsure
  smali sections. It was a big help.

- Tagging myself here to see adoption rate. @USA-RedDragon

PureNexus Edits: By: @BeansTown106
*squashed with the landscape fix
*cleaned up some of the if statements and removed the unused constants
*removed the renamed icons, this was unnecessary as we will vectorize pixel icons

Change-Id: Ia45fc89e4f1518fcabc379c4790d1955a026daee

This is the commit message #2:

Vectorize all navbar icons (pixel theme) fix landscape bug
*the only thing navbar related that is not vectorized is the lightsout/carmode/menu icons

This is the commit message #3:

Pixel navbar: allow disabling based on config

Create new config_allowOpaLayout bool to allow themers to disable the Pixel Navbar

Fixes the dreaded "yellow" home button

Change-Id: I69ad9a0d87317c9d9732b08b33ceabd096afee77

This is the commit message #4:

Pixel Navbar animation toggle [1/2]

*made to work with the exposure for themers to disable navbar animation

Change-Id: Icb057edaf0c49933d6a882df3af627a076a14561

This is the commit message #5:

Pixel navbar: remove this. and OpaLayout references, cleanup

Since it's all on the same file, I don't think they are needed (?)
Replace some hardcoded int values with meaningful variables, like MotionEvent

Change-Id: I4d7b2fe57d3e1bf2fa034bf81efb11d37a5ebfba

This is the commit message #6:

Pixel navbar: Fix Home button FC

Change-Id: I7c463999a76ee02f1f5af615ddcff3c05ca4e4f2

This is the commit message #7:

Reload Pixel Home Animation without reboot

Change-Id: I4d7b2fe57d3e1bf2fa034bf81efb11d37a5ebfba
---
 core/res/res/values/config.xml                |   3 +
 core/res/res/values/lineage_symbols.xml       |   3 +
 .../res/drawable-hdpi/ic_sysbar_docked.png    | Bin 1254 -> 0 bytes
 .../drawable-land-hdpi/ic_sysbar_docked.png   | Bin 1151 -> 0 bytes
 .../drawable-land-xhdpi/ic_sysbar_docked.png  | Bin 1402 -> 0 bytes
 .../drawable-land-xxhdpi/ic_sysbar_docked.png | Bin 1643 -> 0 bytes
 .../ic_sysbar_docked.png                      | Bin 995 -> 0 bytes
 .../res/drawable-land/ic_sysbar_docked.png    | Bin 907 -> 0 bytes
 .../res/drawable-land/ic_sysbar_docked.xml    |  25 +
 .../drawable-ldrtl-hdpi/ic_sysbar_back.png    | Bin 1535 -> 0 bytes
 .../drawable-ldrtl-mdpi/ic_sysbar_back.png    | Bin 965 -> 0 bytes
 .../drawable-ldrtl-xhdpi/ic_sysbar_back.png   | Bin 2084 -> 0 bytes
 .../drawable-ldrtl-xxhdpi/ic_sysbar_back.png  | Bin 1358 -> 0 bytes
 .../res/drawable-ldrtl/ic_sysbar_back.xml     |  25 +
 .../res/drawable-mdpi/ic_sysbar_docked.png    | Bin 972 -> 0 bytes
 .../res/drawable-xhdpi/ic_sysbar_docked.png   | Bin 1346 -> 0 bytes
 .../res/drawable-xxhdpi/ic_sysbar_docked.png  | Bin 1608 -> 0 bytes
 .../res/drawable-xxxhdpi/ic_sysbar_docked.png | Bin 1096 -> 0 bytes
 packages/SystemUI/res/drawable/halo.xml       |   6 +
 .../SystemUI/res/drawable/ic_sysbar_back.xml  |  41 +-
 .../res/drawable/ic_sysbar_back_dark.xml      |  26 +-
 .../res/drawable/ic_sysbar_back_ime.xml       |  45 +-
 .../res/drawable/ic_sysbar_back_ime_dark.xml  |  32 +-
 .../res/drawable/ic_sysbar_docked.xml         |  25 +
 .../SystemUI/res/drawable/ic_sysbar_home.xml  |  49 +-
 .../res/drawable/ic_sysbar_home_dark.xml      |  39 +-
 .../res/drawable/ic_sysbar_opa_blue.xml       |   6 +
 .../res/drawable/ic_sysbar_opa_green.xml      |   6 +
 .../res/drawable/ic_sysbar_opa_red.xml        |   6 +
 .../res/drawable/ic_sysbar_opa_yellow.xml     |   6 +
 .../res/drawable/ic_sysbar_recent.xml         |  41 +-
 .../res/drawable/ic_sysbar_recent_dark.xml    |  28 +-
 packages/SystemUI/res/layout/home.xml         |  26 +-
 .../SystemUI/res/values/lineage_colors.xml    |  16 +
 .../SystemUI/res/values/lineage_styles.xml    |   9 +
 .../phone/NavigationBarInflaterView.java      |   6 +-
 .../google/android/systemui/OpaLayout.java    | 639 ++++++++++++++++++
 37 files changed, 897 insertions(+), 211 deletions(-)
 delete mode 100755 packages/SystemUI/res/drawable-hdpi/ic_sysbar_docked.png
 delete mode 100755 packages/SystemUI/res/drawable-land-hdpi/ic_sysbar_docked.png
 delete mode 100755 packages/SystemUI/res/drawable-land-xhdpi/ic_sysbar_docked.png
 delete mode 100755 packages/SystemUI/res/drawable-land-xxhdpi/ic_sysbar_docked.png
 delete mode 100755 packages/SystemUI/res/drawable-land-xxxhdpi/ic_sysbar_docked.png
 delete mode 100755 packages/SystemUI/res/drawable-land/ic_sysbar_docked.png
 create mode 100644 packages/SystemUI/res/drawable-land/ic_sysbar_docked.xml
 delete mode 100644 packages/SystemUI/res/drawable-ldrtl-hdpi/ic_sysbar_back.png
 delete mode 100644 packages/SystemUI/res/drawable-ldrtl-mdpi/ic_sysbar_back.png
 delete mode 100644 packages/SystemUI/res/drawable-ldrtl-xhdpi/ic_sysbar_back.png
 delete mode 100644 packages/SystemUI/res/drawable-ldrtl-xxhdpi/ic_sysbar_back.png
 create mode 100644 packages/SystemUI/res/drawable-ldrtl/ic_sysbar_back.xml
 delete mode 100755 packages/SystemUI/res/drawable-mdpi/ic_sysbar_docked.png
 delete mode 100755 packages/SystemUI/res/drawable-xhdpi/ic_sysbar_docked.png
 delete mode 100755 packages/SystemUI/res/drawable-xxhdpi/ic_sysbar_docked.png
 delete mode 100755 packages/SystemUI/res/drawable-xxxhdpi/ic_sysbar_docked.png
 create mode 100644 packages/SystemUI/res/drawable/halo.xml
 create mode 100644 packages/SystemUI/res/drawable/ic_sysbar_docked.xml
 create mode 100644 packages/SystemUI/res/drawable/ic_sysbar_opa_blue.xml
 create mode 100644 packages/SystemUI/res/drawable/ic_sysbar_opa_green.xml
 create mode 100644 packages/SystemUI/res/drawable/ic_sysbar_opa_red.xml
 create mode 100644 packages/SystemUI/res/drawable/ic_sysbar_opa_yellow.xml
 create mode 100644 packages/SystemUI/res/values/lineage_colors.xml
 create mode 100644 packages/SystemUI/res/values/lineage_styles.xml
 create mode 100644 packages/SystemUI/src/com/google/android/systemui/OpaLayout.java

diff --git a/core/res/res/values/config.xml b/core/res/res/values/config.xml
index 3ce8959a983..8a077b3ffc3 100644
--- a/core/res/res/values/config.xml
+++ b/core/res/res/values/config.xml
@@ -24,6 +24,9 @@
      entries do not follow the convention, but all new entries should. -->
 
 <resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
+    <!-- Allow Opa (Pixel navbar) layout -->
+    <bool name="config_allowOpaLayout">true</bool>
+
     <!-- Do not translate. Defines the slots for the right-hand side icons.  That is to say, the
          icons in the status bar that are not notifications. -->
     <string-array name="config_statusBarIcons">
diff --git a/core/res/res/values/lineage_symbols.xml b/core/res/res/values/lineage_symbols.xml
index 0a23df2cd1a..46665a4f245 100644
--- a/core/res/res/values/lineage_symbols.xml
+++ b/core/res/res/values/lineage_symbols.xml
@@ -16,6 +16,9 @@
      limitations under the License.
 -->
 <resources>
+    <!-- Pixel navigation bar animation -->
+    <java-symbol type="bool" name="config_allowOpaLayout" />
+
     <java-symbol type="bool" name="config_useSystemClockforRotationSensor" />
 
     <!-- Package Manager -->
diff --git a/packages/SystemUI/res/drawable-hdpi/ic_sysbar_docked.png b/packages/SystemUI/res/drawable-hdpi/ic_sysbar_docked.png
deleted file mode 100755
index 0622ddc420e3372f25aa38c9b1426f8913ec842a..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 1254
zcmeAS@N?(olHy`uVBq!ia0vp^iXhCv1|-9u9Lfh$Ea{HEjtmSN`?>!lvI6-E$sR$z
z3=CCj3=9n|3=F@3LJcn%7)lKo7+xhXFj&oCU=S~uvn$XBD8ZKG?e4<x9|RZdT|OBo
z!dc)ES<Jwo;|;=$OKqpE1PZd3c>21sKVW9z(lyPDao^9tz`ViJ#W5t}@Y`@tkLW;=
z+V}3wx~?XUE;)({NgIN-v_ibh^L9-ro7lT@g5IqOIwC9!J2)O46Fj(-`Rt{R!%jKf
zc_xN;cWju@yKI}MFmIDE--9Vf{@nZhyH4$LR^9&CpASCNw^hIU`TcIWztf4cUQssZ
zyB|ojT>sx|{mz?1Yk7l+Wk$`uC;FXSrVWt|><`##CNt(8Ge7;KwT6>v+qP|sl$0i(
zNdNbp>+>hQ#{Q4oKeuh)o~(52*s&F1tB>A36QJ>>nYGox&8>wc=)rNDqeqV(N!xsJ
zMaQ{wezWGz?cKiJ&)<Kqk4s8Y(xI66`2UO6u6-Mto&EZBNn@dey`5cNqSKGfn~nLO
z1U`HAY*J%m<BX1Z^W<htpRV5Z<K(Gh{=UAUhpM-1+46-iCVx4%nETtZYROLzx!9WH
zL;@osJlfjZ|LZ;a^Jh+cM1;oun>Q61)~#Q!zxMKlix(aF`1mXsK33T9t9H+rKY#rZ
zwWedC>(;JKU9*1u^47CweN~UGU$f?gO6LKE_1CNG%ge)8v`o3l;Cq6RqhMNx`;&g9
zUAuR$^jhkb;UmJx6!jpCzk=7mgW=fA{=U9@$3vYm&iwgPV`O47C8D#bsp*Lqi>u-P
zt_r)2LQ=hI8->`K8#f7hB{tOTI+w_L_3w!`QNx)&;>WfrELphl;l}gNXSb~@d;9jS
zF5|va4XRH*|NeVftb1vX|5NGa=H`^5qDfn}Z@)Zoq9E&@sjix#heK7x8~E3s+O^9n
z)z_ETRH}E$s#RL0stj2-?6ph2Djnebp~O5PU9iGl!Tz+fFv|g-4s(OsrQcW{i+_6i
z{{3+mi@AQMybiY>e)#^;#A%T&2iX5)Byi33b5Bc4OS<~v?c1f6mX?nMziwF2arj}z
z#;CRVZtm{B7qs7BVm+2<^XY>p+p@6L>(de*$og+6soERIIX`s?chBL9>8HPXY$`us
zHuW+8yu*i`S*J|g^lYz?f@Z7d%7(|D34grB4b9EN8~rzJ+&J-N*>2I*t5;_#3UH((
z{rU81lL@o4;DjHHVN7=dCN<8TGpFD{`?Pg?Ls+CDVv^l>dFDOQy^~}*k9nRa!?Dl<
zfhKCw5_VsfvK`xezr|>sfVJ#O-ZMF7-TER6ZVB4Qq{J}E=k(6?&A4>s$`lLJ$neSk
z{{372U`h9e`HhbsC(9quXRbNXz9%*|c89O{@v`FL%^EEs;o*xL?=nBAZxE7ftSMip
zxcPu*YmBR_Yv){^VufGkYqxC+lQ5GxzSMR>kmHlgoScviGEMP!*F5>kz4L13hHk^M
zEMRt4Epd$~Nl7e8wMs5Z1yT$~28L$32FAJuCLx9fRwkxara-oZm4U&%ub#J1H00)|
zWTsW(*06rX$26b@NstY}`DrEPiAAXljw$&`sS2LCiRr09sfj6-g(p)%g%5+LtDnm{
Hr-UW|EVv^Q

diff --git a/packages/SystemUI/res/drawable-land-hdpi/ic_sysbar_docked.png b/packages/SystemUI/res/drawable-land-hdpi/ic_sysbar_docked.png
deleted file mode 100755
index c03ad203f47b9e4ab62752d3b791cad15d8d71e5..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 1151
zcmeAS@N?(olHy`uVBq!ia0vp^iXhCv1|-9u9Lfh$Ea{HEjtmSN`?>!lvI6-E$sR$z
z3=CCj3=9n|3=F@3LJcn%7)lKo7+xhXFj&oCU=S~uvn$XBD8ZKG?e4<x9|RZdT|OBo
z!dc)ES<Jwo;|;=$OKqpE1PZd3c>21sKVW9z(lyPDao^9t!0hSi;usQf_-(kihjgGw
z?PSj=?$9ZZ4*7ezELpkbu8FQl(2CxUDNb+C`D$Of#?i%*=d?Q@ylz*aX4mc}jl4S?
zNBMhmGj|I+dTfZ|?yUdwNWXLDJnLHhv_n2y$}YNoeqfOQ?oRQ&nb!Qz?2ZK~Cu(#l
zB|Hjv&s*d&@5u8Y8+Fd}0oH*rmwYdspZ>3Dakh)a7RL9DmIv5>2s>=7Oi+;Oje97w
zi|@k@!Sue@w_HL^*uuiYlhqV#7X6VEJX*2h{Dj-bEo<u!ND8W5yLQdbhlh{Pt8Dk&
zWzz~Q{>+_x=!l_1hmh043+X~E&xN12Oe#3EO5;oB+(nC&uHC<{f7EBo)~%kBl9DES
zODZZX&a*Cdc6NUE>({SO&z?O~U%Pg#XlQ8Yx|J(eZhv(3+qZA~3WVid&%FM+Z{@mm
zdQ1OIn>MX$)~s2ZIy*W0E9y#0OxjEJQc_blzI*phSa|N-xj|)R+YCN7PxqCSliSxl
zBP1rKX6KS6Ds#oY{QkSX<-xyy|E{-qY1qwwZ+LW$U;3`Y4+AVOU%s5W<oIfHf3;7a
zK1Jl`=NAbdKYskwlP61(YisAOU9;vw-9*oV%*>arM#3j_pZ|7on{%M7yj*_H?ISN<
zyvWr#vTfV8BsHc+halmKxO3+7WIA0^UTo;??X6E|k}?wWpXmXGKl*)o`up!6l%F6g
zBQryAQ-QGl<e407&HXz#xy95roIQKC{kfT;v2k&6W#vp=J-t~1(=Sd4(Ebs_@oMIc
zn>RI&-k*F?UgQ}k&&J=&X92CAU}S7;I#+b&jJb1byIzKJ+$h}J=cgt9_h|N9uOn94
zQ~t5;*g1t?Kwo}OdZF5tb6s(}mM?dY?wm76##dG3p75)li2jwqoEMW{6^7V`1g~v5
zn|3+u(A%<ZY023aPIoRZJNLun%Cq2|_vcRCym#+k$2rcxfcNwHu%Jrg<*Qe_+Qa@x
z?@MLK-^K99=K#~H*1zI1*%=u-9OvxXwJZ9Dd9sN4qX}{^w{72U{qxvWsSg!4hd7FN
z#uzONYdFVnoyXz)r?p|(QXjdvxb!aljkLHiA#>~2t*@e5TU({%x6DpHzU9;@FJq^)
z$tRb@JyuLw(G=Nfee2;pr^3i-yq3VQ-Si;f{Y<IO$Kp)KW*@YvcYO)WXR0Nx5hW>!
zC8<`)MX5lF!N|bSOxM6z*T5vi(7?*X)XEgdwy-iVxcAlb7K(=4{FKbJO57UOulSe-
x)F276Aviy+q&%@GmBBG3KPgqgGdD3kH7GSPrLyp3DyURo@O1TaS?83{1OOCK`ZE9k

diff --git a/packages/SystemUI/res/drawable-land-xhdpi/ic_sysbar_docked.png b/packages/SystemUI/res/drawable-land-xhdpi/ic_sysbar_docked.png
deleted file mode 100755
index bfe2b4a973c6b10db1e1db78c904ea04ed7fbfba..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 1402
zcmZ`(S5#985PgUy8j6ZJC|yOcPz+UkNV0*j5Cf66LIfp&1Vq3@q!;OgDyv9Q+DcQ{
z5D*hEWRU<OAcC|g7TTgn5s?<8g$<v6?3pujXYR~B_ivJH@D@@qc^CiyQdmojod`9z
zb2mg(mE$gniD0KE+8PZ2PtqkeNV`PyVRuVAYXAsU2Y{$J09X@IQIh}=fB=ALA^?Cn
z0C13&S8sbxw1BwbEHJ><cKp@wC_}{Tp;;1ciX3p;DOPHdRW2f-{#a{s=&1Nkn3jQ;
zi$$Zz6obW}9h_Qbb1qw|I>OuLjvW{pWV+5iz`I>7?V%Ib|8-NDZh5}yWaDruX05u*
zOalpr`Fd?kRt#QyoWdW1KY?FL-uqnM)^)=v9%kO29dq)Otqr_#m6qDE6xnY)<x_91
zJ}Y>LfJ(1`H@mkszTY>#!->0EMhL{IXLw~FOQI_*(3JAX&$KT{UAbS#mr26F;Hq>Y
z{tp=|0<c=|*|j(@_GhO~S{_z$hPHoVWo(lM{l_AHBvay)Y`7zZ8Otv+NFnFDC{18&
zkKM71L(0}I(bY;mWs%(#B_bSqNnpC?3$h+3YkguO!Sh01=i8wHA$l|->qK+an4@K?
zFs;ogHK*vjx_EAG?nYnV-RSO2kf2}0O0a|S=AOnco{c`Otqu8dyL|GM{pFW#kqQb5
z8bKTvihqGc5Cz9SheD~?i8CId>2$g(!}%yq7~<{SDYtv4^7^I_JDr1C2yGY-3kyS?
ztdjx{OifNA_DV|L6F17cBE<>}3@i&rj-07UV2sZPD<`y&8fzxz=jXFm0b_!0goBJw
zxpmewx67mTgw1I!EjCe8MNW<bZC}brY#Z+t2m%*-dV1`6Ij*&Ac0+WY@$bdGRtElH
zK9PN?9Dm~keC-au#Mufwdv?`=SN=IRHkSUZtCwk@uYXV9&@gLoR-jv-$l-9pqByo<
ziZ9vkcA<mCMoS%v%gf74xZK?7Lp@_E1<>kGq~o}^olk)NRyUoR+FC*F`O!|%3Cu@A
zMiOFA6)r5)Y^2AJzMJB1!JV{OH8n-@!G3;yEG`!(SXr^>U9U5)ycrNsD(20TuZA#w
zfsIH234&`6)JBpqM<L;A{bpR#P~V7%O(ix@Pft(QiZe4av*W75zTCG>XNFeZNEyke
zA=|A4p$%Yqo0*}Z;jqKv{k`0%gSccpy~dG3W|A~Yc!pQ3Ng(qsj203<9N!EHekZXd
zS@?D2sP;qPw#{f$Q&Xd2$#3HtRwz%7my+gB`xnAyQ*+2UhP)9RmiB5{Z8?j~8|&`I
zFaG%P0|#&%hV8xP!@;~zu^rL8HipI$kX~S!{9am|AZgN`QQa2Fe(w`BJu^cc*O~K}
zd{Hx*cs`$q_-Q+lBGe>;w9L%Rs)B+7X2)F0hwpurIw;iE5q(M8W^;2hG<mjY?b-6T
zZ{L#m*CMQ&Fn;KR1APAbi;j*eK2$1quxY5+1&KrsCx1#73U6Hw2naYbQI?dHv@-Cy
zPo5=v?Ut>x^SZ2`>+3z<bszgJ1hOfmhqAAX88Kr_AKxhW8edUS@iFG`zKjk`wL$Vy
zXam6)`S-FegHcwNK)rrl{m@ghH{IQLTU*Uz3N@KkRdW}q)T;gN__?Vm9WWpNoXyT;
zu~_?jpt>d|*7f!ElG1duOi1MyKMu^PKk?01)dyZ#Ew`X|jZ)FZ$k$S$7o+BH?&MD<
z`BOl5KZ*zdU4)LI7D7)8q3@uB0QC((15s}TA`rvN*bl!5e5qtFkC6WtR6U;e5DDbA
r9qg$d{y`)^3V<e4-6)5#z9dhI9fd>=xzRz{eux0p9FJj|5@Y@YI52{1

diff --git a/packages/SystemUI/res/drawable-land-xxhdpi/ic_sysbar_docked.png b/packages/SystemUI/res/drawable-land-xxhdpi/ic_sysbar_docked.png
deleted file mode 100755
index 5ed0ee8c74f7dded0f72e205894da9c8898720c1..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 1643
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

diff --git a/packages/SystemUI/res/drawable-land-xxxhdpi/ic_sysbar_docked.png b/packages/SystemUI/res/drawable-land-xxxhdpi/ic_sysbar_docked.png
deleted file mode 100755
index d1811629f41719d6dd8d4648c89e8c1325c75b13..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 995
zcmeAS@N?(olHy`uVBq!ia0vp^5g^RL1|$oo8khhn&H|6fVg?2sZxCi&YCCNuP*AeO
zHKHUqKdq!Zu_%?nF(p4KRlzeiF+DXXH8G{K@MNkD0|Rq`r;B4q#jQ7U4(45U5NNyJ
zH`zpW(aHb?4#h$S#UqVg7nmQ(Xtuko5{UT};(0~;)k^*YvK111wgOHW(oz{Y`o?c1
z0-{9oUw!@c;s2!-p+Rr|e6HM+EpO%JD8K?kC9$oEH!eiI5A@k8`*BzGoagm%k1Wm|
z<$ivWRZsQSrie4Gj}~d%(&`fL(p_Ef{Bx!9@uq(wX0y+lP2c+=U2l($824hoZ@mAm
ztqxnw{Ojh4O82ZaYuEBx{@)*$wRM)TzM}xov^_DrXA?de#U9k>>k69k{lfRZYJYbL
zoM+7CPd@+IOh(4>zUKSfkCP(VKi{7kd%*T}Q}Kk<j|Ur0_dU=`4Ddd!r~6=%&Z{8P
zj}JL>rmtGI_qQ)YICnq@(~a^sNBy}i3?jBnc@$Q+t?TyRzkkL5*8Pv|`ZMp~wxrA5
zQ<rnhuFgq}TeRt$P|6$qN8+}2KYX(mxzE4Bw7T_&p^&Xmn=9L&?ne<_-poJW99VVz
z^>Q(W&Ha}9Kg_&yacx+3SjqvOEVTu}@^N1-ZP>t2p*NwI!F=}F`L1khmM%E4pgFm!
z^MV+|aUr$sH32I_jP9;0I1%~nk@ksS%*HGS7<d>B7?=$}i~|D53<hVQ2v`=*fG9&%
z4^}3?usdMcf1Y()|HVu>bmFvmiNQ7wjqn47GV(hOBwa5S2JV^h%#?AB`s9=D;;y~N
zANyxz9ynfN_4mP{?zMYtHowW+e)}%p;SU<;Gv~}%fBEH}Cx0F_^FKQ~ckbNhdV9W9
z?ae(^ul|~y<=vOrBK&3L<?+u$C7w(2wdZTRS3Vi<#qc@3`QU@xd2w!w1*<DP3cZ)k
zP)=9!-?iNJ<Bq#|`>iZ2D)Lub#7)2c+-Ayq&7-wn%jYC&?!56Q_FUY&fIEvL!Zq8U
zRJO&Q`K(-N@vQAs-GWO?f7`M8H~#V}Tyd^lMs>6H>qn`!%a<>V*yE%5V}ZA+=IWG)
z9HT(32_JOCk32r;cjafrx`LOxBWyx9?Tgi4IXm&w3<J5yZ_Z2Sb8i<?(0kTaQg~D7
z$&wW_OU|y`WpVVp@DAxqN4F`sGktf_t60I4ws9?&`b_mV(eEBC3H~Dbk2%%CqNKH3
z)>Gnq$nL(CHf?iXHdS2YYEs~6QqTzhE0(};cj6V@LgOXOzzoXZ>FVdQ&MBb@0I6xa
A=>Px#

diff --git a/packages/SystemUI/res/drawable-land/ic_sysbar_docked.png b/packages/SystemUI/res/drawable-land/ic_sysbar_docked.png
deleted file mode 100755
index 236b70afffef835cf19b3ef83a91d9a7c84173f7..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 907
zcmeAS@N?(olHy`uVBq!ia0vp^Vj#@H1|*Mc$*~4fEa{HEjtmSN`?>!lvI6-E$sR$z
z3=CCj3=9n|3=F@3LJcn%7)lKo7+xhXFj&oCU=S~uvn$XBD8ZKG?e4<x9|RZdT|OBo
z!dc)ES<Jwo;|;=$OKqpE1PZd3c>21sKVW9z(lyPDao^9tz!d7~;uvCa`t8)y*;0Wb
z$JQt3?$XSQy3@Muvg<e9Eg@OTuCx9yo>WVjo0L^9cFWh?t94q_yF1z|xT855oy2@E
zcRlhG*Al6*&Z^zN{Qk_i<&U)|tSNr@_@3o+>-{^+FBH#I@$^yUT@tJ0_*5{g!X)dO
zO^D~E1(ilKeU?6)H2><nrC;xu@ZM?mdHnH*;FlR`Pv$FaTgj9Y<nwl+RNU$f96ACu
zCQ@sa11A0J?fg=IBAa2}gs`V8%PeHp9X_nk$jip8d*sv4Ju^2|G)AlpIp-4iCsc3x
z{_j<L?~AOznzdf4w{7aRyLsl$mY*D+uUL8dNl@nM`|piCPA6PiG-GMdN?orqtGU57
zyQ0OqpX#OYo|&&1ry;WDYSz~Y*BbUMe=OB|%=*I}x7wCRH*>DJ=p-5Gq!d`qHT!&b
z&ZqpPi+5hls$EjCF~a81y7;2=(eHLT8u!)t70&r3xv`^C@Q2!2i+@Zz?&h6NnB!M2
zx*_IDj#+rq`dyE+KbTes?m2dF{<MbsE9+k~{NKZ&^MC0@^L;D38Gar(7}mgFX<xb6
zPV|7i#=O%{eYhX^sC}MOzR{?p=PBo|d*N#?%lz3Dw_d)`U+A*<JIgkgeaV}d{M05p
z>4+sS40vJ3R6lL2Yr_%`l}*C^$Kw;W8&&Vi4a&8Ux!2*gSZAUK$C(5Jjk7nO7TI#J
zFtOL|uNS}d`De}Uiii7-KfdWEetF`ZyzgZO5_gu%RG#R5&b<8c&k6N%%dWppUpGzi
zY^?S4Zw9;Xo?FIjJH5=$oGW%lSAoyL*I$ihpLLVXRWlc@+FEqqQikuF_|Mrd8PDl!
z023dBYKdz^NlIc#s#S7PDv)9@GB7mLH89pSFbOd<ure{VG6k|NtPBk9ef7MBq9Hdw
zB{QuOw}$mAKBfURNP=t#&QB{TPb^Aha7@WhN>%X8O-xS>N=;0uEIgSC${`G%u6{1-
HoD!M<ib{R^

diff --git a/packages/SystemUI/res/drawable-land/ic_sysbar_docked.xml b/packages/SystemUI/res/drawable-land/ic_sysbar_docked.xml
new file mode 100644
index 00000000000..de0d8815cc7
--- /dev/null
+++ b/packages/SystemUI/res/drawable-land/ic_sysbar_docked.xml
@@ -0,0 +1,25 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+     Copyright (C) 2016 The Pure Nexus Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:viewportWidth="88"
+    android:viewportHeight="88"
+    android:width="24.0dp"
+    android:height="24.0dp">
+    <path
+        android:pathData="M38.26 16.43C40.31 18.84 40 23.01 40 26 40 26 40 63 40 63 39.93 75.65 34.62 74.14 24 74 20.66 73.95 17.15 74 15.17 70.77 13.51 68.05 14 60.4 14 57c0 0 0 -31 0 -31 0.01 -5.2 -0.7 -8.21 4.11 -11.26 4.31 -1.09 17.09 -1.91 20.15 1.69zm34 0C74.31 18.84 74 23.01 74 26 74 26 74 63 74 63 73.93 75.65 68.62 74.14 58 74 54.66 73.95 51.15 74 49.17 70.77 47.51 68.05 48 60.4 48 57c0 0 0 -31 0 -31 0.01 -5.2 -0.7 -8.21 4.11 -11.26 4.31 -1.09 17.09 -1.91 20.15 1.69z"
+        android:fillColor="#ffffffff" />
+</vector>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable-ldrtl-hdpi/ic_sysbar_back.png b/packages/SystemUI/res/drawable-ldrtl-hdpi/ic_sysbar_back.png
deleted file mode 100644
index 2fcfdde08164d7c2bdbf11e09ed5df501fe48532..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 1535
zcmV<b1pxYqP)<h;3K|Lk000e1NJLTq0015U001Hg1^@s6NQh~4000HXNkl<Zc$~FX
zZAe>J7{1AEvZ%4ijn<D@vDS~amRZ5-k5yY&EiE!ir_dkker#^Tq5C<D$ecr{Fl0Zr
z;+QZQOvi8x!EP{GP>Rs>Yls_E(b;V^eso5o@w--=J<s*rTQ@S3XnWx0B<Gxap7-N<
z-}6cmhR^3y<<X-@(vv4o3~Os^`r6FQjPzWF1~5B2%h|ZTzOKzit}iYws{79k7?w(d
zgM-ri{Je2>byZqkUgo+C1q|95u0K=YzP>&UyaIC<=1<}76ah%f<)x)1UCC$S0dcXk
zu&{6p^BiObvH-acYd@Hqo3mn1f+9R;92ptW!LMAovLj$w#JCLeEaU;i1sR7d!g?n_
z&jG|xTU$%7=<%mOv7G^rjg7r6fJbpTfu{xdB*crgAHe!70cgN~8UOY8lOx*#cDY>d
zVD`|}<KyGs+`M`7;^W7Uf7g@|AsC0XjbM5l_EhWn{q*#-?*6W>uF!xHI}O<DcDujC
zmbJ37G7sxt0f3fI2?fZ5ez^ZV<oF9rL%N>A`^fyDtoH|uxHVzRa`^D!Xw30VO--)>
z<Y%$}5HbOo2S7J0FWTg8<L2~ZAqocgU2*XoSbUjlb#--?^z?K)jzyVFrsQkauDy@^
z{zX_lD!kwU;MXfFD+jdr^G^KN74VyWTLCkDl9Q8-d3kx^iHV6099Ieo3SR2(@BakW
z{3+s2B6>N)+7D5Hl+F2%u=!8FK)`qI+~G09!Gj0o6DLkY?Af!23Pe{`RlPDXG0}!I
zZo&L9;r?DIbzyXLRK~vQenCPN9Et@8+}_?UMMOkM@$vDh0=c=lrmU<iTV!OU!uYqf
zwY`qZt_$lK`@eYyz<xyhU)J1D@>#7`>FU+1lE>o-4BXw_z1cew096Ifo;_<8@mEq(
zQqrAH=S493-lp{9U2XtgM!b{AbP{i9Xec;~dwP2Q#R-GKAnn_?PyHPe6Jvz?!xIt`
zXnoZA^XGGihlf80z_{=L6=3;&0Ht2l?gU3d2iAtgVv*|W>s4K{v$J>Q<m5!|-o0B*
zzv}AhlOWaiBKCg?=Kl)sh4Ia&<vRi{EG$&rkIH3eZf-W!)YPzu$c>GS*^`r#-!a|*
zWbK~<;qEmwG}yJ6hYU=zX$(b~rS`H&9g;=?K&|g-iRJ9Yn(NlBTW?Y+5YDJFI}~88
z8_}v1#q0G-5Hl`+gQ>)n5~;;Bb0ej`MIkzg&+Q<g<<Ox+!ISIw@#8umNMaCHs+EZ;
z1Hhkr8`VrJr!!2k*4EYwfJm_0?F#CE6~B!~j~<oM($WG0-?(u@1r*k*fJ_ah2o(6j
zw^25yHMfF1zu}vz)YQ}iWcvR7`yE9^MHZ4UE-vnA`3wYn_wHT&^<f`|7RbuZ1bg>|
zl`NSathty<B_$;}xYn_E?_MQ8KR;Yi6q%r<rKKt%gDsgdz>Hw2)Y;j|w)Y%6609$Z
zI5J(Pr>3SlE?v5G2G_;fY_=%4GZM0kfXH>fS>YELZq<QBT(j7L_%<E`g0Vn&an9M%
z(NTtL63u3_l9`!lgOz3iqNYm@hr>VU7Qmlz4c5L0z(xV2rN;~iHQ3wR`*B7_1}W;m
z3#P}BccPyEKcF9Ay%7L#Gg$c+eh-NBP~Tp5BJ4=Y%F2%6)9BdP*eJeOct99O3Cxvb
zSq=>92UsicE@9zAAs%)h>_qTM97<ypUnq1aCR&-4lq69?8X7R(&vF98su9Sj7Dsj*
z>^#_k;CK{@fc?~|Q)(Rf%<1V7>d?yF?c2A{0MILPl4b4>b{gzBa7<wb!cGKWYE#Ge
znJ?A0hi~JJWnh$nfq{>ZN>0?^7QQf8i)P2cII;twl{^myZy)eK!+<U$3>Mfir+^@_
zROHB!BQ|y%+^2<f?K2x%jL=OOPoF*=hM!@0Un7c(i`6)?<Jfi_0}aGioy*J1rIwZ!
lLq$b}8a!CMvp8-s{sClLE735@tkwVk002ovPDHLkV1g(${Xzf$

diff --git a/packages/SystemUI/res/drawable-ldrtl-mdpi/ic_sysbar_back.png b/packages/SystemUI/res/drawable-ldrtl-mdpi/ic_sysbar_back.png
deleted file mode 100644
index 48708a5099a83badc09ffec99fe22ebfa443ba5e..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 965
zcmV;$13LVPP)<h;3K|Lk000e1NJLTq000&M000;W1^@s6{=N-M000AwNkl<Zc$}S-
zUr19?9LLYScX!LmQjwTh*+V0J5XSH?fj$(j-V%Hg5uqO3L#POmAQ`^8{KN1e5+8ag
z|DX>_dkUps+LH^+h{XhDx%sa-H+61qeSf!mhC*)B1BZLgx#xU-zw`b5&X0vcAr_Cv
zl^%=5MCyLOKe2Z1#sT~L`vRbRE*>2niTvNr&d%AvbO?t90swX!@FEUGmktjP1wMB=
zo#}(4(Wn@SMA+``?oAy2f$oEW*WqwjkAGYqDG&%S7$M_nOCgar>+9<^`0k*4(c^&q
z1lSS`1}_{O93=GT-jg$Ffn6@w1AK!B=4YSJ_nyY+M}W-&Vm=mN2?i7LY;A3&1wP!{
z+Z)4jmfdcD3L_4zMbLL4!8;fzA}J^)WB_s{45S2O^Ej4;jEoFzWo4ydVPWAFfG$-Y
z55QfJCI|aSZ$<yr)l~+EC|*gyW2zUL#>Pf1w&+@0Tg!2H2#^icz&Ah|5Ks+*uE=vd
zJ;6!}rfUk5lardNswx=<t_%+kKgQ#+V||bI0{9UI?(zL=Yio=i96hk4;O_2juAwkE
zI7o0!c6RplnVFeqki!}O*Z#o38>He5k^-I!siY7_Mn;%Ur(;H=G4Udso14kN#nRH!
zyNip9F9CI9J&f;{`T2R->-93EsE`yqF)?u>;<%=Sd>4Crds$ak*HxT(0WS$0!VSJ!
zES5{;%+k_Qa`5!@G*h3t5`FS!V`D=EtQPZmiX-|qv>mfrttFIAbS|Y79*;**|0@Lw
zX=lQB9P@p;KC)sK9yS1zV>X-Rl9Cd!y1JSb78WK?HyorYM>Qf3Un|xq-C~%3pPQR|
zehUpyxxKwz%M01|_V(!ygzJjRmjR%K>IQ`$<KJ$#+lKr$QhwLh*K1)!$zOxP!1D9+
z|NB7h)APl~52~&YsZL-VMGtIlZcg;|^_g+xa&2v`>~J_V+=0Bjyp&Hmgur|P{4I^i
z5Y-C=@d>tG%gxP|DWCbZi;Ig>SGVQm<wx+)ua?ai0`-gPL`6l#9n!I_t&Mb4u3c7E
z#$;JO9jbyA>!YKiMbMXujdx{bWvHd4rJU=Chah!!cCxIjES8y>nH<O)>Ht%7Pt)Ju
zUtzP^YB0W1P*9+uI>B{35twvZPfri)=;&ZgO-*85T^$(^1_lN+{3a%o>1;sW=<w9k
n6t4vW2kP~DCP~uyplE*q5<Mxjx#BEl00000NkvXXu0mjf0`0={

diff --git a/packages/SystemUI/res/drawable-ldrtl-xhdpi/ic_sysbar_back.png b/packages/SystemUI/res/drawable-ldrtl-xhdpi/ic_sysbar_back.png
deleted file mode 100644
index 3d731840a93f6ae3743b05956d8dbfc84e132564..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 2084
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
O0000<MNUMnLSTZHSMMJH

diff --git a/packages/SystemUI/res/drawable-ldrtl-xxhdpi/ic_sysbar_back.png b/packages/SystemUI/res/drawable-ldrtl-xxhdpi/ic_sysbar_back.png
deleted file mode 100644
index 786935d5d185c4d4b71659f4a9c868d24d5b0bc2..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 1358
zcmV-U1+n^xP)<h;3K|Lk000e1NJLTq001}u002S=1^@s60zVbG000FQNkl<Zc%1E;
zT}V|~6vy{9%d`(IYMRDAw5AV*dhB6hf(eP4hN&J3%y;Y6hRL@}4?XpuAeApc8X_no
z5}KIMi;hpBh6pP6!3R-MMEpR-Z)g4QIs105UeDS4xX(HJf*bzi?c5{#=UV^0*52nZ
zwm0_1-q;&HkI>rM+AkX$8x^D~Qt|ZkbY{?#QZYi%`ucjs=H}+u77fz>|HHo%@H}0Q
zl)1UNUlYK^MA7`Zyu5sqB_Sv#o4T^H^4bp20@^q;GjpCL5o8MK00Dj!0pwa;U41@0
zJe<We2aQILl)kjI)FcDQ{YihALZ)%rVp97_M-~?sn_U3%wEd#1KcneM%3N4ja1F>s
zC8k0*e{#Sq0{oO{(oIcGPe(>ZKFFl4PX2TRtgWqmOxN?v%F6ChbUsU@?N{>kT^4ZK
z#sKH%=Mw@pG&DS->pzn&lk!?xT8e4n-y}dA$=}z4f^-CIZEbx(*Rx6INEb<03JMBt
z^!N9_BF{x+{24^rIs$ffcK%7%kCRT2PLr^RAfi`GN=j~zj*eDK`tu3%F>M_IySlo5
zr|XAFhe$_F(4R;-q)Vi{nwpv-y8k~JfBIEc907ZKd+*TogUqOx_-+OXJB%MlXGj-F
zS4jEo?d^Zdq%Ae^RbH1BQNT3PK2xdYXG9gL`y;cYE%&EP{q(Y|I0E+d_1!VQlfu5I
z6hINtbhbThWB!yWE1Mp*eX@Xjgv`&W?0eeo=ug?QV)18SfOen>{n_2!9hNOCD*U-y
zKn`gIwe_cLSs~EpY!_*(0&pv+qd&{b%m0#X`^cYvxB*oOXayDWXGcfJGq2k|F97X8
zxB1g$+xJqmtau5?A%*;jvNAb2*&yRjk+#okz^$Nm{&d~;*`=*tfL2hUvLe~`4bINa
zUQYz+H((-A+p;n=H1t-`m(|S3kT}So06C=6w$J=Maq|ok&<bi>R!U1tZ_xtuuK-}W
z`Fmnf)B$iO&_m&H`0V)j_zRH~#jz*dbA%aD)DqANxsT>kL@VT=p#LKE_4U6oBl2-+
zsvRJ960{L+6fG0<{cn|(m1yI#bp{M!=YSoAC>WwPFfj0n?!8LNC7og#rf3KcSg~V3
zEfa;qjszvdghTDbVswldM=NoqBFH)z!VUqQh$t9J1rDI;-aKY>J~_;&oq)sYt3{az
zp|!%!Kokr+4s<qjZ$2|R9YhVC&q-$ZF5LnbSfLML2O#S+>@+Oth{BIf2T?=kbJ(0)
zY9ctl0Hf)M&R^DN=wK{hIn3}H8USn5wzX$|0!Ej88J}S%fgJ^l_n8$egE>Ua55VZM
zFXJ<$;|@N<P9swm%qu|avM&S%3HU5+3z+Xm7TjlrGCsqyFX=PslQkvBhNjQH$SnIR
zedZOQtM&>9z)Z2vR02lRL_vF{)MqLH`O~EoMeUVRpX~~eKR%n9nz}Btje*aao11a0
z=UY0u0*pi=4`~s3BjYm{%f4sB5l}`h+AGhW(<=c~-Ck(}=v8~A1)!Jhl_!9-O1=|a
z_I2}_-G~9UwYA-MTK0AIncaxJPD#q1n3#B<$Y*}HS1L#Bg;-`ByXDr^)fJA7jaB1W
zT~AL>I2n9qH~7O39Jk?#DN+t+j7UL5>oPN5z&p=0_L<YbUmuf2ssR#_#3}I^^It?v
zYo9p{{yYGXh$PY#Fqx+CIVr)cBlggP8KC^dy94IWTKi09SYI08N?NG@0m4@3-Rs?&
QU;qFB07*qoM6N<$f?X4iuK)l5

diff --git a/packages/SystemUI/res/drawable-ldrtl/ic_sysbar_back.xml b/packages/SystemUI/res/drawable-ldrtl/ic_sysbar_back.xml
new file mode 100644
index 00000000000..a76d25e4ff2
--- /dev/null
+++ b/packages/SystemUI/res/drawable-ldrtl/ic_sysbar_back.xml
@@ -0,0 +1,25 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+     Copyright (C) 2016 The Pure Nexus Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:viewportWidth="88"
+    android:viewportHeight="88"
+    android:width="24.0dp"
+    android:height="24.0dp">
+    <path
+        android:pathData="M23 12.88c2.44 0.35 15.9 8.47 19 10.32 0 0 24 14.26 24 14.26 2.87 1.84 6.53 4.55 5.34 8.5 -1.17 3.9 -8.87 7.47 -12.34 9.46 0 0 -27 15.43 -27 15.43 -3.03 1.73 -8.34 5.32 -11.89 4.62C15.66 74.59 16.02 69.48 16 66c0 0 0 -38 0 -38 0 -5.49 -1.3 -11.1 3.15 -15.12 1.83 -0.28 1.7 -0.64 3.85 0z"
+        android:fillColor="#ffffffff" />
+</vector>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable-mdpi/ic_sysbar_docked.png b/packages/SystemUI/res/drawable-mdpi/ic_sysbar_docked.png
deleted file mode 100755
index 93d1905d8c48e8f40fb89234eb4f52ad1b46ead7..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 972
zcmeAS@N?(olHy`uVBq!ia0vp^Vj#@H1|*Mc$*~4fEa{HEjtmSN`?>!lvI6-E$sR$z
z3=CCj3=9n|3=F@3LJcn%7)lKo7+xhXFj&oCU=S~uvn$XBD8ZKG?e4<x9|RZdT|OBo
z!dc)ES<Jwo;|;=$OKqpE1PZd3c>21sKVW9z(lyPDao^9tz%<R%#WBR<^xRP2Y$->H
zd2iGfntSWrbGjH^eR8X4(1f;@FZxHK>zXfIbLO@UNqV*LU(b);<(HOuF74&j(webi
zg=4SbBd)za-rjnCcU`yJ_M288HatG_+vf8*>+=>lCQ=(Ybr}CNMa;UgOM8`1R_>~r
zK#`kA4k#yNTgc=woi|OIY+)3BQ7N(S2z&EEE4EjQ_xs9Z=0Cnswf}znaVMS!5$mr%
zW-Kc%-t4?N!Xd*%%AVEHg1zo;bMcXRjsX*<y#D$&Z~JM6d0TJi?z{YQLyg^j-^pvk
zUW+WPPB4+WZqZlW@h|4WoP!Aw&h?^F>PPnO+jmb%_fpCWk3+3aj;AD=?>~)Nn=mo8
z<~dX3rShps7yrB6$=a&LIeFO<J`KsmBJrt-=N^Atv8&NSMEQ8#F-y%uUdKYFuU@@6
zcGi(stXJ;zJ#hY0cBk1{<rCuxVe#iGS0hgS`1WnuafWUeB{h~m?UKu+3n!m^5`0O?
zH_dGJ@!ipUEKJi}loI>h7Uw5#ykV`oAcEso^T7qIQraphMl&U}#kzH-pVnmzc|QGS
z&bPl$pFY)o(CfBGjc@9v7`@FwD^)T*)6{~KwWWpA;-55ita#5>;?X_*j1TMj5Uu3h
zqCqRK9PjSt4!4^7?~8r_&rzZF9l`D8-<u8y9#7uAGe$3TckAKAqj@(zPM4HFzf)oP
zCWHGqW|lK;n2!{GN}XBnsMfNy=c2u2dd}9UP~*1dDLqfUT@UG}wLI*LeaYgok@Jtk
zcOPyIF@Yyi?==q1^l9rp{`k!M@Ad}|ymyUtyc3}DMdDuC28H8as`h?*{-(rge&ybK
zwcBs+WslhM;KhrK^UpuOwU*(V9OJa?^2=rOrfKSYF!BAIYc^XbWc5{z;;O)qy9?MX
zJSyMw@$ub|=RF+!;p`Gi3t*yEEpd$~Nl7e8wMs5Z1yT$~28L$32FAJuCLx9fRwkxa
zra-oZm4U&%ub#J1H00)|WTsW(*06rX$26b@NstY}`DrEPiAAXljw$&`sS2LCiRr09
Xsfj6-g(p)%S&YHc)z4*}Q$iB}R=k^L

diff --git a/packages/SystemUI/res/drawable-xhdpi/ic_sysbar_docked.png b/packages/SystemUI/res/drawable-xhdpi/ic_sysbar_docked.png
deleted file mode 100755
index 73ddde86cda468d9f06315fe663b0329c82cd974..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 1346
zcmeAS@N?(olHy`uVBq!ia0vp^Iv~u!1|;QLq8Nb`OS+@4BLl<6e(pbstU$g(vPY0F
z14ES>14Ba#1H&(%P{RubhEf9thF1v;3|2E37{m+a><Y92O0Xq)ySp&_2f+n<mrn+Y
za29w(76WbY24Tjfw$oMu1=&kHeO=ifFtc#!nr6nh?+04S<LTlU5^?x##94irM45S!
zYx+CFG)2AVhV9aEbvEUAcqL=jgdhA@R=!;5*`HM#Vww@0xn+@WRcS%NMo#xv7bb^9
zd=xyWWEXzpow#-Fy^qmz&9?4-bH>E??<Dp2XU^?;|M^V*^S`w`$763T{b|1bdNr4$
zz@bKtsRu1A<^SCJ_;I6#h;skzp9|DZW(X~`De3s*<G;YurqY7#_*Vzx3mi7#61_)`
zS|ryTVy>J~zB6Xd-MsYr?nsM`$&R+43upHC^&NUC|NL)dcujplvaN3kW8Q(z&ihkY
z9xLb_({%Wt{HdtI;o$Gzzx6#fxVygp<@03A&78LfIrx&z*REY#y2-PmNZj|Im8Ip)
z+>H@-XU?4Ya*A`CTJ-Ef4@+}%^Z2>$1?IkK^-~)@>&5h$NbqDz1V3R}yD~OD{{57q
zyxiPaj}6Ve+S=Org){TBvv-FD2Ny5hwk^zThR-sVW1Nk#MI7HMcg$96XO$0aHa@v8
z^Z#;|$Fg;r%O6}fu{@NuHA~=I%E5Q<*0E)0c^0(iG?kZ?Suy$XT|CU!zSvac;67f3
zyj^eKzCAB2EG%hZ^2nUoEz%)da{9DsCGG9)e}m3(bBfie@l7+j%k|jfRAnIlW`%dE
z8oBp`Pfb1|xF%ua5@`vEiiVhX({z?h>x}8C&d7LS$9e6?T^0{Mosy$7&ptbTgCp!s
znsot#j26$a#B!^-*B(B6sD44<{^iS$?R%a*c~Wrn=+QYBGkOkXW(5UZdVA;2o!u7t
zK~gtw-gNEJwzRYqzq9MhmoGQ|{Hf8?*MFaLaP{idNk{vuB5F)GZQ2y1rLAqOt)=zF
zYw?~vG4Y|HQ#l*2OMd_HV@FzYa<jCg<VR`YqvdVK+7B=lFx+UUZB0~O$NI?bYSFSl
zwxq|hcV7I6p50ey%)7+(@%h7RvY*<>`5XI|aA~!hJ`%aGYAeUVGMN(}Ww&%l-1;y@
zuSM#p66@NxlZx0v`8d*-JlnZ*XI;#`(Ae16u&Agif4>c;8@DCa)!8k%^2ht*<~@7<
zuucC7bfZg8_)``abtAtLnNuPkI5|1z#4Nl1TA%xeJ(ru?B-fmhk}Z#9+spFv^?TlN
zOP*Mf(<AcaoyCinQ(svex$(YickM>|C4J64y(<>%OFS4SQ^)cv^_cpR2jw1NlT~hn
z^RvshU(EP-uW&`?bD)N#!$})$l=*iv@_#nre!+FvH703UbWBW*lz|ba`c%R7mtW>7
znf6^4Uj1*U=+cAJw`|$M)2XI6AtTq*vokR#XH98Y*|vVWJA1<=_V#ek(QR#QwY(r8
z9gySfeE6mM?<-fXSo|qze*ROXXH~-vp~R1@tgH`9OG{<k{x4!@XWx18VqjiYR+srq
zpFm$<--{BVjE`Tvetmh;<sC0yzWjXjg!gaxx9q;mZz9E9rfmim6{;n!5hW>!C8<`)
zMX5lF!N|bSOxM6z*T5vi(7?*X)XEgdwy-iVxcAlb7K(=4{FKbJO57UOulSe-)F276
tAviy+q&%@GmBBG3KPgqgGdD3kH7GSPrLyp3DyU#%@O1TaS?83{1OQ~)N(2A^

diff --git a/packages/SystemUI/res/drawable-xxhdpi/ic_sysbar_docked.png b/packages/SystemUI/res/drawable-xxhdpi/ic_sysbar_docked.png
deleted file mode 100755
index 1e84732f755ae30f77780ca46b3cffa195648c81..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 1608
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
Do7LM(

diff --git a/packages/SystemUI/res/drawable-xxxhdpi/ic_sysbar_docked.png b/packages/SystemUI/res/drawable-xxxhdpi/ic_sysbar_docked.png
deleted file mode 100755
index ee3ffde568bc31dd9409d6f957c76c92860c0f7c..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 1096
zcmV-O1h@N%P)<h;3K|Lk000e1NJLTq003A3003AB1^@s6ag{JM00009a7bBm001mY
z001mY0i`{bsQ>@~8FWQhbW?9;ba!ELWdK2BZ(?O2No`?gWm08fWO;GPWjp`?1Jy}H
zK~#9!?3~R`6Hye$?|j+8iWJNk6J20JG~hzE#uW?pM128x0(}bI0Syl#dxclfCy=lp
z!O*nwVPQHSp2OVHnh=>=?wFb0|35jQi!$x~&6zXz&bj{z0YMN1K@bE%5ClQckgQSu
zDT<<&<2dW|a)qKb=8Sq2AJa5_XWMqKbihfHELxVeYXI1*KrhkQzmx{J-|x44-~VPH
z+~1Jt>V52aUg1o(RZd2u(bzB;F019b?uJTYs${T7b?Cd{fG@L{%EW#8JJ6ZI{5}tG
zvn-~VD9WxVU`HMl%G4-&^{W7Gfa_n}3ITQ%4(eQ6&@JovIMAbe%~zdg0xD6i=Htb@
z(BmYiF%zfCfG;Rc<P@fkkZs*JbKQVLic<-?t~akrmk7?<M3#y=X0R*2e|66o1i%0c
zzz_ffFaSdUT$72lHtp=}yjWOR=mkL#+IGFpU7DucbF}yN_L@46TeM~5Qv~!S_K}m9
zk7XawpN_~LY@tM;1_N-WBuS1<2d2tE32>*=`D{AiZnyiXEWq*V>gtC$j!#U5%VTE-
zWgMILMBJm8Yq#64qbNE~4HJ)fb93_zF?hl=DxtZx#F>7Z;t|FC^78V_gM))@6F~DA
zd8|BU8v8SfS&FHmSHGp0#gp>jO~Ym&d8dY3VtkYPA+omEwOt!$gbzt2>^!qA1Hf_<
zw@+~<<3bc{ExC#x#vgP#w7Q!R`uloS1AHOjp3Bz*q0qM*CHpLyxeT_UyVzF{a44bX
zja;Q>?kL%p4hDls$8mU{><X>Rr^dYg_UK->9fsjs-}lS65YSw3(Y9?PEd(_7CD(P8
zECfn3fy2YYX+z<%*!Z)1baXUb7GNs~f^}iIg<xi8W?htIA+V_ybp&>~vxR_Ha*<BJ
z{JvWR_*_8zz`ZG_ZmF&kVF~PTAC`8Hh9{pzK!2vUS}g=tk@vzvaI=L*(R!UC!Ed&b
z`<FtwW{>N7|Kgi@l>sx{o~ZW@_d8Vv980)$oz7|Z1D5%yv97f^)qP1oCD$AXfB_f+
zU;qYS2!JamSP1gf1uO*B5iA6#!2o=vU?C{iLXg5jP@aW=AK}GoYisXeAt=W}z$fA^
z#q8GB)+<vj1nqX4Ed+BSvr}l@RhsXM;OWUzgDnK}6c0tVg~2KcP9=+Z!v$}hniAu^
z@%qa9o5)&WU6I)c3jO-(C>DZP!ga-X+Xsfnom&WacmJ7C_+7YB0P#s_$}IK_fE-J>
zKSkEijYP>7g1lUKhAdQ42{{%c{HEGXvd@I_Fbo-jAP9mW=s)V000RI+E#mVc6!hEx
O0000<MNUMnLSTX&b^!+f

diff --git a/packages/SystemUI/res/drawable/halo.xml b/packages/SystemUI/res/drawable/halo.xml
new file mode 100644
index 00000000000..e6ff45fca6a
--- /dev/null
+++ b/packages/SystemUI/res/drawable/halo.xml
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="utf-8"?>
+<shape android:shape="ring" android:useLevel="false" android:innerRadius="@dimen/halo_inner_radius" android:thickness="@dimen/halo_thickness"
+  xmlns:android="http://schemas.android.com/apk/res/android">
+    <solid android:color="#ffffffff" />
+    <size android:height="@dimen/halo_diameter" android:width="@dimen/halo_diameter" />
+</shape>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_back.xml b/packages/SystemUI/res/drawable/ic_sysbar_back.xml
index f32528aa2c7..91647d41e44 100644
--- a/packages/SystemUI/res/drawable/ic_sysbar_back.xml
+++ b/packages/SystemUI/res/drawable/ic_sysbar_back.xml
@@ -1,32 +1,25 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!--
-    Copyright (c) 2015 SlimRoms
+     Copyright (C) 2016 The Pure Nexus Project
 
-    Licensed under the Apache License, Version 2.0 (the "License");
-    you may not use this file except in compliance with the License.
-    You may obtain a copy of the License at
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
 
-        http://www.apache.org/licenses/LICENSE-2.0
+          http://www.apache.org/licenses/LICENSE-2.0
 
-    Unless required by applicable law or agreed to in writing, software
-    distributed under the License is distributed on an "AS IS" BASIS,
-    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-    See the License for the specific language governing permissions and
-    limitations under the License.
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
 -->
 <vector xmlns:android="http://schemas.android.com/apk/res/android"
-    android:width="16.533dp"
-    android:height="19dp"
-    android:viewportWidth="16.533"
-    android:viewportHeight="19">
-
+    android:viewportWidth="88"
+    android:viewportHeight="88"
+    android:width="24.0dp"
+    android:height="24.0dp">
     <path
-        android:fillColor="#FFFFFFFF"
-        android:pathData="M15.302
-18.984c-0.951-0.382-1.792-1.015-2.699-1.495-4.0596-2.373-8.1307-4.726-12.183-7.114-0.97268-0.7699-0.07257-1.938
-0.8444-2.2113 4.5924-2.693 9.1816-5.3901 13.783-8.0672 0.748-0.36831 1.612
-0.37985 1.471 1.1618 0 5.6328 0.04 11.268-0.007 16.9-0.116 0.537-0.659
-0.928-1.209 0.826zm-0.888-9.4812c-0.002-2.1896-0.003-4.3803-0.005-6.5699-3.747
-2.1938-7.4938 4.3898-11.241 6.5836 3.7493 2.1875 7.497 4.3775 11.251 6.5585
-0-2.191-0.003-4.381-0.005-6.5722z" />
-</vector>
\ No newline at end of file
+        android:pathData="M72 21c0 0 0 44 0 44 -0.01 3.31 0.56 8.72 -3.23 10.22C65.01 76.71 59.2 72.67 56 70.85 56 70.85 27 54.28 27 54.28 23.21 52.13 15.01 48.55 16.66 43.04c1 -3.39 5.48 -5.67 8.34 -7.32 0 0 20 -11.92 20 -11.92 4.8 -2.87 15.31 -9.36 20 -11.1 6.16 -0.36 6.9 2.9 7 8.3z"
+        android:fillColor="#ffffffff" />
+</vector>
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_back_dark.xml b/packages/SystemUI/res/drawable/ic_sysbar_back_dark.xml
index c350d4f3406..67edbf852d1 100644
--- a/packages/SystemUI/res/drawable/ic_sysbar_back_dark.xml
+++ b/packages/SystemUI/res/drawable/ic_sysbar_back_dark.xml
@@ -1,14 +1,10 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!--
-    Copyright (c) 2015 SlimRoms
-    Copyright (c) 2017 CypherOS
-
+    Copyright (C) 2017 CypherOS
     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
-
         http://www.apache.org/licenses/LICENSE-2.0
-
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@@ -16,19 +12,13 @@
     limitations under the License.
 -->
 <vector xmlns:android="http://schemas.android.com/apk/res/android"
-    android:width="16.533dp"
-    android:height="19dp"
-    android:viewportWidth="16.533"
-    android:viewportHeight="19"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="88"
+    android:viewportHeight="88"
     android:tint="#7a000000">
 
     <path
-        android:fillColor="#FFFFFFFF"
-        android:pathData="M15.302
-18.984c-0.951-0.382-1.792-1.015-2.699-1.495-4.0596-2.373-8.1307-4.726-12.183-7.114-0.97268-0.7699-0.07257-1.938
-0.8444-2.2113 4.5924-2.693 9.1816-5.3901 13.783-8.0672 0.748-0.36831 1.612
-0.37985 1.471 1.1618 0 5.6328 0.04 11.268-0.007 16.9-0.116 0.537-0.659
-0.928-1.209 0.826zm-0.888-9.4812c-0.002-2.1896-0.003-4.3803-0.005-6.5699-3.747
-2.1938-7.4938 4.3898-11.241 6.5836 3.7493 2.1875 7.497 4.3775 11.251 6.5585
-0-2.191-0.003-4.381-0.005-6.5722z" />
-</vector>
\ No newline at end of file
+        android:fillColor="@android:color/white"
+        android:pathData="M64.55,12.62C67.66,10.72 72.05,13.33 71.99,16.94C72.12,35 72.01,53.07 72.05,71.13C71.97,73.99 69.63,75.84 67.01,76.34C64.39,75.81 62.34,74.16 60.02,72.95C46.32,65.08 32.64,57.17 18.9,49.36C15.15,47.63 15.09,41.57 18.78,39.72C34.03,30.68 49.26,21.61 64.55,12.62Z"/>
+</vector>
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_back_ime.xml b/packages/SystemUI/res/drawable/ic_sysbar_back_ime.xml
index 2d8c36b9f48..d8e3c496805 100644
--- a/packages/SystemUI/res/drawable/ic_sysbar_back_ime.xml
+++ b/packages/SystemUI/res/drawable/ic_sysbar_back_ime.xml
@@ -1,38 +1,25 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!--
-    Copyright (c) 2015 SlimRoms
+     Copyright (C) 2016 The Pure Nexus Project
 
-    Licensed under the Apache License, Version 2.0 (the "License");
-    you may not use this file except in compliance with the License.
-    You may obtain a copy of the License at
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
 
-        http://www.apache.org/licenses/LICENSE-2.0
+          http://www.apache.org/licenses/LICENSE-2.0
 
-    Unless required by applicable law or agreed to in writing, software
-    distributed under the License is distributed on an "AS IS" BASIS,
-    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-    See the License for the specific language governing permissions and
-    limitations under the License.
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
 -->
 <vector xmlns:android="http://schemas.android.com/apk/res/android"
-    android:width="21.756dp"
-    android:height="16dp"
-    android:viewportWidth="21.756"
-    android:viewportHeight="16">
-
+    android:viewportWidth="88"
+    android:viewportHeight="88"
+    android:width="24.0dp"
+    android:height="24.0dp">
     <path
-        android:fillColor="#FFFFFFFF"
-        android:pathData="M10.758
-15.994c-0.277-0.039-0.457-0.105-0.648-0.234-0.1694-0.115-0.1404-0.075-2.1527-2.978-1.0521-1.517-3.2289-4.6575-4.8385-6.9782-1.6096-2.3219-2.9495-4.2556-2.9761-4.2979-0.10158-0.156-0.1427-0.2951-0.1427-0.4825
-0-0.19711 0.041117-0.33013 0.156-0.50185 0.17414-0.26364 0.5055-0.45834
-0.8586-0.50429 0.0641-0.008468 3.2652-0.013305 9.8994-0.015724 9.455-0.0036278
-9.808-0.0024185 9.903 0.01814 0.396 0.087074 0.702 0.30595 0.849 0.60828 0.068
-0.13908 0.088 0.22736 0.09 0.38334 0 0.156-0.023 0.26-0.087 0.3894-0.025
-0.0484-1.73 2.5287-3.788 5.5121-2.059 2.9822-4.24 6.1422-4.847 7.0202-0.746
-1.082-1.127 1.625-1.181 1.683-0.187 0.197-0.438 0.32-0.749 0.368-0.103
-0.015-0.271 0.021-0.346 0.01zm1.981-5.733c1.004-1.4544 2.669-3.8658 3.698-5.3581
-1.029-1.4911 1.895-2.7452 1.924-2.7863l0.053-0.0738h-7.53c-6.291 0-7.5293
-0.0025-7.5245 0.0158 0.0036 0.0084 0.5176 0.7534 1.1416 1.6543 4.1649 6.0067
-6.2919 9.0741 6.3379 9.1401 0.03 0.041 0.058 0.07 0.063 0.065 0.005-0.006
-0.832-1.201 1.837-2.657z" />
+        android:pathData="M33 16c0 0 33 0 33 0 3.48 0.02 8.59 -0.34 9.47 4.11 0.73 3.7 -3.37 9.69 -5.19 12.89 0 0 -16 28 -16 28C52.13 64.79 48.55 72.99 43.04 71.34 39.23 70.21 35.8 63.33 33.8 60 33.8 60 16.01 30 16.01 30 13.37 25.46 9.91 20.59 15.23 16.74 20.2 15.42 27.67 16 33 16Z"
+        android:fillColor="#ffffffff" />
 </vector>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_back_ime_dark.xml b/packages/SystemUI/res/drawable/ic_sysbar_back_ime_dark.xml
index 957abc9f43f..29f1f40fabd 100644
--- a/packages/SystemUI/res/drawable/ic_sysbar_back_ime_dark.xml
+++ b/packages/SystemUI/res/drawable/ic_sysbar_back_ime_dark.xml
@@ -1,14 +1,10 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!--
-    Copyright (c) 2015 SlimRoms
-    Copyright (c) 2017 CypherOS
-
+    Copyright (C) 2017 CypherOS
     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
-
         http://www.apache.org/licenses/LICENSE-2.0
-
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@@ -16,25 +12,13 @@
     limitations under the License.
 -->
 <vector xmlns:android="http://schemas.android.com/apk/res/android"
-    android:width="21.756dp"
-    android:height="16dp"
-    android:viewportWidth="21.756"
-    android:viewportHeight="16"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="88"
+    android:viewportHeight="88"
     android:tint="#7a000000">
 
     <path
-        android:fillColor="#FFFFFFFF"
-        android:pathData="M10.758
-15.994c-0.277-0.039-0.457-0.105-0.648-0.234-0.1694-0.115-0.1404-0.075-2.1527-2.978-1.0521-1.517-3.2289-4.6575-4.8385-6.9782-1.6096-2.3219-2.9495-4.2556-2.9761-4.2979-0.10158-0.156-0.1427-0.2951-0.1427-0.4825
-0-0.19711 0.041117-0.33013 0.156-0.50185 0.17414-0.26364 0.5055-0.45834
-0.8586-0.50429 0.0641-0.008468 3.2652-0.013305 9.8994-0.015724 9.455-0.0036278
-9.808-0.0024185 9.903 0.01814 0.396 0.087074 0.702 0.30595 0.849 0.60828 0.068
-0.13908 0.088 0.22736 0.09 0.38334 0 0.156-0.023 0.26-0.087 0.3894-0.025
-0.0484-1.73 2.5287-3.788 5.5121-2.059 2.9822-4.24 6.1422-4.847 7.0202-0.746
-1.082-1.127 1.625-1.181 1.683-0.187 0.197-0.438 0.32-0.749 0.368-0.103
-0.015-0.271 0.021-0.346 0.01zm1.981-5.733c1.004-1.4544 2.669-3.8658 3.698-5.3581
-1.029-1.4911 1.895-2.7452 1.924-2.7863l0.053-0.0738h-7.53c-6.291 0-7.5293
-0.0025-7.5245 0.0158 0.0036 0.0084 0.5176 0.7534 1.1416 1.6543 4.1649 6.0067
-6.2919 9.0741 6.3379 9.1401 0.03 0.041 0.058 0.07 0.063 0.065 0.005-0.006
-0.832-1.201 1.837-2.657z" />
-</vector>
\ No newline at end of file
+        android:fillColor="@android:color/white"
+        android:pathData="M16.11,16.11C34.41,15.87 52.74,16.05 71.05,16.02C74.76,15.94 77.25,20.45 75.4,23.61C66.61,39.03 57.76,54.44 48.87,69.8C46.91,72.92 42.05,72.85 39.97,69.88C30.84,54.46 21.66,39.05 12.58,23.61C10.99,20.69 12.76,16.63 16.11,16.11Z"/>
+</vector>
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_docked.xml b/packages/SystemUI/res/drawable/ic_sysbar_docked.xml
new file mode 100644
index 00000000000..62c8247c9f0
--- /dev/null
+++ b/packages/SystemUI/res/drawable/ic_sysbar_docked.xml
@@ -0,0 +1,25 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+     Copyright (C) 2016 The Pure Nexus Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:viewportWidth="88"
+    android:viewportHeight="88"
+    android:width="24.0dp"
+    android:height="24.0dp">
+    <path
+        android:pathData="M35 14c0 0 28 0 28 0 2.79 0.02 6.32 -0.18 8.57 1.74 3.61 3.07 3.61 19.45 0 22.52C69.16 40.31 64.99 40 62 40c0 0 -37 0 -37 0 -3.16 -0.02 -7 0.23 -9.26 -2.43 -2.32 -2.72 -2.41 -16.19 -1 -19.46 0.93 -2.18 1.58 -2.23 3.37 -3.37C23.2 13.45 29.67 14 35 14Zm0 34c0 0 28 0 28 0 2.79 0.02 6.32 -0.18 8.57 1.74 3.55 3.02 3.55 19.5 0 22.52C69.16 74.31 64.99 74 62 74c0 0 -37 0 -37 0 -3.16 -0.02 -7 0.23 -9.26 -2.43 -2.32 -2.72 -2.41 -16.19 -1 -19.46 0.93 -2.18 1.58 -2.23 3.37 -3.37C23.2 47.45 29.67 48 35 48Z"
+        android:fillColor="#ffffffff" />
+</vector>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_home.xml b/packages/SystemUI/res/drawable/ic_sysbar_home.xml
index 5b487d127be..7eb8b55906c 100644
--- a/packages/SystemUI/res/drawable/ic_sysbar_home.xml
+++ b/packages/SystemUI/res/drawable/ic_sysbar_home.xml
@@ -1,42 +1,25 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!--
-    Copyright (c) 2015 SlimRoms
+     Copyright (C) 2016 The Pure Nexus Project
 
-    Licensed under the Apache License, Version 2.0 (the "License");
-    you may not use this file except in compliance with the License.
-    You may obtain a copy of the License at
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
 
-        http://www.apache.org/licenses/LICENSE-2.0
+          http://www.apache.org/licenses/LICENSE-2.0
 
-    Unless required by applicable law or agreed to in writing, software
-    distributed under the License is distributed on an "AS IS" BASIS,
-    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-    See the License for the specific language governing permissions and
-    limitations under the License.
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
 -->
 <vector xmlns:android="http://schemas.android.com/apk/res/android"
-    android:width="17.995dp"
-    android:height="18dp"
-    android:viewportWidth="17.995"
-    android:viewportHeight="18">
-
+    android:viewportWidth="88"
+    android:viewportHeight="88"
+    android:width="24.0dp"
+    android:height="24.0dp">
     <path
-        android:fillColor="#FFFFFFFF"
-        android:pathData="M8.5764
-17.99c-0.368-0.017-0.8101-0.067-1.1731-0.133-2.3603-0.428-4.4486-1.781-5.8247-3.775-1.1772-1.706-1.7253-3.787-1.5452-5.8608
-0.15796-1.8132 0.86104-3.5284 2.0222-4.9366 1.2272-1.4862 2.8874-2.5403
-4.7396-3.0094 1.2071-0.30602 2.4453-0.35703 3.6888-0.152 1.324 0.21802 2.624
-0.75709 3.722 1.5422 1.972 1.4092 3.288 3.5164 3.676 5.8837 0.085 0.5131 0.114
-0.8921 0.113 1.4612 0 0.434-0.011 0.6421-0.053 1.0147-0.178 1.57-0.782
-3.086-1.733 4.353-1.809 2.408-4.646 3.751-7.6326
-3.612zm0.8491-2.178c1.5465-0.102 2.9585-0.686 4.1045-1.698 0.134-0.118
-0.427-0.41 0.552-0.549 0.867-0.968 1.432-2.139 1.646-3.413 0.067-0.3916
-0.095-0.7376 0.095-1.1517
-0-0.3-0.009-0.4781-0.04-0.7641-0.215-1.9882-1.313-3.7965-2.982-4.9126-0.447-0.298-0.99-0.5721-1.48-0.7471-0.62-0.22-1.223-0.344-1.8925-0.389-0.189-0.012-0.6661-0.012-0.8571
-0-1.5592 0.103-2.9844 0.6991-4.1365 1.7302-0.139 0.125-0.431 0.419-0.5491
-0.552-0.9331 1.0582-1.5191 2.3793-1.6682 3.7665-0.031 0.285-0.04 0.4571-0.04
-0.7641s0.009 0.4781 0.04 0.7641c0.1491 1.3866 0.7351 2.7086 1.6682 3.7656 0.1171
-0.132 0.4091 0.426 0.5491 0.552 1.0321 0.926 2.3093 1.51 3.6815 1.686 0.104
-0.013 0.253 0.028 0.331 0.034 0.079 0.006 0.161 0.012 0.183 0.014 0.099 0.008
-0.6591 0.005 0.7951-0.004z" />
+        android:pathData="M55 13.95C86.37 25.66 81.13 71.07 49 75.7 22.41 79.54 3.43 52.71 15.79 29c1.96 -3.77 3.9 -6.76 7.25 -9.47 4.7 -3.81 10.09 -5.95 15.96 -7.09 5.54 -0.71 10.71 -0.47 16 1.51z"
+        android:fillColor="#ffffffff" />
 </vector>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_home_dark.xml b/packages/SystemUI/res/drawable/ic_sysbar_home_dark.xml
index bc1f67976b3..b6f6c435acd 100644
--- a/packages/SystemUI/res/drawable/ic_sysbar_home_dark.xml
+++ b/packages/SystemUI/res/drawable/ic_sysbar_home_dark.xml
@@ -1,14 +1,10 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!--
-    Copyright (c) 2015 SlimRoms
-    Copyright (c) 2017 CypherOS
-
+    Copyright (C) 2017 CypherOS
     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
-
         http://www.apache.org/licenses/LICENSE-2.0
-
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@@ -16,29 +12,16 @@
     limitations under the License.
 -->
 <vector xmlns:android="http://schemas.android.com/apk/res/android"
-    android:width="17.995dp"
-    android:height="18dp"
-    android:viewportWidth="17.995"
-    android:viewportHeight="18"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="88"
+    android:viewportHeight="88"
     android:tint="#7a000000">
 
     <path
-        android:fillColor="#FFFFFFFF"
-        android:pathData="M8.5764
-17.99c-0.368-0.017-0.8101-0.067-1.1731-0.133-2.3603-0.428-4.4486-1.781-5.8247-3.775-1.1772-1.706-1.7253-3.787-1.5452-5.8608
-0.15796-1.8132 0.86104-3.5284 2.0222-4.9366 1.2272-1.4862 2.8874-2.5403
-4.7396-3.0094 1.2071-0.30602 2.4453-0.35703 3.6888-0.152 1.324 0.21802 2.624
-0.75709 3.722 1.5422 1.972 1.4092 3.288 3.5164 3.676 5.8837 0.085 0.5131 0.114
-0.8921 0.113 1.4612 0 0.434-0.011 0.6421-0.053 1.0147-0.178 1.57-0.782
-3.086-1.733 4.353-1.809 2.408-4.646 3.751-7.6326
-3.612zm0.8491-2.178c1.5465-0.102 2.9585-0.686 4.1045-1.698 0.134-0.118
-0.427-0.41 0.552-0.549 0.867-0.968 1.432-2.139 1.646-3.413 0.067-0.3916
-0.095-0.7376 0.095-1.1517
-0-0.3-0.009-0.4781-0.04-0.7641-0.215-1.9882-1.313-3.7965-2.982-4.9126-0.447-0.298-0.99-0.5721-1.48-0.7471-0.62-0.22-1.223-0.344-1.8925-0.389-0.189-0.012-0.6661-0.012-0.8571
-0-1.5592 0.103-2.9844 0.6991-4.1365 1.7302-0.139 0.125-0.431 0.419-0.5491
-0.552-0.9331 1.0582-1.5191 2.3793-1.6682 3.7665-0.031 0.285-0.04 0.4571-0.04
-0.7641s0.009 0.4781 0.04 0.7641c0.1491 1.3866 0.7351 2.7086 1.6682 3.7656 0.1171
-0.132 0.4091 0.426 0.5491 0.552 1.0321 0.926 2.3093 1.51 3.6815 1.686 0.104
-0.013 0.253 0.028 0.331 0.034 0.079 0.006 0.161 0.012 0.183 0.014 0.099 0.008
-0.6591 0.005 0.7951-0.004z" />
-</vector>
\ No newline at end of file
+        android:fillColor="@android:color/white"
+        android:pathData="M36.51,4.74C45.95,2.92 56.04,4.65 64.3,9.59C72.73,14.55 79.23,22.7 82.14,32.05C85.29,41.99 84.33,53.16 79.47,62.4C74.78,71.46 66.52,78.59 56.84,81.84C46.91,85.26 35.63,84.52 26.24,79.8C16.87,75.16 9.46,66.72 6.14,56.8C2.49,46.17 3.63,34.02 9.25,24.28C14.92,14.22 25.14,6.85 36.51,4.74M37.44,8.62C30.81,9.84 24.55,12.99 19.61,17.58C7.96,27.98 4.61,46.27 11.84,60.12C18.84,74.62 36.3,82.95 51.97,79.08C68.67,75.61 81.26,58.97 79.91,41.93C79.36,30.58 72.96,19.77 63.38,13.7C55.79,8.78 46.32,6.96 37.44,8.62Z"/>
+    <path
+        android:fillColor="@android:color/white"
+        android:pathData="M37.52,14.72C52.83,10.93 69.67,21.43 73.1,36.79C77.18,51.67 67.65,68.43 52.85,72.65C39.2,77.17 23.08,70.15 17.05,57.12C10.56,44.46 14.86,27.62 26.6,19.59C29.86,17.25 33.6,15.59 37.52,14.72Z"/>
+</vector>
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_opa_blue.xml b/packages/SystemUI/res/drawable/ic_sysbar_opa_blue.xml
new file mode 100644
index 00000000000..a3df91cde20
--- /dev/null
+++ b/packages/SystemUI/res/drawable/ic_sysbar_opa_blue.xml
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="utf-8"?>
+<shape android:shape="oval"
+  xmlns:android="http://schemas.android.com/apk/res/android">
+    <size android:height="@dimen/opa_dot_diam" android:width="@dimen/opa_dot_diam" />
+    <solid android:color="#ff4285f4" />
+</shape>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_opa_green.xml b/packages/SystemUI/res/drawable/ic_sysbar_opa_green.xml
new file mode 100644
index 00000000000..6814ba11c94
--- /dev/null
+++ b/packages/SystemUI/res/drawable/ic_sysbar_opa_green.xml
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="utf-8"?>
+<shape android:shape="oval"
+  xmlns:android="http://schemas.android.com/apk/res/android">
+    <size android:height="@dimen/opa_dot_diam" android:width="@dimen/opa_dot_diam" />
+    <solid android:color="#ff34a853" />
+</shape>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_opa_red.xml b/packages/SystemUI/res/drawable/ic_sysbar_opa_red.xml
new file mode 100644
index 00000000000..5d44c611ef6
--- /dev/null
+++ b/packages/SystemUI/res/drawable/ic_sysbar_opa_red.xml
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="utf-8"?>
+<shape android:shape="oval"
+  xmlns:android="http://schemas.android.com/apk/res/android">
+    <size android:height="@dimen/opa_dot_diam" android:width="@dimen/opa_dot_diam" />
+    <solid android:color="#ffea4335" />
+</shape>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_opa_yellow.xml b/packages/SystemUI/res/drawable/ic_sysbar_opa_yellow.xml
new file mode 100644
index 00000000000..e56b8c818c7
--- /dev/null
+++ b/packages/SystemUI/res/drawable/ic_sysbar_opa_yellow.xml
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="utf-8"?>
+<shape android:shape="oval"
+  xmlns:android="http://schemas.android.com/apk/res/android">
+    <size android:height="@dimen/opa_dot_diam" android:width="@dimen/opa_dot_diam" />
+    <solid android:color="#fffbbc05" />
+</shape>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_recent.xml b/packages/SystemUI/res/drawable/ic_sysbar_recent.xml
index 345268ded52..ed54bd17730 100644
--- a/packages/SystemUI/res/drawable/ic_sysbar_recent.xml
+++ b/packages/SystemUI/res/drawable/ic_sysbar_recent.xml
@@ -1,34 +1,25 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!--
-    Copyright (c) 2015 SlimRoms
+     Copyright (C) 2016 The Pure Nexus Project
 
-    Licensed under the Apache License, Version 2.0 (the "License");
-    you may not use this file except in compliance with the License.
-    You may obtain a copy of the License at
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
 
-        http://www.apache.org/licenses/LICENSE-2.0
+          http://www.apache.org/licenses/LICENSE-2.0
 
-    Unless required by applicable law or agreed to in writing, software
-    distributed under the License is distributed on an "AS IS" BASIS,
-    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-    See the License for the specific language governing permissions and
-    limitations under the License.
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
 -->
 <vector xmlns:android="http://schemas.android.com/apk/res/android"
-    android:width="15.994dp"
-    android:height="16dp"
-    android:viewportWidth="15.994"
-    android:viewportHeight="16">
-
+    android:viewportWidth="88"
+    android:viewportHeight="88"
+    android:width="24.0dp"
+    android:height="24.0dp">
     <path
-        android:fillColor="#FFFFFFFF"
-        android:pathData="M1.3726
-15.991c-0.44225-0.05-0.85907-0.307-1.1131-0.685-0.12559-0.188-0.2033-0.386-0.24654-0.628-0.017518-0.098-0.017518-13.257-0.000006-13.354
-0.032624-0.183 0.083475-0.33675 0.15818-0.47875 0.24568-0.46682 0.69859-0.77903
-1.2121-0.83553 0.1154-0.012711 13.112-0.013066 13.226-0.0004167 0.179 0.020001
-0.338 0.065692 0.501 0.14393 0.467 0.22422 0.793 0.66542 0.872 1.1791 0.009
-0.0608 0.012 1.2834 0.012 6.6684 0 5.3853-0.002 6.6083-0.012 6.6683-0.108
-0.701-0.671 1.245-1.373 1.323-0.098 0.011-13.14
-0.011-13.236-0.001zm12.609-7.9903v-5.9762h-5.9846-5.985v5.9762 5.9763h5.985
-5.9846v-5.9763z" />
+        android:pathData="M34 14c0 0 31 0 31 0 8.7 0.16 8.98 3.34 9 11 0 0 0 33 0 33 0 3.55 0.67 11 -1.6 13.69 -2.27 2.69 -6.22 2.3 -9.4 2.31 0 0 -40 0 -40 0 -7.07 -0.13 -8.87 -1.93 -9 -9 0 0 0 -35 0 -35C14 24.45 12.7 18.96 17.15 15.02 22.21 13.22 28.61 14 34 14Z"
+        android:fillColor="#ffffffff" />
 </vector>
\ No newline at end of file
diff --git a/packages/SystemUI/res/drawable/ic_sysbar_recent_dark.xml b/packages/SystemUI/res/drawable/ic_sysbar_recent_dark.xml
index 8cde00d0f3e..acc87e0317e 100644
--- a/packages/SystemUI/res/drawable/ic_sysbar_recent_dark.xml
+++ b/packages/SystemUI/res/drawable/ic_sysbar_recent_dark.xml
@@ -1,14 +1,10 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!--
-    Copyright (c) 2015 SlimRoms
-    Copyright (c) 2017 CypherOS
-
+    Copyright (C) 2017 CypherOS
     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
-
         http://www.apache.org/licenses/LICENSE-2.0
-
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@@ -16,21 +12,13 @@
     limitations under the License.
 -->
 <vector xmlns:android="http://schemas.android.com/apk/res/android"
-    android:width="15.994dp"
-    android:height="16dp"
-    android:viewportWidth="15.994"
-    android:viewportHeight="16"
+    android:width="24dp"
+    android:height="24dp"
+    android:viewportWidth="88"
+    android:viewportHeight="88"
     android:tint="#7a000000">
 
     <path
-        android:fillColor="#FFFFFFFF"
-        android:pathData="M1.3726
-15.991c-0.44225-0.05-0.85907-0.307-1.1131-0.685-0.12559-0.188-0.2033-0.386-0.24654-0.628-0.017518-0.098-0.017518-13.257-0.000006-13.354
-0.032624-0.183 0.083475-0.33675 0.15818-0.47875 0.24568-0.46682 0.69859-0.77903
-1.2121-0.83553 0.1154-0.012711 13.112-0.013066 13.226-0.0004167 0.179 0.020001
-0.338 0.065692 0.501 0.14393 0.467 0.22422 0.793 0.66542 0.872 1.1791 0.009
-0.0608 0.012 1.2834 0.012 6.6684 0 5.3853-0.002 6.6083-0.012 6.6683-0.108
-0.701-0.671 1.245-1.373 1.323-0.098 0.011-13.14
-0.011-13.236-0.001zm12.609-7.9903v-5.9762h-5.9846-5.985v5.9762 5.9763h5.985
-5.9846v-5.9763z" />
-</vector>
\ No newline at end of file
+        android:fillColor="@android:color/white"
+        android:pathData="M14.01,19.99C13.73,16.72 16.63,13.75 19.92,14.03C35.29,13.94 50.66,14.06 66.03,13.97C68.2,14.01 70.73,13.86 72.33,15.61C74.13,17.21 74.01,19.77 74.06,21.97C74.03,36.98 74.05,52 74.06,67.02C73.99,68.58 73.87,70.18 73.32,71.65C71.62,73.28 69.39,74.21 67.01,74.02C51.66,73.99 36.3,73.99 20.95,74.02C18.54,74.22 16.33,73.23 14.61,71.59C13.88,69.13 13.9,66.54 13.93,64.01C14.03,49.34 13.86,34.66 14.01,19.99Z"/>
+</vector>
diff --git a/packages/SystemUI/res/layout/home.xml b/packages/SystemUI/res/layout/home.xml
index 7b67b79f943..f042747829a 100644
--- a/packages/SystemUI/res/layout/home.xml
+++ b/packages/SystemUI/res/layout/home.xml
@@ -13,19 +13,27 @@
      See the License for the specific language governing permissions and
      limitations under the License.
 -->
-<com.android.systemui.statusbar.policy.KeyButtonView
+<com.google.android.systemui.OpaLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:systemui="http://schemas.android.com/apk/res-auto"
     android:id="@+id/home"
+    android:clipChildren="false"
+    android:clipToPadding="false"
     android:layout_width="@dimen/navigation_key_width"
-    android:layout_height="match_parent"
-    android:layout_weight="0"
-    systemui:keyCode="3"
-    android:scaleType="fitCenter"
-    android:contentDescription="@string/accessibility_home"
+    android:layout_height="fill_parent"
+    android:layout_weight="0.0"
+    android:scale_type="fitCenter"
     android:paddingTop="@dimen/home_padding"
     android:paddingBottom="@dimen/home_padding"
     android:paddingStart="@dimen/navigation_key_padding"
-    android:paddingEnd="@dimen/navigation_key_padding"
-    />
-
+    android:paddingEnd="@dimen/navigation_key_padding" >
+        <RelativeLayout android:layout_width="fill_parent" android:layout_height="fill_parent">
+            <ImageView android:id="@+id/red" android:src="@drawable/ic_sysbar_opa_red" android:importantForAccessibility="no" style="@style/DotStyle" />
+            <ImageView android:id="@+id/blue" android:src="@drawable/ic_sysbar_opa_blue" android:importantForAccessibility="no" style="@style/DotStyle" />
+            <ImageView android:id="@+id/green" android:src="@drawable/ic_sysbar_opa_green" android:importantForAccessibility="no" style="@style/DotStyle" />
+            <ImageView android:id="@+id/yellow" android:src="@drawable/ic_sysbar_opa_yellow" android:importantForAccessibility="no" style="@style/DotStyle" />
+        </RelativeLayout>
+        <ImageView android:layout_gravity="center" android:id="@+id/white" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_sysbar_home" android:importantForAccessibility="no" />
+        <com.android.systemui.statusbar.policy.KeyButtonView android:layout_gravity="center" android:id="@+id/home_button" android:layout_width="@dimen/navigation_key_width" android:layout_height="fill_parent" android:scaleType="center" android:contentDescription="@string/accessibility_home" systemui:keyCode="3" />
+        <ImageView android:layout_gravity="center" android:id="@+id/halo" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/halo" android:importantForAccessibility="no" />
+</com.google.android.systemui.OpaLayout>
diff --git a/packages/SystemUI/res/values/lineage_colors.xml b/packages/SystemUI/res/values/lineage_colors.xml
new file mode 100644
index 00000000000..b8d34792dff
--- /dev/null
+++ b/packages/SystemUI/res/values/lineage_colors.xml
@@ -0,0 +1,16 @@
+<resources>
+    <!-- OPA home dimens -->
+    <dimen name="halo_inner_radius">10.0dip</dimen>
+    <dimen name="halo_thickness">1.0dip</dimen>
+    <dimen name="halo_diameter">22.0dip</dimen>
+    <dimen name="opa_dot_diam">10.0dip</dimen>
+    <dimen name="opa_diamond_translation">16.0dip</dimen>
+    <dimen name="opa_line_y_translation">16.0dip</dimen>
+    <dimen name="opa_line_x_trans_ry">15.0dip</dimen>
+    <dimen name="opa_line_x_trans_bg">30.0dip</dimen>
+    <dimen name="opa_line_x_collapse_bg">46.0dip</dimen>
+    <dimen name="opa_line_x_collapse_ry">15.0dip</dimen>
+    <dimen name="opa_overshoot_translation">8.0dip</dimen>
+    <dimen name="opa_return_translation">-1.0dip</dimen>
+    <dimen name="opa_rest_to_collapse">7.0dip</dimen>
+</resources>
diff --git a/packages/SystemUI/res/values/lineage_styles.xml b/packages/SystemUI/res/values/lineage_styles.xml
new file mode 100644
index 00000000000..9dfab7e63ae
--- /dev/null
+++ b/packages/SystemUI/res/values/lineage_styles.xml
@@ -0,0 +1,9 @@
+<resources>
+    <!-- Pixel home dot style -->
+    <style name="DotStyle">
+        <item name="android:layout_width">wrap_content</item>
+        <item name="android:layout_height">wrap_content</item>
+        <item name="android:layout_centerHorizontal">true</item>
+        <item name="android:layout_centerVertical">true</item>
+    </style>
+</resources>
diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarInflaterView.java b/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarInflaterView.java
index cfe6d5e3d3a..9050334b797 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarInflaterView.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/phone/NavigationBarInflaterView.java
@@ -159,7 +159,11 @@ public class NavigationBarInflaterView extends FrameLayout
     @Override
     public void onTuningChanged(String key, String newValue) {
         if (NAV_BAR_VIEWS.equals(key)) {
-            if (!Objects.equals(mCurrentLayout, newValue)) {
+            if (!Objects.equals(mCurrentLayout, newValue) ||
+                    // Re-inflate layout even after the saved layout happens to match
+                    // the default one. When onTuningChanged is run again, all Views will
+                    // be inflated correctly.
+                    Objects.equals(mCurrentLayout, getDefaultLayout())) {
                 clearViews();
                 inflateLayout(newValue);
             }
diff --git a/packages/SystemUI/src/com/google/android/systemui/OpaLayout.java b/packages/SystemUI/src/com/google/android/systemui/OpaLayout.java
new file mode 100644
index 00000000000..35d439fcf7e
--- /dev/null
+++ b/packages/SystemUI/src/com/google/android/systemui/OpaLayout.java
@@ -0,0 +1,639 @@
+package com.google.android.systemui;
+
+import android.animation.Animator;
+import android.animation.AnimatorListenerAdapter;
+import android.content.ContentResolver;
+import android.content.Context;
+import android.database.ContentObserver;
+import android.graphics.drawable.Drawable;
+import android.net.Uri;
+import android.os.Handler;
+import android.os.SystemClock;
+import android.os.UserHandle;
+import android.os.UserManager;
+import android.provider.Settings;
+import android.util.ArraySet;
+import android.util.AttributeSet;
+import android.view.MotionEvent;
+import android.view.View;
+import android.view.ViewConfiguration;
+import android.view.RenderNodeAnimator;
+import android.view.animation.Interpolator;
+import android.view.animation.PathInterpolator;
+import android.widget.FrameLayout;
+import android.widget.ImageView;
+
+import com.android.systemui.Interpolators;
+import com.android.systemui.R;
+import com.android.systemui.statusbar.phone.ButtonDispatcher;
+import com.android.systemui.plugins.statusbar.phone.NavBarButtonProvider;
+import com.android.systemui.statusbar.policy.KeyButtonView;
+
+import lineageos.providers.LineageSettings;
+
+public class OpaLayout extends FrameLayout implements NavBarButtonProvider.ButtonInterface{
+
+    private static final int ANIMATION_STATE_NONE = 0;
+    private static final int ANIMATION_STATE_DIAMOND = 1;
+    private static final int ANIMATION_STATE_RETRACT = 2;
+    private static final int ANIMATION_STATE_OTHER = 3;
+
+    private static final int MIN_DIAMOND_DURATION = 100;
+    private static final int COLLAPSE_ANIMATION_DURATION_RY = 83;
+    private static final int COLLAPSE_ANIMATION_DURATION_BG = 100;
+    private static final int LINE_ANIMATION_DURATION_Y = 275;
+    private static final int LINE_ANIMATION_DURATION_X = 133;
+    private static final int RETRACT_ANIMATION_DURATION = 300;
+    private static final int DIAMOND_ANIMATION_DURATION = 200;
+    private static final int HALO_ANIMATION_DURATION = 100;
+
+    private static final int DOTS_RESIZE_DURATION = 200;
+    private static final int HOME_RESIZE_DURATION = 83;
+
+    private static final int HOME_REAPPEAR_ANIMATION_OFFSET = 33;
+    private static final int HOME_REAPPEAR_DURATION = 150;
+
+    private static final float DIAMOND_DOTS_SCALE_FACTOR = 0.8f;
+    private static final float DIAMOND_HOME_SCALE_FACTOR = 0.625f;
+    private static final float HALO_SCALE_FACTOR = 0.47619048f;
+
+    private KeyButtonView mHome;
+
+    private int mAnimationState;
+    private final ArraySet<Animator> mCurrentAnimators;
+
+    private boolean mIsLandscape;
+    private boolean mIsPressed;
+    private boolean mLongClicked;
+    private boolean mOpaEnabled;
+    private long mStartTime;
+
+    private View mRed;
+    private View mBlue;
+    private View mGreen;
+    private View mYellow;
+    private View mWhite;
+    private View mHalo;
+
+    private View mTop;
+    private View mRight;
+    private View mLeft;
+    private View mBottom;
+
+    private final Runnable mCheckLongPress;
+    private final Runnable mRetract;
+
+    private final Interpolator mRetractInterpolator;
+    private final Interpolator mCollapseInterpolator;
+    private final Interpolator mDiamondInterpolator;
+    private final Interpolator mDotsFullSizeInterpolator;
+    private final Interpolator mFastOutSlowInInterpolator;
+    private final Interpolator mHomeDisappearInterpolator;
+    private SettingsObserver mSettingsObserver;
+
+    protected class SettingsObserver extends ContentObserver {
+        SettingsObserver(Handler handler) {
+            super(handler);
+        }
+
+        void observe() {
+           ContentResolver resolver = mContext.getContentResolver();
+           resolver.registerContentObserver(Settings.System.getUriFor(
+                  LineageSettings.System.PIXEL_NAV_ANIMATION),
+                  false, this, UserHandle.USER_CURRENT);
+        }
+
+        @Override
+        public void onChange(boolean selfChange, Uri uri) {
+           super.onChange(selfChange, uri);
+           setOpaEnabled(true);
+        }
+    }
+
+    public OpaLayout(Context context) {
+        super(context);
+        mFastOutSlowInInterpolator = Interpolators.FAST_OUT_SLOW_IN;
+        mHomeDisappearInterpolator = new PathInterpolator(0.8f, 0f, 1f, 1f);
+        mCollapseInterpolator = Interpolators.FAST_OUT_LINEAR_IN;
+        mDotsFullSizeInterpolator = new PathInterpolator(0.4f, 0f, 0f, 1f);
+        mRetractInterpolator = new PathInterpolator(0.4f, 0f, 0f, 1f);
+        mDiamondInterpolator = new PathInterpolator(0.2f, 0f, 0.2f, 1f);
+        mCheckLongPress = new Runnable() {
+            @Override
+            public void run() {
+                if (mIsPressed) {
+                    mLongClicked = true;
+                }
+            }
+        };
+        mRetract = new Runnable() {
+            @Override
+            public void run() {
+                cancelCurrentAnimation();
+                startRetractAnimation();
+            }
+        };
+        mAnimationState = ANIMATION_STATE_NONE;
+        mCurrentAnimators = new ArraySet<Animator>();
+        if (mSettingsObserver == null) {
+            mSettingsObserver = new SettingsObserver(new Handler());
+        }
+        mSettingsObserver.observe();
+    }
+
+    public OpaLayout(Context context, AttributeSet attrs) {
+        super(context, attrs);
+        mFastOutSlowInInterpolator = Interpolators.FAST_OUT_SLOW_IN;
+        mHomeDisappearInterpolator = new PathInterpolator(0.8f, 0f, 1f, 1f);
+        mCollapseInterpolator = Interpolators.FAST_OUT_LINEAR_IN;
+        mDotsFullSizeInterpolator = new PathInterpolator(0.4f, 0f, 0f, 1f);
+        mRetractInterpolator = new PathInterpolator(0.4f, 0f, 0f, 1f);
+        mDiamondInterpolator = new PathInterpolator(0.2f, 0f, 0.2f, 1f);
+        mCheckLongPress = new Runnable() {
+            @Override
+            public void run() {
+                if (mIsPressed) {
+                    mLongClicked = true;
+                }
+            }
+        };
+        mRetract = new Runnable() {
+            @Override
+            public void run() {
+                cancelCurrentAnimation();
+                startRetractAnimation();
+            }
+        };
+        mAnimationState = ANIMATION_STATE_NONE;
+        mCurrentAnimators = new ArraySet<Animator>();
+        if (mSettingsObserver == null) {
+            mSettingsObserver = new SettingsObserver(new Handler());
+        }
+        mSettingsObserver.observe();
+    }
+
+    public OpaLayout(Context context, AttributeSet attrs, int defStyleAttr) {
+        super(context, attrs, defStyleAttr);
+        mFastOutSlowInInterpolator = Interpolators.FAST_OUT_SLOW_IN;
+        mHomeDisappearInterpolator = new PathInterpolator(0.8f, 0f, 1f, 1f);
+        mCollapseInterpolator = Interpolators.FAST_OUT_LINEAR_IN;
+        mDotsFullSizeInterpolator = new PathInterpolator(0.4f, 0f, 0f, 1f);
+        mRetractInterpolator = new PathInterpolator(0.4f, 0f, 0f, 1f);
+        mDiamondInterpolator = new PathInterpolator(0.2f, 0f, 0.2f, 1f);
+        mCheckLongPress = new Runnable() {
+            @Override
+            public void run() {
+                if (mIsPressed) {
+                    mLongClicked = true;
+                }
+            }
+        };
+        mRetract = new Runnable() {
+            @Override
+            public void run() {
+                cancelCurrentAnimation();
+                startRetractAnimation();
+            }
+        };
+        mAnimationState = ANIMATION_STATE_NONE;
+        mCurrentAnimators = new ArraySet<Animator>();
+        if (mSettingsObserver == null) {
+            mSettingsObserver = new SettingsObserver(new Handler());
+        }
+        mSettingsObserver.observe();
+    }
+
+    public OpaLayout(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
+        super(context, attrs, defStyleAttr, defStyleRes);
+        mFastOutSlowInInterpolator = Interpolators.FAST_OUT_SLOW_IN;
+        mHomeDisappearInterpolator = new PathInterpolator(0.8f, 0f, 1f, 1f);
+        mCollapseInterpolator = Interpolators.FAST_OUT_LINEAR_IN;
+        mDotsFullSizeInterpolator = new PathInterpolator(0.4f, 0f, 0f, 1f);
+        mRetractInterpolator = new PathInterpolator(0.4f, 0f, 0f, 1f);
+        mDiamondInterpolator = new PathInterpolator(0.2f, 0f, 0.2f, 1f);
+        mCheckLongPress = new Runnable() {
+            @Override
+            public void run() {
+                if (mIsPressed) {
+                    mLongClicked = true;
+                }
+            }
+        };
+        mRetract = new Runnable() {
+            @Override
+            public void run() {
+                cancelCurrentAnimation();
+                startRetractAnimation();
+            }
+        };
+        mAnimationState = ANIMATION_STATE_NONE;
+        mCurrentAnimators = new ArraySet<Animator>();
+        if (mSettingsObserver == null) {
+            mSettingsObserver = new SettingsObserver(new Handler());
+        }
+        mSettingsObserver.observe();
+    }
+
+    private void startAll(ArraySet<Animator> animators) {
+        for(int i=0; i < animators.size(); i++) {
+            Animator curAnim = (Animator) mCurrentAnimators.valueAt(i);
+            curAnim.start();
+        }
+    }
+
+    private void startCollapseAnimation() {
+        mCurrentAnimators.clear();
+        mCurrentAnimators.addAll(getCollapseAnimatorSet());
+        mAnimationState = ANIMATION_STATE_OTHER;
+        startAll(mCurrentAnimators);
+    }
+
+    private void startDiamondAnimation() {
+        mCurrentAnimators.clear();
+        mCurrentAnimators.addAll(getDiamondAnimatorSet());
+        mAnimationState = ANIMATION_STATE_DIAMOND;
+        startAll(mCurrentAnimators);
+    }
+
+    private void startLineAnimation() {
+        mCurrentAnimators.clear();
+        mCurrentAnimators.addAll(getLineAnimatorSet());
+        mAnimationState = ANIMATION_STATE_OTHER;
+        startAll(mCurrentAnimators);
+    }
+
+    private void startRetractAnimation() {
+        mCurrentAnimators.clear();
+        mCurrentAnimators.addAll(getRetractAnimatorSet());
+        mAnimationState = ANIMATION_STATE_RETRACT;
+        startAll(mCurrentAnimators);
+    }
+
+    private void cancelCurrentAnimation() {
+        if(mCurrentAnimators.isEmpty())
+            return;
+        for(int i=0; i < mCurrentAnimators.size(); i++) {
+            Animator curAnim = (Animator) mCurrentAnimators.valueAt(i);
+            curAnim.removeAllListeners();
+            curAnim.cancel();
+        }
+        mCurrentAnimators.clear();
+        mAnimationState = ANIMATION_STATE_NONE;
+    }
+
+    private void endCurrentAnimation() {
+        if(mCurrentAnimators.isEmpty())
+            return;
+        for(int i=0; i < mCurrentAnimators.size(); i++) {
+            Animator curAnim = (Animator) mCurrentAnimators.valueAt(i);
+            curAnim.removeAllListeners();
+            curAnim.end();
+        }
+        mCurrentAnimators.clear();
+        mAnimationState = ANIMATION_STATE_NONE;
+    }
+
+    private ArraySet<Animator> getCollapseAnimatorSet() {
+        final ArraySet<Animator> set = new ArraySet<Animator>();
+        Animator animator;
+        if (mIsLandscape) {
+            animator = getDeltaAnimatorY(mRed, mCollapseInterpolator, -getPxVal(R.dimen.opa_line_x_collapse_ry), COLLAPSE_ANIMATION_DURATION_RY);
+        } else {
+            animator = getDeltaAnimatorX(mRed, mCollapseInterpolator, getPxVal(R.dimen.opa_line_x_collapse_ry), COLLAPSE_ANIMATION_DURATION_RY);
+        }
+        set.add(animator);
+        set.add(getScaleAnimatorX(mRed, 1.0f, DOTS_RESIZE_DURATION, mDotsFullSizeInterpolator));
+        set.add(getScaleAnimatorY(mRed, 1.0f, DOTS_RESIZE_DURATION, mDotsFullSizeInterpolator));
+        Animator animator2;
+        if (mIsLandscape) {
+            animator2 = getDeltaAnimatorY(mBlue, mCollapseInterpolator, -getPxVal(R.dimen.opa_line_x_collapse_bg), COLLAPSE_ANIMATION_DURATION_BG);
+        } else {
+            animator2 = getDeltaAnimatorX(mBlue, mCollapseInterpolator, getPxVal(R.dimen.opa_line_x_collapse_bg), COLLAPSE_ANIMATION_DURATION_BG);
+        }
+        set.add(animator2);
+        set.add(getScaleAnimatorX(mBlue, 1.0f, DOTS_RESIZE_DURATION, mDotsFullSizeInterpolator));
+        set.add(getScaleAnimatorY(mBlue, 1.0f, DOTS_RESIZE_DURATION, mDotsFullSizeInterpolator));
+        Animator animator3;
+        if (mIsLandscape) {
+            animator3 = getDeltaAnimatorY(mYellow, mCollapseInterpolator, getPxVal(R.dimen.opa_line_x_collapse_ry), COLLAPSE_ANIMATION_DURATION_RY);
+        } else {
+            animator3 = getDeltaAnimatorX(mYellow, mCollapseInterpolator, -getPxVal(R.dimen.opa_line_x_collapse_ry), COLLAPSE_ANIMATION_DURATION_RY);
+        }
+        set.add(animator3);
+        set.add(getScaleAnimatorX(mYellow, 1.0f, DOTS_RESIZE_DURATION, mDotsFullSizeInterpolator));
+        set.add(getScaleAnimatorY(mYellow, 1.0f, DOTS_RESIZE_DURATION, mDotsFullSizeInterpolator));
+        Animator animator4;
+        if (mIsLandscape) {
+            animator4 = getDeltaAnimatorY(mGreen, mCollapseInterpolator, getPxVal(R.dimen.opa_line_x_collapse_bg), COLLAPSE_ANIMATION_DURATION_BG);
+        } else {
+            animator4 = getDeltaAnimatorX(mGreen, mCollapseInterpolator, -getPxVal(R.dimen.opa_line_x_collapse_bg), COLLAPSE_ANIMATION_DURATION_BG);
+        }
+        set.add(animator4);
+        set.add(getScaleAnimatorX(mGreen, 1.0f, DOTS_RESIZE_DURATION, mDotsFullSizeInterpolator));
+        set.add(getScaleAnimatorY(mGreen, 1.0f, DOTS_RESIZE_DURATION, mDotsFullSizeInterpolator));
+        final Animator scaleAnimatorX = getScaleAnimatorX(mWhite, 1.0f, HOME_REAPPEAR_DURATION, mFastOutSlowInInterpolator);
+        final Animator scaleAnimatorY = getScaleAnimatorY(mWhite, 1.0f, HOME_REAPPEAR_DURATION, mFastOutSlowInInterpolator);
+        final Animator scaleAnimatorX2 = getScaleAnimatorX(mHalo, 1.0f, HOME_REAPPEAR_DURATION, mFastOutSlowInInterpolator);
+        final Animator scaleAnimatorY2 = getScaleAnimatorY(mHalo, 1.0f, HOME_REAPPEAR_DURATION, mFastOutSlowInInterpolator);
+        scaleAnimatorX.setStartDelay(HOME_REAPPEAR_ANIMATION_OFFSET);
+        scaleAnimatorY.setStartDelay(HOME_REAPPEAR_ANIMATION_OFFSET);
+        scaleAnimatorX2.setStartDelay(HOME_REAPPEAR_ANIMATION_OFFSET);
+        scaleAnimatorY2.setStartDelay(HOME_REAPPEAR_ANIMATION_OFFSET);
+        set.add(scaleAnimatorX);
+        set.add(scaleAnimatorY);
+        set.add(scaleAnimatorX2);
+        set.add(scaleAnimatorY2);
+        getLongestAnim((set)).addListener((Animator.AnimatorListener)new AnimatorListenerAdapter() {
+            public void onAnimationEnd(final Animator animator) {
+                mCurrentAnimators.clear();
+                mAnimationState = ANIMATION_STATE_NONE;
+            }
+        });
+        return set;
+    }
+
+    private ArraySet<Animator> getDiamondAnimatorSet() {
+        final ArraySet<Animator> set = new ArraySet<Animator>();
+        set.add(getDeltaAnimatorY(mTop, mDiamondInterpolator, -getPxVal(R.dimen.opa_diamond_translation), DIAMOND_ANIMATION_DURATION));
+        set.add(getScaleAnimatorX(mTop, DIAMOND_DOTS_SCALE_FACTOR, DIAMOND_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getScaleAnimatorY(mTop, DIAMOND_DOTS_SCALE_FACTOR, DIAMOND_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getDeltaAnimatorY(mBottom, mDiamondInterpolator, getPxVal(R.dimen.opa_diamond_translation), DIAMOND_ANIMATION_DURATION));
+        set.add(getScaleAnimatorX(mBottom, DIAMOND_DOTS_SCALE_FACTOR, DIAMOND_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getScaleAnimatorY(mBottom, DIAMOND_DOTS_SCALE_FACTOR, DIAMOND_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getDeltaAnimatorX(mLeft, mDiamondInterpolator, -getPxVal(R.dimen.opa_diamond_translation), DIAMOND_ANIMATION_DURATION));
+        set.add(getScaleAnimatorX(mLeft, DIAMOND_DOTS_SCALE_FACTOR, DIAMOND_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getScaleAnimatorY(mLeft, DIAMOND_DOTS_SCALE_FACTOR, DIAMOND_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getDeltaAnimatorX(mRight, mDiamondInterpolator, getPxVal(R.dimen.opa_diamond_translation), DIAMOND_ANIMATION_DURATION));
+        set.add(getScaleAnimatorX(mRight, DIAMOND_DOTS_SCALE_FACTOR, DIAMOND_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getScaleAnimatorY(mRight, DIAMOND_DOTS_SCALE_FACTOR, DIAMOND_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getScaleAnimatorX(mWhite, DIAMOND_HOME_SCALE_FACTOR, DIAMOND_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getScaleAnimatorY(mWhite, DIAMOND_HOME_SCALE_FACTOR, DIAMOND_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getScaleAnimatorX(mHalo, HALO_SCALE_FACTOR, MIN_DIAMOND_DURATION, mFastOutSlowInInterpolator));
+        set.add(getScaleAnimatorY(mHalo, HALO_SCALE_FACTOR, MIN_DIAMOND_DURATION, mFastOutSlowInInterpolator));
+        getLongestAnim(set).addListener((Animator.AnimatorListener)new AnimatorListenerAdapter() {
+            public void onAnimationCancel(final Animator animator) {
+                mCurrentAnimators.clear();
+            }
+
+            public void onAnimationEnd(final Animator animator) {
+                startLineAnimation();
+            }
+        });
+        return set;
+    }
+
+    private ArraySet<Animator> getLineAnimatorSet() {
+        final ArraySet<Animator> set = new ArraySet<Animator>();
+        if (mIsLandscape) {
+            set.add(getDeltaAnimatorY(mRed, mFastOutSlowInInterpolator, getPxVal(R.dimen.opa_line_x_trans_ry), LINE_ANIMATION_DURATION_Y));
+            set.add(getDeltaAnimatorX(mRed, mFastOutSlowInInterpolator, getPxVal(R.dimen.opa_line_y_translation), LINE_ANIMATION_DURATION_X));
+            set.add(getDeltaAnimatorY(mBlue, mFastOutSlowInInterpolator, getPxVal(R.dimen.opa_line_x_trans_bg), LINE_ANIMATION_DURATION_Y));
+            set.add(getDeltaAnimatorY(mYellow, mFastOutSlowInInterpolator, -getPxVal(R.dimen.opa_line_x_trans_ry), LINE_ANIMATION_DURATION_Y));
+            set.add(getDeltaAnimatorX(mYellow, mFastOutSlowInInterpolator, -getPxVal(R.dimen.opa_line_y_translation), LINE_ANIMATION_DURATION_X));
+            set.add(getDeltaAnimatorY(mGreen, mFastOutSlowInInterpolator, -getPxVal(R.dimen.opa_line_x_trans_bg), LINE_ANIMATION_DURATION_Y));
+        } else {
+            set.add(getDeltaAnimatorX(mRed, mFastOutSlowInInterpolator, -getPxVal(R.dimen.opa_line_x_trans_ry), LINE_ANIMATION_DURATION_Y));
+            set.add(getDeltaAnimatorY(mRed, mFastOutSlowInInterpolator, getPxVal(R.dimen.opa_line_y_translation), LINE_ANIMATION_DURATION_X));
+            set.add(getDeltaAnimatorX(mBlue, mFastOutSlowInInterpolator, -getPxVal(R.dimen.opa_line_x_trans_bg), LINE_ANIMATION_DURATION_Y));
+            set.add(getDeltaAnimatorX(mYellow, mFastOutSlowInInterpolator, getPxVal(R.dimen.opa_line_x_trans_ry), LINE_ANIMATION_DURATION_Y));
+            set.add(getDeltaAnimatorY(mYellow, mFastOutSlowInInterpolator, -getPxVal(R.dimen.opa_line_y_translation), LINE_ANIMATION_DURATION_X));
+            set.add(getDeltaAnimatorX(mGreen, mFastOutSlowInInterpolator, getPxVal(R.dimen.opa_line_x_trans_bg), LINE_ANIMATION_DURATION_Y));
+        }
+        set.add(getScaleAnimatorX(mWhite, 0.0f, HOME_RESIZE_DURATION, mHomeDisappearInterpolator));
+        set.add(getScaleAnimatorY(mWhite, 0.0f, HOME_RESIZE_DURATION, mHomeDisappearInterpolator));
+        set.add(getScaleAnimatorX(mHalo, 0.0f, HOME_RESIZE_DURATION, mHomeDisappearInterpolator));
+        set.add(getScaleAnimatorY(mHalo, 0.0f, HOME_RESIZE_DURATION, mHomeDisappearInterpolator));
+        getLongestAnim(set).addListener((Animator.AnimatorListener)new AnimatorListenerAdapter() {
+            public void onAnimationCancel(final Animator animator) {
+                mCurrentAnimators.clear();
+            }
+
+            public void onAnimationEnd(final Animator animator) {
+                startCollapseAnimation();
+            }
+        });
+        return set;
+    }
+
+    private ArraySet<Animator> getRetractAnimatorSet() {
+        final ArraySet<Animator> set = new ArraySet<Animator>();
+        set.add(getTranslationAnimatorX(mRed, mRetractInterpolator, RETRACT_ANIMATION_DURATION));
+        set.add(getTranslationAnimatorY(mRed, mRetractInterpolator, RETRACT_ANIMATION_DURATION));
+        set.add(getScaleAnimatorX(mRed, 1.0f, RETRACT_ANIMATION_DURATION, mRetractInterpolator));
+        set.add(getScaleAnimatorY(mRed, 1.0f, RETRACT_ANIMATION_DURATION, mRetractInterpolator));
+        set.add(getTranslationAnimatorX(mBlue, mRetractInterpolator, RETRACT_ANIMATION_DURATION));
+        set.add(getTranslationAnimatorY(mBlue, mRetractInterpolator, RETRACT_ANIMATION_DURATION));
+        set.add(getScaleAnimatorX(mBlue, 1.0f, RETRACT_ANIMATION_DURATION, mRetractInterpolator));
+        set.add(getScaleAnimatorY(mBlue, 1.0f, RETRACT_ANIMATION_DURATION, mRetractInterpolator));
+        set.add(getTranslationAnimatorX(mGreen, mRetractInterpolator, RETRACT_ANIMATION_DURATION));
+        set.add(getTranslationAnimatorY(mGreen, mRetractInterpolator, RETRACT_ANIMATION_DURATION));
+        set.add(getScaleAnimatorX(mGreen, 1.0f, RETRACT_ANIMATION_DURATION, mRetractInterpolator));
+        set.add(getScaleAnimatorY(mGreen, 1.0f, RETRACT_ANIMATION_DURATION, mRetractInterpolator));
+        set.add(getTranslationAnimatorX(mYellow, mRetractInterpolator, RETRACT_ANIMATION_DURATION));
+        set.add(getTranslationAnimatorY(mYellow, mRetractInterpolator, RETRACT_ANIMATION_DURATION));
+        set.add(getScaleAnimatorX(mYellow, 1.0f, RETRACT_ANIMATION_DURATION, mRetractInterpolator));
+        set.add(getScaleAnimatorY(mYellow, 1.0f, RETRACT_ANIMATION_DURATION, mRetractInterpolator));
+        set.add(getScaleAnimatorX(mWhite, 1.0f, RETRACT_ANIMATION_DURATION, mRetractInterpolator));
+        set.add(getScaleAnimatorY(mWhite, 1.0f, RETRACT_ANIMATION_DURATION, mRetractInterpolator));
+        set.add(getScaleAnimatorX(mHalo, 1.0f, RETRACT_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        set.add(getScaleAnimatorY(mHalo, 1.0f, RETRACT_ANIMATION_DURATION, mFastOutSlowInInterpolator));
+        getLongestAnim(set).addListener((Animator.AnimatorListener)new AnimatorListenerAdapter() {
+            public void onAnimationEnd(final Animator animator) {
+                mCurrentAnimators.clear();
+                mAnimationState = ANIMATION_STATE_NONE;
+            }
+        });
+        return set;
+    }
+
+    private float getPxVal(int id) {
+        return getResources().getDimensionPixelOffset(id);
+    }
+
+    private Animator getDeltaAnimatorX(View v, Interpolator interpolator, float deltaX, int duration) {
+        RenderNodeAnimator anim = new RenderNodeAnimator(8, (int) (v.getX() + deltaX));
+        anim.setTarget(v);
+        anim.setInterpolator(interpolator);
+        anim.setDuration(duration);
+        return anim;
+    }
+
+    private Animator getDeltaAnimatorY(View v, Interpolator interpolator, float deltaY, int duration) {
+        RenderNodeAnimator anim = new RenderNodeAnimator(9, (int) (v.getY() + deltaY));
+        anim.setTarget(v);
+        anim.setInterpolator(interpolator);
+        anim.setDuration(duration);
+        return anim;
+    }
+
+    private Animator getScaleAnimatorX(View v, float factor, int duration, Interpolator interpolator) {
+        RenderNodeAnimator anim = new RenderNodeAnimator(3, factor);
+        anim.setTarget(v);
+        anim.setInterpolator(interpolator);
+        anim.setDuration(duration);
+        return anim;
+    }
+
+    private Animator getScaleAnimatorY(View v, float factor, int duration, Interpolator interpolator) {
+        RenderNodeAnimator anim = new RenderNodeAnimator(4, factor);
+        anim.setTarget(v);
+        anim.setInterpolator(interpolator);
+        anim.setDuration(duration);
+        return anim;
+    }
+
+    private Animator getTranslationAnimatorX(View v, Interpolator interpolator, int duration) {
+        RenderNodeAnimator anim = new RenderNodeAnimator(0, 0);
+        anim.setTarget(v);
+        anim.setInterpolator(interpolator);
+        anim.setDuration(duration);
+        return anim;
+    }
+
+    private Animator getTranslationAnimatorY(View v, Interpolator interpolator, int duration) {
+        RenderNodeAnimator anim = new RenderNodeAnimator(1, 0);
+        anim.setTarget(v);
+        anim.setInterpolator(interpolator);
+        anim.setDuration(duration);
+        return anim;
+    }
+
+    private Animator getLongestAnim(ArraySet<Animator> animators) {
+        long longestDuration = -1;
+        Animator longestAnim = null;
+
+        for(int i=0; i < animators.size(); i++) {
+            Animator a = (Animator) animators.valueAt(i);
+            if(a.getTotalDuration() > longestDuration) {
+                longestDuration = a.getTotalDuration();
+                longestAnim = a;
+            }
+        }
+        return longestAnim;
+    }
+
+    public void abortCurrentGesture() {
+        mHome.abortCurrentGesture();
+    }
+
+    protected void onFinishInflate() {
+        super.onFinishInflate();
+
+        mRed = findViewById(R.id.red);
+        mBlue = findViewById(R.id.blue);
+        mYellow = findViewById(R.id.yellow);
+        mGreen = findViewById(R.id.green);
+        mWhite = findViewById(R.id.white);
+        mHalo = findViewById(R.id.halo);
+        mHome = (KeyButtonView) findViewById(R.id.home_button);
+
+        setOpaEnabled(true);
+    }
+
+    public boolean onInterceptTouchEvent(MotionEvent ev) {
+        if (!mOpaEnabled) {
+            return false;
+        }
+        switch (ev.getAction()) {
+            case MotionEvent.ACTION_DOWN: {
+                if (!mCurrentAnimators.isEmpty()) {
+                    if (mAnimationState != ANIMATION_STATE_RETRACT) {
+                        return false;
+                    }
+                    endCurrentAnimation();
+                }
+                mStartTime = SystemClock.elapsedRealtime();
+                mLongClicked = false;
+                mIsPressed = true;
+                startDiamondAnimation();
+                removeCallbacks(mCheckLongPress);
+                postDelayed(mCheckLongPress, (long)ViewConfiguration.getLongPressTimeout());
+                return false;
+            }
+            case MotionEvent.ACTION_UP:
+            case MotionEvent.ACTION_CANCEL: {
+                if (mAnimationState == ANIMATION_STATE_DIAMOND) {
+                    final long elapsedRealtime = SystemClock.elapsedRealtime();
+                    removeCallbacks(mRetract);
+                    postDelayed(mRetract, 100L - (elapsedRealtime - mStartTime));
+                    removeCallbacks(mCheckLongPress);
+                    return false;
+                }
+                int n;
+                if (!mIsPressed || mLongClicked) {
+                    n = 0;
+                } else {
+                    n = 1;
+                }
+                mIsPressed = false;
+                if (n != 0) {
+                    mRetract.run();
+                    return false;
+                }
+                break;
+            }
+        }
+        return false;
+    }
+
+    public void setCarMode(boolean carMode) {
+        setOpaEnabled(!carMode);
+    }
+
+    public void setImageDrawable(Drawable drawable) {
+        ((ImageView) mWhite).setImageDrawable(drawable);
+    }
+
+    public void setImageResource(int resId) {
+        ((ImageView) mWhite).setImageResource(resId);
+    }
+
+    public void setVertical(boolean landscape) {
+        mIsLandscape = landscape;
+        if (mIsLandscape) {
+            mTop = mGreen;
+            mBottom = mBlue;
+            mRight = mYellow;
+            mLeft = mRed;
+            return;
+        }
+        mTop = mRed;
+        mBottom = mYellow;
+        mLeft = mBlue;
+        mRight = mGreen;
+    }
+
+    public void setDarkIntensity(float darkIntensity) {
+        //((ImageView) mPaint).setColor(getBackgroundColor(darkIntensity));
+        //((ImageView) mForegroundPaint).setColor(getFillColor(darkIntensity));
+        //invalidateSelf();
+    }
+
+    public void setOnLongClickListener(View.OnLongClickListener l) {
+        mHome.setOnLongClickListener(l);
+    }
+
+    public void setOnTouchListener(View.OnTouchListener l) {
+        mHome.setOnTouchListener(l);
+    }
+
+    public void setOpaEnabled(boolean enabled) {
+        final boolean opaToggle = LineageSettings.System.getIntForUser(getContext().getContentResolver(),
+            LineageSettings.System.PIXEL_NAV_ANIMATION, 1, UserHandle.USER_CURRENT) == 1;
+        final boolean b1 = getContext().getResources().getBoolean(com.android.internal.R.bool.config_allowOpaLayout);
+        final boolean b2 = (enabled || UserManager.isDeviceInDemoMode(getContext())) && b1 && opaToggle;
+        mOpaEnabled = b2;
+        int visibility;
+        if (b2) {
+            visibility = View.VISIBLE;
+        } else {
+            visibility = View.INVISIBLE;
+        }
+        mBlue.setVisibility(visibility);
+        mRed.setVisibility(visibility);
+        mYellow.setVisibility(visibility);
+        mGreen.setVisibility(visibility);
+        mHalo.setVisibility(visibility);
+    }
+
+}
-- 
2.17.1

